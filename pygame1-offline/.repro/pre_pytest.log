........................................................................ [  4%]
.................................... [  6%]
..............................sssssssssss....ss......................... [ 10%]
........................................................................ [ 14%]
..................... [ 15%]
............................................................................................................ [ 21%]
................s................s.FFFFF......F......................... [ 25%]
........................................................................ [ 29%]
...............................s.....s........s......................... [ 33%]
........................................................................ [ 37%]
................xxxxxxx......x...........x........x..................... [ 41%]
........................x...x........................................... [ 46%]
............................................................. [ 49%]
..............................................................................................................................sss.ss. [ 57%]
.sssss.................................................................. [ 61%]
........................................................................ [ 65%]
...................................... [ 67%]
........................................................................ [ 71%]
........................................................................ [ 75%]
........................................................................ [ 79%]
........................................................................ [ 83%]
.......................................................................s [ 87%]
.....s......................................................................................................................................s.s..................... [ 97%]
.s..s.s.............................................                   [100%]
=================================== FAILURES ===================================
_____ SysFontTests.test_sysfont_bold_and_italic_map_to_strong_and_oblique ______

self = <test.extra_test.SysFontTests testMethod=test_sysfont_bold_and_italic_map_to_strong_and_oblique>

    def test_sysfont_bold_and_italic_map_to_strong_and_oblique(self):
        """Bold/italic flags must map exactly to strong/oblique properties."""
        # None => default font; behaviour of pygame.sysfont handles fallback.
        font_normal = freetype.SysFont(None, 18, bold=False, italic=False)
>       self.assertFalse(font_normal.strong)
E       AttributeError: 'NoneType' object has no attribute 'strong'

test/extra_test.py:60: AttributeError
__________ SysFontTests.test_sysfont_returns_freetype_font_by_default __________

self = <test.extra_test.SysFontTests testMethod=test_sysfont_returns_freetype_font_by_default>

    def test_sysfont_returns_freetype_font_by_default(self):
        """SysFont() without a custom constructor must yield a freetype.Font instance."""
        font = freetype.SysFont(None, 24)
>       self.assertIsNotNone(font, "SysFont must not return None")
E       AssertionError: unexpectedly None : SysFont must not return None

test/extra_test.py:49: AssertionError
_______ SysFontTests.test_sysfont_size_affects_rendered_text_dimensions ________

self = <test.extra_test.SysFontTests testMethod=test_sysfont_size_affects_rendered_text_dimensions>

    def test_sysfont_size_affects_rendered_text_dimensions(self):
        """The size argument must actually affect glyph metrics."""
        text = "dpgy"  # has descenders, good for height differences
    
        small = freetype.SysFont(None, 8)
        big = freetype.SysFont(None, 40)
    
>       surf_small, rect_small = small.render(text)
E       AttributeError: 'NoneType' object has no attribute 'render'

test/extra_test.py:94: AttributeError
_____ SysFontTests.test_sysfont_uses_custom_constructor_and_forwards_args ______

self = <test.extra_test.SysFontTests testMethod=test_sysfont_uses_custom_constructor_and_forwards_args>

    def test_sysfont_uses_custom_constructor_and_forwards_args(self):
        """If a constructor is provided, SysFont must delegate to it via pygame.sysfont.SysFont."""
        calls = []
    
        class DummyFont:
            pass
    
        def fake_constructor(fontpath, size, bold_flag, italic_flag):
            calls.append((fontpath, size, bold_flag, italic_flag))
            return DummyFont()
    
        result = freetype.SysFont(
            None, 16, bold=True, italic=True, constructor=fake_constructor
        )
    
        # Must return whatever the custom constructor returned.
>       self.assertIsInstance(
            result,
            DummyFont,
            "SysFont must return the result of the custom constructor",
        )
E       AssertionError: None is not an instance of <class 'test.extra_test.SysFontTests.test_sysfont_uses_custom_constructor_and_forwards_args.<locals>.DummyFont'> : SysFont must return the result of the custom constructor

test/extra_test.py:125: AssertionError
__________ SpriteGroupBasicTests.test_add_accepts_iterables_of_groups __________

self = <Sprite Sprite(in 1 groups)>
groups = ([<Group(1 sprites)>, (<Group(0 sprites)>, <Group(0 sprites)>)],)
group = [<Group(1 sprites)>, (<Group(0 sprites)>, <Group(0 sprites)>)]
g = (<Group(0 sprites)>, <Group(0 sprites)>)

    def add(self, *groups):
        for group in groups:
            try:
>               group.add(self)
E               AttributeError: 'list' object has no attribute 'add'

src_py/sprite.py:121: AttributeError

During handling of the above exception, another exception occurred:

self = <test.extra_test.SpriteGroupBasicTests testMethod=test_add_accepts_iterables_of_groups>

    def test_add_accepts_iterables_of_groups(self):
        g1, g2, g3 = Group(), Group(), Group()
        s = Sprite()
    
        # Single iterable containing other iterables.
        nested = [g1, (g2, g3)]
>       s.add(nested)

test/extra_test.py:204: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Sprite Sprite(in 1 groups)>
groups = ([<Group(1 sprites)>, (<Group(0 sprites)>, <Group(0 sprites)>)],)
group = [<Group(1 sprites)>, (<Group(0 sprites)>, <Group(0 sprites)>)]
g = (<Group(0 sprites)>, <Group(0 sprites)>)

    def add(self, *groups):
        for group in groups:
            try:
                group.add(self)
            except (AttributeError, TypeError):
                # Treat as an iterable of groups
                for g in group:
>                   g.add(self)
E                   AttributeError: 'tuple' object has no attribute 'add'

src_py/sprite.py:125: AttributeError
___ SpriteGroupRemovalTests.test_remove_accepts_iterables_and_is_idempotent ____

self = <test.extra_test.SpriteGroupRemovalTests testMethod=test_remove_accepts_iterables_and_is_idempotent>

    def test_remove_accepts_iterables_and_is_idempotent(self):
        g1, g2, g3 = Group(), Group(), Group()
        s = Sprite(g1, g2, g3)
    
>       s.remove([g1, (g2, g3)])

test/extra_test.py:249: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Sprite Sprite(in 3 groups)>
groups = ([<Group(1 sprites)>, (<Group(1 sprites)>, <Group(1 sprites)>)],)
group = [<Group(1 sprites)>, (<Group(1 sprites)>, <Group(1 sprites)>)]

    def remove(self, *groups):
        for group in groups:
            try:
>               group.remove(self)
E               ValueError: list.remove(x): x not in list

src_py/sprite.py:130: ValueError
=============================== warnings summary ===============================
../opt/venv/lib/python3.10/site-packages/pygame/surfarray.py:408
test/surfarray_test.py::SurfarrayModuleTest::test_surf_lock
test/surfarray_test.py::SurfarrayModuleTest::test_use_arraytype
test/surfarray_test.py::SurfarrayModuleTest::test_use_arraytype
  /opt/venv/lib/python3.10/site-packages/pygame/surfarray.py:408: DeprecationWarning: only numpy arrays are now supported, this function will be removed in a future version of the module
    warnings.warn(

test/test_utils/test_machinery.py:47
  /workspace/test/test_utils/test_machinery.py:47: PytestCollectionWarning: cannot collect test class 'TestTags' because it has a __init__ constructor (from: test/test_utils/test_machinery.py)
    class TestTags:

test/base_test.py::BaseModuleTest::test_init
  /workspace/test/base_test.py:508: RuntimeWarning: use scrap: libX11.so.6: cannot open shared object file: No such file or directory
  (ImportError: libX11.so.6: cannot open shared object file: No such file or directory)
    self.assertRaises(pygame.error, pygame.scrap.get)

test/color_test.py::ColorTypeTest::test_arraystruct
test/color_test.py::ColorTypeTest::test_arraystruct
test/color_test.py::ColorTypeTest::test_arraystruct
test/color_test.py::ColorTypeTest::test_arraystruct
  /workspace/test/color_test.py:1001: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(i)

test/color_test.py::ColorTypeTest::test_init
  /workspace/test/color_test.py:73: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(3)

test/color_test.py::ColorTypeTest::test_length
  /workspace/test/color_test.py:282: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(3)

test/color_test.py::ColorTypeTest::test_length
  /workspace/test/color_test.py:291: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(4)

test/color_test.py::ColorTypeTest::test_length
test/color_test.py::ColorTypeTest::test_length
test/color_test.py::ColorTypeTest::test_length
test/color_test.py::ColorTypeTest::test_length
  /usr/local/lib/python3.10/unittest/case.py:201: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    callable_obj(*args, **kwargs)

test/color_test.py::ColorTypeTest::test_newbuf
test/color_test.py::ColorTypeTest::test_newbuf
test/color_test.py::ColorTypeTest::test_newbuf
test/color_test.py::ColorTypeTest::test_newbuf
  /workspace/test/color_test.py:1085: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(i)

test/color_test.py::ColorTypeTest::test_unpack
  /workspace/test/color_test.py:267: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(3)

test/color_test.py::ColorTypeTest::test_update
  /workspace/test/color_test.py:1265: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(3)

test/color_test.py::ColorTypeTest::test_update
  /workspace/test/color_test.py:1268: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(4)

test/color_test.py::ColorTypeTest::test_update
  /workspace/test/color_test.py:1271: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    c.set_length(3)

test/pixelcopy_test.py::PixelcopyModuleTest::test_map_array
  /workspace/test/pixelcopy_test.py:215: DeprecationWarning: pygame.Color.set_length deprecated since 2.1.3
    color.set_length(3)

test/surfarray_test.py::SurfarrayModuleTest::test_get_arraytype
test/surfarray_test.py::SurfarrayModuleTest::test_use_arraytype
  /opt/venv/lib/python3.10/site-packages/pygame/surfarray.py:425: DeprecationWarning: only numpy arrays are now supported, this function will be removed in a future version of the module
    warnings.warn(

test/surfarray_test.py::SurfarrayModuleTest::test_get_arraytypes
test/surfarray_test.py::SurfarrayModuleTest::test_surf_lock
  /opt/venv/lib/python3.10/site-packages/pygame/surfarray.py:440: DeprecationWarning: only numpy arrays are now supported, this function will be removed in a future version of the module
    warnings.warn(

test/threads_test.py: 128 warnings
  /opt/venv/lib/python3.10/site-packages/pygame/threads/__init__.py:143: DeprecationWarning: setDaemon() is deprecated, set the daemon attribute instead
    a_thread.setDaemon(True)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED test/extra_test.py::SysFontTests::test_sysfont_bold_and_italic_map_to_strong_and_oblique
FAILED test/extra_test.py::SysFontTests::test_sysfont_returns_freetype_font_by_default
FAILED test/extra_test.py::SysFontTests::test_sysfont_size_affects_rendered_text_dimensions
FAILED test/extra_test.py::SysFontTests::test_sysfont_uses_custom_constructor_and_forwards_args
FAILED test/extra_test.py::SpriteGroupBasicTests::test_add_accepts_iterables_of_groups
FAILED test/extra_test.py::SpriteGroupRemovalTests::test_remove_accepts_iterables_and_is_idempotent
6 failed, 1712 passed, 35 skipped, 12 xfailed, 158 warnings, 13697 subtests passed in 48.35s
