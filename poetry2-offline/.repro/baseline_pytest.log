bringing up nodes...
bringing up nodes...

EEEEEEEEEE...EE....FE.FF...E.F......F...E..E.EE.......F........EE...E... [ 15%]
.........E..................E.E....F..E.E.....E.E......F.E..E..EE......E [ 31%]
..FE.EE....EFEE...EF.EF..E......EE.....E..FE............E..E..E......... [ 46%]
....E...E........E.........E.......E..F..........F....E.........F....... [ 62%]
.......F...E...E................E........F..............E............... [ 78%]
............................F.....F..................................... [ 93%]
............F.F.F..FF....F...                                            [100%]
==================================== ERRORS ====================================
____________________ ERROR at setup of test_info_from_sdist ____________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7b21f53a2440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____________ ERROR at setup of test_info_setup_complex_calls_script ____________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7fb9cdec6440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
__________________ ERROR at setup of test_circular_dependency __________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7a9c2f886440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___ ERROR at setup of test_yanked_release[==2-versions9-yanked_versions9-2] ____
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x739079c9a440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____ ERROR at setup of test_metadata_from_wheel_url[negative_offset_error1] ____
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x741738d7c310>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_unlocks_dependencies_if_necessary_to_ensure_that_a_new_dependency_is_satisfied _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x750d66e66440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
______________ ERROR at setup of test_info_from_poetry_directory _______________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x775919372440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
__ ERROR at setup of test_yanked_release[>1-versions4-yanked_versions4-error] __
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x764ef80e2440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___________ ERROR at setup of test_backtracking_performance_level_1 ____________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7df6ec7c0280>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_builder_generates_proper_metadata_when_multiple_readme_files _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7019d2986440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___ ERROR at setup of test_dependencies_is_consistent_to_poetry_core_schema ____
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7636aa756440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
________ ERROR at setup of test_info_no_setup_pkg_info_no_deps_dynamic _________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7e5219a76440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_metadata_from_wheel_url_smaller_than_initial_chunk_size[None-1] _
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x74a7c075e440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_________________ ERROR at setup of test_pyproject_toml_valid __________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7d4acb4c6440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_metadata_from_wheel_url_range_requests_not_supported_two_requests[negative_offset_error0] _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7dfb23c62440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___________ ERROR at setup of test_backjumps_after_partial_satisfier ___________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7789ec3c4280>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___________________ ERROR at setup of test_no_valid_solution ___________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7ad42d6fa440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_str_dependency_cause[dependency11-dependency21-foo (1.0) depends on bar (^1.0)] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7a923fb62440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
__________ ERROR at setup of test_direct_origin_get_package_from_file __________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x78272c1b2440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____________ ERROR at setup of test_no_version_matching_constraint _____________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7063225aa440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____ ERROR at setup of test_metadata_from_wheel_url[negative_offset_error6] ____
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7461cd524310>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
________ ERROR at setup of test_info_from_wheel_metadata_versions[299] _________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x77091a1f2440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____ ERROR at setup of test_ensure_plugins_ignore_irrelevant_markers[False] ____
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7a923cfce710>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7a923f70f790>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw8/test_ensure_plugins_ignore_irr0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_____ ERROR at setup of test_ensure_plugins_pins_other_installed_packages ______
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7ad42683d840>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_pins_other0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
____ ERROR at setup of test_ensure_plugins_ignore_irrelevant_markers[True] _____
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7a923cfce710>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7a923cf0bb20>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw8/test_ensure_plugins_ignore_irr1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_project_plugins_are_installed_in_project_folder[False] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7ad4268dc880>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_project_plugins_are_insta0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_________ ERROR at setup of test_uploader_properly_handles_400_errors __________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7df6ec7ad990>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7df6ec634970>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7df6ec5ee3e0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_project_plugins_are_installed_in_project_folder[True] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7ad426880040>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_project_plugins_are_insta1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_________ ERROR at setup of test_uploader_properly_handles_403_errors __________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7df6ec7ad990>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7df6eeffdde0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7df6ec822680>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________ ERROR at setup of test_ensure_plugins_install_missing_plugins _________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x764ef1299870>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x764ef1507880>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw11/test_ensure_plugins_install_mi0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
____________ ERROR at setup of test_ensure_plugins_remove_outdated _____________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7a923cfce710>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7a923cf48d30>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw8/test_ensure_plugins_remove_out0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_______ ERROR at setup of test_ensure_plugins_no_output_if_fresh[False] ________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74a7b99c41f0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x74a7c0249b40>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw9/test_ensure_plugins_no_output_0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
______ ERROR at setup of test_ensure_plugins_install_only_missing_plugins ______
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x764ef1299870>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x764ef14f22f0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw11/test_ensure_plugins_install_on0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[304-Not Modified] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x770919cd01f0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x770919c122f0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7709133b6f20>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_____ ERROR at setup of test_uploader_properly_handles_nonstandard_errors ______
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7df6ec7ad990>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7df6ec4b3fa0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7df6ec6364d0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
___ ERROR at setup of test_uploader_skip_existing_bubbles_unskippable_errors ___
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x775918e201f0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7759123c41f0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x775912361360>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_ensure_plugins_install_overwrite_wrong_version_plugins[False] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x764ef1299870>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x764ef14abeb0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw11/test_ensure_plugins_install_ov0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
__ ERROR at setup of test_uploader_properly_handles_redirects[303-See Other] ___
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x770919cd01f0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x770919c10640>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x770919c92fe0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
______ ERROR at setup of test_uploader_properly_handles_file_not_existing ______
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x775918e201f0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x77591259e530>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x775918dc9660>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[308-Permanent Redirect] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7df6ec7ad990>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7df6ec5ef5e0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7df6ed1016c0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________ ERROR at setup of test_ensure_plugins_no_output_if_fresh[True] ________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74a7b99c41f0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x74a7b9a5c3d0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw9/test_ensure_plugins_no_output_1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_ensure_plugins_install_overwrite_wrong_version_plugins[True] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x764ef1299870>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x764ef14f10c0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw11/test_ensure_plugins_install_ov1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
____ ERROR at setup of test_uploader_properly_handles_redirects[302-Found] _____
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x770919cd01f0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7709133ca1d0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7709132fbc10>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________________ ERROR at setup of test_add_project_plugin_path ________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b21f4e6c1f0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7b21ee4a9d80>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw1/test_add_project_plugin_path0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[307-Temporary Redirect] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7df6ec7ad990>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7df6ec70c100>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7df6ec737e50>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[300-Multiple Choices] _
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7789ec3e3f40>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7789e5c7e110>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7789e5aea140>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
___ ERROR at setup of test_uploader_skips_existing[400-File already exists] ____
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ad426a60fd0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad42695a2c0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________ ERROR at setup of test_uploader_properly_handles_301_redirects ________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7789ec3e3f40>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7789e5c7c8e0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7789e5b98880>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[301-Moved Permanently] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x770919cd01f0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x770913319750>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7709133611e0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_skips_existing[400-Repository does not allow updating assets] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ad42d2003a0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad426fcabf0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_ensure_plugins_ignore_already_installed_in_system_env _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7a923cfce710>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x7a923cf69810>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw8/test_ensure_plugins_ignore_alr0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_____ ERROR at setup of test_uploader_registers_for_appropriate_400_errors _____
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7789ec3e3f40>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7789e6565600>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7789e638db10>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_skips_existing[403-Not enough permissions to overwrite artifact] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ad42684be80>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad4268dd4e0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_____________ ERROR at setup of test_uploader_skips_existing[409-] _____________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7789ec3e3f40>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7789e5a0ef20>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7789e5c61570>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_skips_existing[400-file name has already been taken] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ad4268de650>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad4268dfd90>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
______________ ERROR at setup of test_system_site_packages[True] _______________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad426816440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>
installed_results = [<importlib.metadata.PathDistribution object at 0x7ad42d20e740>, <importlib.metadata.PathDistribution object at 0x7ad4...tadata.PathDistribution object at 0x7ad42695b310>, <importlib.metadata.PathDistribution object at 0x7ad42683b400>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_pipx_shared_lib_site_packages _____________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7b21ee4205e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b21f4e6c1f0>
installed_results = [<importlib.metadata.PathDistribution object at 0x7b21ee623640>, <importlib.metadata.PathDistribution object at 0x7b21...tadata.PathDistribution object at 0x7b21ee4d8430>, <importlib.metadata.PathDistribution object at 0x7b21ee4d8310>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_system_site_packages_source_type ____________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad426979ab0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad42d24c310>
installed_results = [<importlib.metadata.PathDistribution object at 0x7ad42d20e740>, <importlib.metadata.PathDistribution object at 0x7ad4...tadata.PathDistribution object at 0x7ad42695b310>, <importlib.metadata.PathDistribution object at 0x7ad42683b400>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_system_site_packages[False] ______________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7461cd351120>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7461cd524280>
installed_results = [<importlib.metadata.PathDistribution object at 0x7461cd3a4220>, <importlib.metadata.PathDistribution object at 0x7461...tadata.PathDistribution object at 0x7461cd347ee0>, <importlib.metadata.PathDistribution object at 0x7461cd347850>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
=================================== FAILURES ===================================
_______ test_info_setup_missing_mandatory_should_trigger_pep517[version] _______
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7fb9c7a419f0>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_info_setup_missing_mandat0/source')
missing = 'version'

    @pytest.mark.parametrize("missing", ["version", "name"])
    def test_info_setup_missing_mandatory_should_trigger_pep517(
        mocker: MockerFixture, source_dir: Path, missing: str
    ) -> None:
        setup = "from setuptools import setup; "
        setup += "setup("
        setup += 'name="demo", ' if missing != "name" else ""
        setup += 'version="0.1.0", ' if missing != "version" else ""
        setup += 'install_requires=["package"]'
        setup += ")"
    
        setup_py = source_dir / "setup.py"
        setup_py.write_text(setup, encoding="utf-8")
    
        spy = mocker.spy(ProjectBuilder, "from_isolated_env")
>       _ = PackageInfo.from_directory(source_dir)

/workspace/tests/inspection/test_info.py:392: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_info_setup_missing_mandat0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_______________________ test_info_from_sdist_no_pkg_info _______________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b21f4e6c1f0>

    def test_info_from_sdist_no_pkg_info(fixture_dir: FixtureDirGetter) -> None:
        path = fixture_dir("distributions") / "demo_no_pkg_info-0.1.0.tar.gz"
>       info = PackageInfo.from_sdist(path)

/workspace/tests/inspection/test_info.py:193: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmp7edkaxqf/demo-0.1.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
__________________ test_builder_should_execute_build_scripts ___________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7019d027f370>
extended_without_setup_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw14/test_builder_should_execute_bu0')

    def test_builder_should_execute_build_scripts(
        mocker: MockerFixture, extended_without_setup_poetry: Poetry, tmp_path: Path
    ) -> None:
        env = MockEnv(path=tmp_path / "foo")
        mocker.patch(
            "poetry.masonry.builders.editable.build_environment"
        ).return_value.__enter__.return_value = env
    
>       builder = EditableBuilder(extended_without_setup_poetry, env, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:352: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7019cbb5b2e0>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
____________________________ test_info_setup_simple ____________________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7e5212dcd270>
demo_setup = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_simple0/source')

    def test_info_setup_simple(mocker: MockerFixture, demo_setup: Path) -> None:
        spy = mocker.spy(VirtualEnv, "run")
>       info = PackageInfo.from_directory(demo_setup)

/workspace/tests/inspection/test_info.py:331: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_simple0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
________ test_info_setup_missing_mandatory_should_trigger_pep517[name] _________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7fb9c7147a90>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_info_setup_missing_mandat1/source')
missing = 'name'

    @pytest.mark.parametrize("missing", ["version", "name"])
    def test_info_setup_missing_mandatory_should_trigger_pep517(
        mocker: MockerFixture, source_dir: Path, missing: str
    ) -> None:
        setup = "from setuptools import setup; "
        setup += "setup("
        setup += 'name="demo", ' if missing != "name" else ""
        setup += 'version="0.1.0", ' if missing != "version" else ""
        setup += 'install_requires=["package"]'
        setup += ")"
    
        setup_py = source_dir / "setup.py"
        setup_py.write_text(setup, encoding="utf-8")
    
        spy = mocker.spy(ProjectBuilder, "from_isolated_env")
>       _ = PackageInfo.from_directory(source_dir)

/workspace/tests/inspection/test_info.py:392: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_info_setup_missing_mandat1/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
___________________________ test_info_setup_complex ____________________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

demo_setup_complex = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_complex0/source')

    def test_info_setup_complex(demo_setup_complex: Path) -> None:
>       info = PackageInfo.from_directory(demo_setup_complex)

/workspace/tests/inspection/test_info.py:338: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_complex0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_____________________ test_info_setup_complex_pep517_error _____________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7e5212bf58a0>
demo_setup_complex = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_complex_pep5170/source')

    def test_info_setup_complex_pep517_error(
        mocker: MockerFixture, demo_setup_complex: Path
    ) -> None:
        output = uuid.uuid4().hex
        mocker.patch(
            "build.ProjectBuilder.from_isolated_env",
            autospec=True,
            side_effect=BuildBackendException(CalledProcessError(1, "mock", output=output)),
        )
    
        with pytest.raises(PackageInfoError) as exc:
>           PackageInfo.from_directory(demo_setup_complex)

/workspace/tests/inspection/test_info.py:353: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_complex_pep5170/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
____________________ test_info_setup_complex_pep517_legacy _____________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

demo_setup_complex_pep517_legacy = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_complex_pep5171/source')

    def test_info_setup_complex_pep517_legacy(
        demo_setup_complex_pep517_legacy: Path,
    ) -> None:
>       info = PackageInfo.from_directory(demo_setup_complex_pep517_legacy)

/workspace/tests/inspection/test_info.py:367: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw3/test_info_setup_complex_pep5171/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_________ test_publish_can_publish_to_given_repository[sample_project] _________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7dfb238301f0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7dfb21014370>
config = <tests.conftest.Config object at 0x7dfb210428f0>
fixture_name = 'sample_project'

    @pytest.mark.parametrize("fixture_name", ["sample_project", "with_source"])
    def test_publish_can_publish_to_given_repository(
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
        config: Config,
        fixture_name: str,
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
    
        config.merge(
            {
                "repositories": {"foo": {"url": "http://foo.bar"}},
                "http-basic": {"foo": {"username": "foo", "password": "bar"}},
            }
        )
    
        mocker.patch("poetry.config.config.Config.create", return_value=config)
        poetry = Factory().create_poetry(fixture_dir(fixture_name))
    
        io = BufferedIO()
>       publisher = Publisher(poetry, io)

/workspace/tests/publishing/test_publisher.py:67: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7dfb2112bfa0>
poetry = None, io = <cleo.io.buffered_io.BufferedIO object at 0x7dfb23838f40>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
------------------------------ Captured log setup ------------------------------
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7dfb210094e0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:463 error closing file <_io.BufferedRandom name=15>: flush of closed file
__________ test_publish_can_publish_to_given_repository[with_source] ___________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7dfb238301f0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7dfb210403a0>
config = <tests.conftest.Config object at 0x7dfb2100f340>
fixture_name = 'with_source'

    @pytest.mark.parametrize("fixture_name", ["sample_project", "with_source"])
    def test_publish_can_publish_to_given_repository(
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
        config: Config,
        fixture_name: str,
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
    
        config.merge(
            {
                "repositories": {"foo": {"url": "http://foo.bar"}},
                "http-basic": {"foo": {"username": "foo", "password": "bar"}},
            }
        )
    
        mocker.patch("poetry.config.config.Config.create", return_value=config)
        poetry = Factory().create_poetry(fixture_dir(fixture_name))
    
        io = BufferedIO()
>       publisher = Publisher(poetry, io)

/workspace/tests/publishing/test_publisher.py:67: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7dfb20fec700>
poetry = None, io = <cleo.io.buffered_io.BufferedIO object at 0x7dfb21015630>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
__________________ test_publish_publishes_to_pypi_by_default ___________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7a9c2f3364d0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7a9c2c9efa60>
config = <tests.conftest.Config object at 0x7a9c2ca15300>

    def test_publish_publishes_to_pypi_by_default(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:31: AttributeError
______________ test_publish_raises_error_for_undefined_repository ______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7dfb238301f0>
config = <tests.conftest.Config object at 0x7dfb2104c5b0>

    def test_publish_raises_error_for_undefined_repository(
        fixture_dir: FixtureDirGetter, config: Config
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:84: AttributeError
_____________________ test_publish_uses_token_if_it_exists _____________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7dfb238301f0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7dfb210202b0>
config = <tests.conftest.Config object at 0x7dfb21020400>

    def test_publish_uses_token_if_it_exists(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        config.merge({"pypi-token": {"pypi": "my-token"}})
>       assert_publish_uses_token_if_it_exists(fixture_dir, mocker, config)

/workspace/tests/publishing/test_publisher.py:118: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7dfb238301f0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7dfb210202b0>
config = <tests.conftest.Config object at 0x7dfb21020400>

    def assert_publish_uses_token_if_it_exists(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config | None = None
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
    
        if config:
>           poetry._config = config
E           AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:102: AttributeError
___________________ test_publish_uses_env_token_if_it_exists ___________________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70631b712a70>
mocker = <pytest_mock.plugin.MockerFixture object at 0x70631b6b2fb0>
environ = None

    def test_publish_uses_env_token_if_it_exists(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, environ: None
    ) -> None:
        os.environ["POETRY_PYPI_TOKEN_PYPI"] = "my-token"
>       assert_publish_uses_token_if_it_exists(fixture_dir, mocker)

/workspace/tests/publishing/test_publisher.py:125: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/tests/publishing/test_publisher.py:104: in assert_publish_uses_token_if_it_exists
    publisher = Publisher(poetry, NullIO())
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x70631b7f6ef0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x70631b906500>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
____________________________ test_publish_uses_cert ____________________________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70631b712a70>
mocker = <pytest_mock.plugin.MockerFixture object at 0x70631b50dae0>
config = <tests.conftest.Config object at 0x70631b566140>

    def test_publish_uses_cert(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        cert = "path/to/ca.pem"
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:135: AttributeError
________________________ test_publish_uses_client_cert _________________________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70631b712a70>
mocker = <pytest_mock.plugin.MockerFixture object at 0x70631b777070>
config = <tests.conftest.Config object at 0x70631b777ee0>

    def test_publish_uses_client_cert(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        client_cert = "path/to/client.pem"
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:165: AttributeError
_________________ test_publish_read_from_environment_variable __________________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70631b712a70>
environ = None
mocker = <pytest_mock.plugin.MockerFixture object at 0x706322107640>
config = <tests.conftest.Config object at 0x7063220e2bc0>

    def test_publish_read_from_environment_variable(
        fixture_dir: FixtureDirGetter,
        environ: None,
        mocker: MockerFixture,
        config: Config,
    ) -> None:
        os.environ["POETRY_REPOSITORIES_FOO_URL"] = "https://foo.bar"
        os.environ["POETRY_HTTP_BASIC_FOO_USERNAME"] = "bar"
        os.environ["POETRY_HTTP_BASIC_FOO_PASSWORD"] = "baz"
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       publisher = Publisher(poetry, NullIO())

/workspace/tests/publishing/test_publisher.py:199: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7063220491b0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x70632202c790>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
_______________ test_get_package_information_fallback_read_setup _______________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x775912433610>
name = 'jupyter'
version = Version(epoch=0, release=Release(major=1, minor=0, patch=0, extra=(), precision=3, text='1.0.0', _compare_key=(1,)), p...y=(1,)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('jupyter', '1.0.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x775912433610>

    def test_get_package_information_fallback_read_setup(
        legacy_repository: LegacyRepository,
    ) -> None:
        repo = legacy_repository
    
>       package = repo.package("jupyter", Version.parse("1.0.0"))

/workspace/tests/repositories/test_legacy_repository.py:138: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpdv6r8rmp/jupyter-1.0.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7759125d0e80>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/jupyter/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7759125d3c40>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7759125d3670>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7759125d3520>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7759125d0df0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7759125d32e0>: 'super' object has no attribute 'flush'
______________ test_get_package_retrieves_packages_with_no_hashes ______________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x70631b7f5240>
name = 'jupyter'
version = Version(epoch=0, release=Release(major=1, minor=0, patch=0, extra=(), precision=3, text='1.0.0', _compare_key=(1,)), p...y=(1,)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('jupyter', '1.0.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x70631b7f5240>
dist_hash_getter = <function dist_hash_getter.<locals>.get_hash at 0x70631b711b40>

    def test_get_package_retrieves_packages_with_no_hashes(
        legacy_repository: LegacyRepository, dist_hash_getter: DistributionHashGetter
    ) -> None:
        repo = legacy_repository
    
>       package = repo.package("jupyter", Version.parse("1.0.0"))

/workspace/tests/repositories/test_legacy_repository.py:455: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpo6dsvhgk/jupyter-1.0.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x70631b79ca60>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/jupyter/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x70631b91ea10>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x70631b9353f0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x70631b935c90>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x70631bedb340>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x70631bed9840>: 'super' object has no attribute 'flush'
__________________________ test_package_partial_yank ___________________________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x750d5fea1570>
name = 'futures'
version = Version(epoch=0, release=Release(major=3, minor=2, patch=0, extra=(), precision=3, text='3.2.0', _compare_key=(3, 2)),...(3, 2)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('futures', '3.2.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x750d5fea11b0>
legacy_repository_partial_yank = <poetry.repositories.legacy_repository.LegacyRepository object at 0x750d5fea1570>

    def test_package_partial_yank(
        legacy_repository: LegacyRepository,
        legacy_repository_partial_yank: LegacyRepository,
    ) -> None:
        repo = legacy_repository
        package = repo.package("futures", Version.parse("3.2.0"))
        assert len(package.files) == 2
    
        repo = legacy_repository_partial_yank
>       package = repo.package("futures", Version.parse("3.2.0"))

/workspace/tests/repositories/test_legacy_repository.py:501: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpecnldllt/futures-3.2.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea2590>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/futures/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea2680>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea3070>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/2d/99/b2c4e9d5a30f6471e410a146232b4118e697fa3ffc06d6a65efde84debd0/futures-3.2.0-py2-none-any.whl", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'identity', 'Accept': '*/*', 'Connection': 'keep-alive', 'Cache-Control': 'no-cache', 'Range': 'bytes=-10000'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea3160>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea3160>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea3040>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/2d/99/b2c4e9d5a30f6471e410a146232b4118e697fa3ffc06d6a65efde84debd0/futures-3.2.0-py2-none-any.whl", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d5fea2ad0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d64aa4d00>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/futures-partial-yank/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d64aa4970>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d64aa76a0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/1f/9e/7b2ff7e965fc654592269f2906ade1c7d705f1bf25b7d469fa153f7d19eb/futures-3.2.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x750d64aa6410>: 'super' object has no attribute 'flush'
___ test_builder_installs_proper_files_for_standard_packages[simple_project] ___
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'simple_project', simple_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_installs_proper_f0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7636aa2141f0>

    @pytest.mark.parametrize("project", ("simple_project", "simple_project_legacy"))
    def test_builder_installs_proper_files_for_standard_packages(
        project: str,
        simple_poetry: Poetry,
        tmp_path: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        simple_poetry = Factory().create_poetry(fixture_dir(project))
        env_manager = EnvManager(simple_poetry)
        venv_path = tmp_path / "venv"
        env_manager.build_venv(venv_path)
        tmp_venv = VirtualEnv(venv_path)
    
>       builder = EditableBuilder(simple_poetry, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:143: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7636a39ad660>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log call -------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_installs_proper_f0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
__________________ test_builder_catches_bad_scripts_no_colon ___________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

bad_scripts_no_colon = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw14/test_builder_catches_bad_scrip0/venv")

    def test_builder_catches_bad_scripts_no_colon(
        bad_scripts_no_colon: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(bad_scripts_no_colon, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:364: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7019cb97db70>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw14/test_builder_catches_bad_scrip0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ test_builder_installs_proper_files_for_standard_packages[simple_project_legacy] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'simple_project_legacy', simple_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_installs_proper_f1')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7636aa2141f0>

    @pytest.mark.parametrize("project", ("simple_project", "simple_project_legacy"))
    def test_builder_installs_proper_files_for_standard_packages(
        project: str,
        simple_poetry: Poetry,
        tmp_path: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        simple_poetry = Factory().create_poetry(fixture_dir(project))
        env_manager = EnvManager(simple_poetry)
        venv_path = tmp_path / "venv"
        env_manager.build_venv(venv_path)
        tmp_venv = VirtualEnv(venv_path)
    
>       builder = EditableBuilder(simple_poetry, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:143: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7636a3812a70>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log call -------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_installs_proper_f1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___ test_builder_falls_back_on_setup_and_pip_for_packages_with_build_scripts ___
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7636aa235540>
extended_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_falls_back_on_set0')

    def test_builder_falls_back_on_setup_and_pip_for_packages_with_build_scripts(
        mocker: MockerFixture, extended_poetry: Poetry, tmp_path: Path
    ) -> None:
        pip_install = mocker.patch("poetry.masonry.builders.editable.pip_install")
        env = MockEnv(path=tmp_path / "foo")
>       builder = EditableBuilder(extended_poetry, env, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:273: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7636a37992a0>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
_______________ test_builder_catches_bad_scripts_too_many_colon ________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

bad_scripts_too_many_colon = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw14/test_builder_catches_bad_scrip1/venv")

    def test_builder_catches_bad_scripts_too_many_colon(
        bad_scripts_too_many_colon: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(bad_scripts_too_many_colon, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:378: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7019cba1a380>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw14/test_builder_catches_bad_scrip1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_________ test_builder_installs_proper_files_when_packages_configured __________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_with_include = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_installs_proper_f2/venv")

    def test_builder_installs_proper_files_when_packages_configured(
        project_with_include: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(project_with_include, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7636a38bdc00>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw13/test_builder_installs_proper_f2/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
=========================== short test summary info ============================
ERROR tests/inspection/test_info.py::test_info_from_sdist - TypeError: unsupp...
ERROR tests/inspection/test_info.py::test_info_setup_complex_calls_script - T...
ERROR tests/mixology/version_solver/test_basic_graph.py::test_circular_dependency
ERROR tests/mixology/version_solver/test_basic_graph.py::test_yanked_release[==2-versions9-yanked_versions9-2]
ERROR tests/inspection/test_lazy_wheel.py::test_metadata_from_wheel_url[negative_offset_error1]
ERROR tests/mixology/version_solver/test_with_lock.py::test_unlocks_dependencies_if_necessary_to_ensure_that_a_new_dependency_is_satisfied
ERROR tests/inspection/test_info.py::test_info_from_poetry_directory - TypeEr...
ERROR tests/mixology/version_solver/test_basic_graph.py::test_yanked_release[>1-versions4-yanked_versions4-error]
ERROR tests/mixology/version_solver/test_backtracking.py::test_backtracking_performance_level_1
ERROR tests/masonry/builders/test_editable_builder.py::test_builder_generates_proper_metadata_when_multiple_readme_files
ERROR tests/json/test_schema.py::test_dependencies_is_consistent_to_poetry_core_schema
ERROR tests/inspection/test_info.py::test_info_no_setup_pkg_info_no_deps_dynamic
ERROR tests/inspection/test_lazy_wheel.py::test_metadata_from_wheel_url_smaller_than_initial_chunk_size[None-1]
ERROR tests/json/test_schema.py::test_pyproject_toml_valid - TypeError: unsup...
ERROR tests/inspection/test_lazy_wheel.py::test_metadata_from_wheel_url_range_requests_not_supported_two_requests[negative_offset_error0]
ERROR tests/mixology/version_solver/test_backtracking.py::test_backjumps_after_partial_satisfier
ERROR tests/mixology/version_solver/test_unsolvable.py::test_no_valid_solution
ERROR tests/mixology/test_incompatibility.py::test_str_dependency_cause[dependency11-dependency21-foo (1.0) depends on bar (^1.0)]
ERROR tests/packages/test_direct_origin.py::test_direct_origin_get_package_from_file
ERROR tests/mixology/version_solver/test_unsolvable.py::test_no_version_matching_constraint
ERROR tests/inspection/test_lazy_wheel.py::test_metadata_from_wheel_url[negative_offset_error6]
ERROR tests/inspection/test_info.py::test_info_from_wheel_metadata_versions[299]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_ignore_irrelevant_markers[False]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_pins_other_installed_packages
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_ignore_irrelevant_markers[True]
ERROR tests/plugins/test_plugin_manager.py::test_project_plugins_are_installed_in_project_folder[False]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_400_errors
ERROR tests/plugins/test_plugin_manager.py::test_project_plugins_are_installed_in_project_folder[True]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_403_errors
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_missing_plugins
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_remove_outdated
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_no_output_if_fresh[False]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_only_missing_plugins
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[304-Not Modified]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_nonstandard_errors
ERROR tests/publishing/test_uploader.py::test_uploader_skip_existing_bubbles_unskippable_errors
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_overwrite_wrong_version_plugins[False]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[303-See Other]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_file_not_existing
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[308-Permanent Redirect]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_no_output_if_fresh[True]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_overwrite_wrong_version_plugins[True]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[302-Found]
ERROR tests/plugins/test_plugin_manager.py::test_add_project_plugin_path - At...
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[307-Temporary Redirect]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[300-Multiple Choices]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[400-File already exists]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_301_redirects
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[301-Moved Permanently]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[400-Repository does not allow updating assets]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_ignore_already_installed_in_system_env
ERROR tests/publishing/test_uploader.py::test_uploader_registers_for_appropriate_400_errors
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[403-Not enough permissions to overwrite artifact]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[409-]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[400-file name has already been taken]
ERROR tests/repositories/test_installed_repository.py::test_system_site_packages[True]
ERROR tests/repositories/test_installed_repository.py::test_pipx_shared_lib_site_packages
ERROR tests/repositories/test_installed_repository.py::test_system_site_packages_source_type
ERROR tests/repositories/test_installed_repository.py::test_system_site_packages[False]
FAILED tests/inspection/test_info.py::test_info_setup_missing_mandatory_should_trigger_pep517[version]
FAILED tests/inspection/test_info.py::test_info_from_sdist_no_pkg_info - Attr...
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_should_execute_build_scripts
FAILED tests/inspection/test_info.py::test_info_setup_simple - AttributeError...
FAILED tests/inspection/test_info.py::test_info_setup_missing_mandatory_should_trigger_pep517[name]
FAILED tests/inspection/test_info.py::test_info_setup_complex - AttributeErro...
FAILED tests/inspection/test_info.py::test_info_setup_complex_pep517_error - ...
FAILED tests/inspection/test_info.py::test_info_setup_complex_pep517_legacy
FAILED tests/publishing/test_publisher.py::test_publish_can_publish_to_given_repository[sample_project]
FAILED tests/publishing/test_publisher.py::test_publish_can_publish_to_given_repository[with_source]
FAILED tests/publishing/test_publisher.py::test_publish_publishes_to_pypi_by_default
FAILED tests/publishing/test_publisher.py::test_publish_raises_error_for_undefined_repository
FAILED tests/publishing/test_publisher.py::test_publish_uses_token_if_it_exists
FAILED tests/publishing/test_publisher.py::test_publish_uses_env_token_if_it_exists
FAILED tests/publishing/test_publisher.py::test_publish_uses_cert - Attribute...
FAILED tests/publishing/test_publisher.py::test_publish_uses_client_cert - At...
FAILED tests/publishing/test_publisher.py::test_publish_read_from_environment_variable
FAILED tests/repositories/test_legacy_repository.py::test_get_package_information_fallback_read_setup
FAILED tests/repositories/test_legacy_repository.py::test_get_package_retrieves_packages_with_no_hashes
FAILED tests/repositories/test_legacy_repository.py::test_package_partial_yank
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_installs_proper_files_for_standard_packages[simple_project]
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_catches_bad_scripts_no_colon
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_installs_proper_files_for_standard_packages[simple_project_legacy]
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_falls_back_on_setup_and_pip_for_packages_with_build_scripts
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_catches_bad_scripts_too_many_colon
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_installs_proper_files_when_packages_configured
26 failed, 376 passed, 59 errors in 7.50s
