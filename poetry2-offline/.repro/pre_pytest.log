bringing up nodes...
bringing up nodes...

EEEEEEEEEE.EEEEEEE..EEEE.E.E..EEEEE.E..EEE.E.E.E.E.....E................ [  2%]
.........E.EEE.EE.E..EEEE.E..EEEE.E.E.EE.EEEE..EEEE..EEE..EEEE..E.EE.EE. [  5%]
.EEEFE.E.E.EEFE...EE.E.E...EEE.E..E....EE.E..EEEEE...E...E..E.EE.E..E..E [  8%]
......EEE.EEEFE.........EEEEEEEE..EE.EEF..E..E.EE.EEE.EEEFEEEE.EFEEEEEE. [ 10%]
EFEEE.EEEEEEEEEFE.EEEEEFEEEEEEFEE.EEE.EEFEE.EEEEEEE.EFEEE.EEEEEEEEFEE.FE [ 13%]
EEEEEEEEEEE.EEE.EEEEEEEEEE.EEEEE.EEEEEE.EE.EEEEEEEEEEEEEEEEEEEFEEEEEEEEE [ 16%]
EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEsEEEEEEEEEEEEEEEEEEEEEEEEEFEEEEEEEEEEEEEE [ 18%]
EEEEEEEEEEEEEEEEEEEEEEEEFEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEFEEEEEEssE [ 21%]
EsEEEEEEEEEEEEEEEEEEEEEEEEEEEEFEEEEEEEEEEEE.EEE.EEFEEEE.EE.EE.EE.EEEEEEE [ 24%]
EE.EEEEEEEEEEEE.EEEEEEEE.E.E.EE..EEE....EEE.F..E..E.EE.E...E.EF...EE.E.E [ 26%]
.EE.E....EEFEE....FEE.E...E.EEE...EEEE.E..EEFE.EEF.EE..E.EE...EEF.F..EE. [ 29%]
.EEEE.FEEE..F...E..EEEF.F.EE..E.EEEEEE.E...EE.EE...EEEFs..E...EE.EE...E. [ 32%]
.EEE....E..E..E.E....FE...E..E...E..E..............E...EE.E..E......E.E. [ 34%]
F..EEE..E.E.E...E.E.E..EE.E...E..EEEE.E.E..EE....E...Es..E....EE.F.EE... [ 37%]
.........F...E...EE.............EEE................E..E..E.............E [ 40%]
....E....E......E.....E....EE...........E....................E.......... [ 43%]
..........................................E............................. [ 45%]
.......................E................................................ [ 48%]
............E........................................................... [ 51%]
.................E.............................E........................ [ 53%]
E..................E..............F.......F............F.......F.F...... [ 56%]
E............FE.EF........EFF...E..F....EF.E......F.E....F......E...F..F [ 59%]
....EEE.......EE......E.E...E.......E.....E...F........E...........EF... [ 61%]
........E.E...........E......E......................E......E............ [ 64%]
..........................F......................F.......E.......E.....E [ 67%]
.........E.......................................................F...... [ 69%]
.......F............................................................E... [ 72%]
...............................E........................................ [ 75%]
...........E......................E...........F...F...F...E.........E... [ 78%]
...........E..........E.....................E..............E............ [ 80%]
.........E............F.E..........F.F.EF.......F..F.FFF........FFF..F.. [ 83%]
.............F........F.......F........E.F....E.EEE..E..E.E..EEE..E.EFEE [ 86%]
.E..F..EEEEFFEEEEEEFEF.EEFEE.FEE.sEFEE.....EE.........E...........FE.... [ 88%]
....EE........E...EEE..E..........E..........E........E.........E....... [ 91%]
.................E..........E............E.........F......E....F........ [ 94%]
........................s........F..E.........................F......... [ 96%]
........................................................................ [ 99%]
............                                                             [100%]
==================================== ERRORS ====================================
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
_________ ERROR collecting tests/console/commands/self/test_install.py _________
tests/console/commands/self/test_install.py:7: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
__________ ERROR collecting tests/console/commands/self/test_sync.py ___________
tests/console/commands/self/test_sync.py:9: in <module>
    from poetry.console.commands.self.sync import SelfSyncCommand
src/poetry/console/commands/self/sync.py:6: in <module>
    from poetry.console.commands.self.install import SelfInstallCommand
src/poetry/console/commands/self/install.py:18: in <module>
    class SelfInstallCommand(SelfCommand, InstallCommand):
src/poetry/console/commands/self/install.py:30: in SelfInstallCommand
    This is managed in the <comment>{SelfCommand.get_default_system_pyproject_file()}</> \
src/poetry/console/commands/self/self_command.py:40: in get_default_system_pyproject_file
    return Path(CONFIG_DIR).joinpath("pyproject.toml")
/usr/local/lib/python3.10/pathlib.py:960: in __new__
    self = cls._from_parts(args)
/usr/local/lib/python3.10/pathlib.py:594: in _from_parts
    drv, root, parts = self._parse_args(args)
/usr/local/lib/python3.10/pathlib.py:578: in _parse_args
    a = os.fspath(a)
E   TypeError: expected str, bytes or os.PathLike object, not NoneType
___ ERROR at setup of test_config_get_default_value[installer.parallel-True] ___
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7113ef3e2440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___________________ ERROR at setup of test_unset_pypi_token ____________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x709fd8866440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
___________ ERROR at setup of test_add_no_constraint_editable_error ____________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x73356bd6a440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_config_get_from_environment_variable[virtualenvs.in-project-POETRY_VIRTUALENVS_IN_PROJECT-0-False] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7ea0b76f6440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True--groups0] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x707637942050>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____ ERROR at setup of test_publish_returns_non_zero_code_for_upload_errors ____
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x76353b5c60e0>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_______________ ERROR at setup of test_build_output_option[None] _______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x771dcd5aa440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
__________________ ERROR at setup of test_add_with_constraint __________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x76e8f4c8e440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_config_migrate_local_config_should_raise_if_not_found _
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x73eacd96e0e0>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
________ ERROR at setup of test_no_additional_output_in_verbose_mode[] _________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x75e71b5820e0>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_config_get_from_environment_variable[virtualenvs.options.no-pip-POETRY_VIRTUALENVS_OPTIONS_NO_PIP-True-True] _
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7d4e2a422440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_______ ERROR at setup of test_add_url_constraint_wheel_with_extras[foo] _______
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x749d33b56440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_check_lock_missing[--lock-Error: poetry.lock was not found.\n-1] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x702bc3cd6440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_____ ERROR at setup of test_sync_option_is_passed_to_the_installer[True] ______
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7bf60afd6050>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____________ ERROR at setup of test_dict_config_source_get_property ____________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x70baa4f3e440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_add_should_work_when_adding_existing_package_with_latest_constraint[False] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7aeff3ace440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_lock_path_dependency_deleted_from_pyproject[deleted_file_dependency-False] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7b9649c5e440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_source_add_existing_no_change_except_case_of_name[lower] _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x7ad247646440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
________ ERROR at setup of test_add_package_with_extras_and_whitespace _________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x73dda7f6a440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_ ERROR at setup of test_invalid_groups_with_without_only[options9-valid_groups9-False] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x74d5950aa440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
_____ ERROR at setup of test_remove_performs_uninstall_op[up_to_date_lock] _____
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x79c035aaa0e0>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
____________________ ERROR at setup of test_install_failure ____________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

http = <module 'httpretty' from '/opt/venv/lib/python3.10/site-packages/httpretty/__init__.py'>
legacy_repository_html_callback = <function legacy_repository_html_callback.<locals>.html_callback at 0x75dec4c6e440>
package_json_locations = [PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json'), PosixPath('/workspace/tests/repositories/fixtures/pypi.org/json/mocked')]
mock_files_python_hosted = None

    @pytest.fixture(autouse=True)
    def pypi_repository(
        http: type[httpretty],
        legacy_repository_html_callback: HTTPrettyRequestCallback,
        package_json_locations: list[Path],
        mock_files_python_hosted: None,
    ) -> PyPiRepository:
        def default_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            return 404, headers, b"Not Found"
    
        def search_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            search_html = FIXTURE_PATH_REPOSITORIES_PYPI.joinpath("search", "search.html")
            return 200, headers, search_html.read_bytes()
    
        def simple_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            if request.headers["Accept"] == "application/vnd.pypi.simple.v1+json":
                return json_callback(request, uri, headers)
            return legacy_repository_html_callback(request, uri, headers)
    
        def _get_json_filepath(name: str, version: str | None = None) -> Path | None:
            for base in package_json_locations:
                if not version:
                    fixture = base / f"{name}.json"
                else:
                    fixture = base / name / f"{version}.json"
    
                if fixture.exists():
                    return fixture
    
            return None
    
        def json_callback(
            request: HTTPrettyRequest, uri: str, headers: dict[str, Any]
        ) -> HTTPrettyResponse:
            path = urlparse(uri).path
            parts = path.rstrip("/").split("/")[2:]
            name = parts[0]
            version = parts[1] if len(parts) == 3 else None
            fixture = _get_json_filepath(name, version)
    
            if fixture is None or not fixture.exists():
                return default_callback(request, uri, headers)
    
            return 200, headers, fixture.read_bytes()
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/search(\?(.*))?$"),
            body=search_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?/json$"),
            body=json_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/pypi/(.*)?(?!/json)$"),
            body=default_callback,
        )
    
        http.register_uri(
            http.GET,
            re.compile(r"https://pypi.org/simple/?(.*)?$"),
            body=simple_callback,
        )
    
>       return PyPiRepository(disable_cache=True, fallback=False)

/workspace/tests/repositories/fixtures/pypi.py:168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/pypi_repository.py:50: in __init__
    super().__init__(
/workspace/src/poetry/repositories/http_repository.py:57: in __init__
    super().__init__(name, disable_cache=disable_cache, config=config)
/workspace/src/poetry/repositories/cached_repository.py:32: in __init__
    self._cache_dir = (config or Config.create()).repository_cache_directory / name
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'poetry.config.config.Config'>, reload = False

    @classmethod
    def create(cls, reload: bool = False) -> Config:
        global _default_config
    
        if _default_config is None or reload:
            _default_config = cls()
    
            # Load global config
>           config_file = TOMLFile(CONFIG_DIR / "config.toml")
E           TypeError: unsupported operand type(s) for /: 'NoneType' and 'str'

/workspace/src/poetry/config/config.py:420: TypeError
__ ERROR at setup of test_publish_returns_non_zero_code_for_connection_errors __
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b419c60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_check_lock_outdated[] _________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0d2db40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_set_pypi_token_unsuccessful_multiple_values ______
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0b65cf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_build_output_option[dist] _______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc5915bd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_add_equal_constraint __________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x733568695b40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_add_url_constraint_wheel_with_extras[FOO] _______
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d2ff95cf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_config_installer_build_config_settings _________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73eacde3dcf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_performs_uninstall_op[up_to_date_lock_non_package] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035d51c60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_chooses_prerelease_if_only_prereleases_are_available _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0b99c60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_sync_option_is_passed_to_the_installer[False] _____
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60a99dbd0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_install_corrupt[False] _________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd585ea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_lock_with_incompatible_lockfile[True] _________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b9642471cf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_source_add_existing_no_change_except_case_of_name[upper] _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243bb5bd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only-root-groups1] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637401b40>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_dry_run_populates_installer ______________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d43dc60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_publish_with_cert ___________________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b1003a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_build_output_option[test/dir] _____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc66b45e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_check_lock_outdated[--lock] ______________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0070430>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_add_greater_constraint _________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fc3a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_build_config_settings_bad_values[BAD=VALUE] _
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73eacdb2c4c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_add_prefers_stable_releases ______________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff04044c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_with_lock_does_not_perform_uninstall_op[up_to_date_lock] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d84c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_compile_option_is_passed_to_the_installer[False] ____
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc4c10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[None-expected_extras0-True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006c550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_set_pypi_token_no_values ________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d304c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_install_corrupt[True] _________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fcaf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_publish_with_client_cert ________________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b5c6290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_check_lock_up_to_date[] ________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc058a320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_build_output_option[../dist] ______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc581e320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_add_constraint_with_extras[msgpack] __________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x733568610a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_source_add_existing_updating[lower] __________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ec5e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_build_config_settings_bad_values[BAD] _
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73eacd96e320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only main-groups2] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637764b80>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_add_with_lock _____________________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aefefed2320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_with_lock_does_not_perform_uninstall_op[up_to_date_lock_non_package] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035aaa3b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[None-expected_extras0-False] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d30164dc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_compile_option_is_passed_to_the_installer[True] ____
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60ade8a60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_dry_run_does_not_build _________________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d514af0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_lock_with_incompatible_lockfile[False] _________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b85e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_check_lock_up_to_date[--lock] _____________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0070af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_publish_dry_run_skip_existing[--dry-run] ________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b100a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_set_client_cert ____________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0cae3b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_install_success ____________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd404a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_add_constraint_with_extras[MsgPack] __________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fca60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_build_config_settings_bad_values[{"key": ["str", 0]}] _
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73eacdb2ca60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_build_output_option[absolute] _____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc66b4b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_run_passes_all_args __________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d8af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_source_add_existing_updating[upper] __________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243f15ea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only foo-groups3] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763c1e4a60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[existing_extras1-expected_extras1-True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006c9d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_publish_dry_run_skip_existing[--skip-existing] _____
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b101750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_check_does_not_error_on_pypi_reference _________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0071870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_add_keyboard_interrupt_restore_content _________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff04049d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_lock_with_invalid_lockfile[True] ____________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b9642b59ea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_command_config_build_config_settings_get ________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73eacdb2d900>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_add_constraint_dependencies ______________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fd6c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_no_directory_is_passed_to_installer[True] _______
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc5240>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_install_logs_output __________________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d975ea0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_run_is_not_eager ____________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d97e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_set_client_cert_unsuccessful_multiple_values ______
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d309d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_publish_dry_run_skip_existing[--dry-run --skip-existing] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b1023b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_install_reinstall ___________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fcd30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[existing_extras1-expected_extras1-False] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006d750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_source_remove_simple[lower] ______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ecb80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_show_config_with_local_config_file_empty ________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc00724d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_add_with_markers ____________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fe320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_add_with_dry_run_keep_files_intact[cachy --dry-run] __
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff003c1f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_no_directory_is_passed_to_installer[False] _______
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc5f30>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_run_passes_args_after_run_before_command ________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358da5f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only foo,bar-groups4] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637765120>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_lock_with_invalid_lockfile[False] ___________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b8b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[existing_extras2-expected_extras2-True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006e440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_set_cert[path/to/ca.pem-path/to/ca.pem] ________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d317e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_add_git_constraint ___________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682feef0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_list_displays_default_value_if_not_set _________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc00731c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_install_passes_options_to_installer[cpython-False] ___
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fdab0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_skip_existing_output __________________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b102f80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_no_all_extras_doesnt_populate_installer ________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc6b90>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_source_remove_simple[upper] ______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ed900>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[-vP run run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358db250>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_install_logs_output_decorated _____________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d515120>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[existing_extras2-expected_extras2-False] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006f130>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only bam-groups5] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637765e10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_add_git_constraint_with_poetry _____________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682ffb50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_list_displays_set_get_setting _____________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0073eb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_set_cert[true-True] __________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d32290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_command_new[options0-package-package-package-None] ___
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b9870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_all_extras_populates_installer _____________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc7880>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[run -vP run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358db2e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[existing_extras3-expected_extras3-True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006fe20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_install_passes_options_to_installer[cpython-True] ___
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fe830>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_set_cert[false-False] _________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d32f80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with bam-groups6] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637766a70>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options1-package-package-src/package-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420ba4d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_noninteractive _____________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73eace01e050>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_source_remove_pypi[pypi] ________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ee4d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________________ ERROR at setup of test_unset_cert _______________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d33ac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_with_dry_run_keep_files_intact[cachy --lock --dry-run] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff003cf70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---without foo,bar-groups7] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637767760>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________________ ERROR at setup of test_cache_list _______________________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d32e680>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_source_remove_pypi[PyPI] ________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ef130>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_install_warning_corrupt_root[module-True] _______
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d515e10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_install_passes_options_to_installer[pypy-False] ____
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46ff5b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_install_warning_corrupt_root[module-False] _______
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d516a70>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_source_remove_pypi_and_other[pypi] ___________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446efe20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options2-namespace-package-namespace-package-namespace/package-None] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420bb130>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_install_warning_corrupt_root[readme-True] _______
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d517760>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_cache_list_empty ____________________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c7d00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_install_passes_options_to_installer[pypy-True] _____
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd1c4310>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options3-namespace-package-namespace-package-src/namespace/package-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420bbe20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_add_git_constraint_with_extras[foo] __________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687dc940>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_should_not_change_lock_file_when_dependency_installation_fail _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aefefed2440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_debug_resolve_gives_resolution_results _________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c5870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_cannot_set_with_multiple_values ____________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc06d0b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_extras_are_parsed_and_populate_installer ________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60b174550>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_debug_resolve_tree_option_gives_the_dependency_tree __
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d32c790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_cannot_set_invalid_value ________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc00720e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_constraint_with_optional[existing_extras3-expected_extras3-False] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dcaf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[-cachy  0.1.0 Cachy package\npytest 3.7.3 Pytest package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3feb010>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_add_git_constraint_with_extras[FOO] __________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fd480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_add_with_path_dependency_no_loopiness _________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff0b995a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_path_dependency(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("with_path_dependency")
    
>       poetry = project_factory(
            name="foobar",
            source=source,
            use_test_locker=False,
        )

/workspace/tests/console/commands/test_add.py:69: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/with_path_dependency')
locker_config = None, use_test_locker = False

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
                poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
            locker.write()
    
            poetry.set_locker(locker)
    
>       poetry.set_config(config)
E       AttributeError: 'NoneType' object has no attribute 'set_config'

/workspace/tests/conftest.py:521: AttributeError
____ ERROR at setup of test_install_ensures_project_plugins[--no-plugins-0] ____
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc68c0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_not_installed_packages_non_decorated[] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f57e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[-vPrun run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0361dcdc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_debug_resolve_git_dependency ______________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d884670>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_constraint_with_optional_not_main_group ______
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006d3f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---without main-groups8] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637ba8430>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_git_constraint_with_subdirectory[git+https://github.com/demo/subdirectories.git#subdirectory=two-None] _
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fe170>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_config_installer_parallel _______________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a4670>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_cannot_unset_with_value ________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc00724d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_install_ensures_project_plugins[-1] __________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc4af0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_add_extras_are_parsed_and_included ___________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003c280>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--format json-expected1] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fea050>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[run -vPrun ] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358dac20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_source_remove_pypi_and_other[PyPI] ___________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad244064af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with foo,bar --without baz --without bim --only bam-groups9] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7076377669e0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_not_installed_packages_non_decorated[--format json] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f5c60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_add_constraint_with_python _______________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006e560>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[true-expected0-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d32f80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_install_warning_corrupt_root[readme-False] _______
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d65c430>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_git_constraint_with_subdirectory[git+https://github.com/demo/subdirectories.git@master#subdirectory=two-master] _
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fd090>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_unset_setting _____________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0071510>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_extras_conflicts_all_extras ______________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc4b80>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_extras_only_accepts_one_package[requests --extras security socks] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003d870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time-cachy    0.1.0 Cachy package\npendulum 2.0.0 Pendulum package\npytest   3.7.3 Pytest package\n0] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe9510>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_show_all_shows_incompatible_package[] _________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f77f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_list_no_versions ____________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd1c5000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_source_remove_error[foo] ________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ede10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---all-groups-groups10] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637765630>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_show_basic_with_not_installed_packages_decorated ____
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f69e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_add_git_ssh_constraint[False] _____________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x733568694550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_add_constraint_with_platform ______________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006d630>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[-v --project=run run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d8d30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options4-namespace-package_a-namespace-package-a-namespace/package_a-None] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e0af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[true-expected0-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d30550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_unset_repo_setting ___________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0071120>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_install_warning_corrupt_root[-True] __________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d5164d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--with foo] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60a99caf0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time --format json-expected3] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe8ee0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________________ ERROR at setup of test_list_all ________________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fee60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_show_all_shows_incompatible_package[--format json] ___
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f5bd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_source_remove_error[pypi] _______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ecc10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_add_git_ssh_constraint[True] ______________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x733568695750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with foo-groups11] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637764b80>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_add_constraint_with_source _______________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d2ff94820>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_show_latest_non_decorated[] ______________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f5bd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[1-expected1-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d309d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_unset_value_not_exists _________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0d2c940>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[-v run --project=run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d8280>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options5-namespace-package_a-namespace-package-a-src/namespace/package_a-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b9510>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--without foo] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60a99d2d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_install_warning_corrupt_root[-False] __________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d514dc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_show_hides_incompatible_package_with_duplicate[] ____
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f5480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---without bam-groups12] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637401c60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_list_invalid_version __________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fd000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--without test-cachy 0.1.0 Cachy package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b46fa320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[-v --directory=run run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035d50790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_add_directory_constraint[False-required_fixtures0] ___
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687dc8b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_display_single_setting[virtualenvs.create-true\n] ___
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0d2ff40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[1-expected1-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0b67ac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_source_remove_error[PyPI] _______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ecaf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_add_constraint_with_source_that_does_not_exist _____
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d2ff95360>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options6-namespace-package-namespace-package-namespace_package-None] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420ba290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_show_latest_non_decorated[--format json] ________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e772a440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_add_with_git_constraint ________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f0310>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_add_with_git_constraint0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_directory_dependency-] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d514a60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_add_directory_constraint[True-required_fixtures0] ___
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687dd870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_passes_args_after_run_before_command_name_conflict[run -v --directory=run] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035d51240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--without test --format json-expected5] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b46fb0a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_hides_incompatible_package_with_duplicate[--format json] _
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f5b40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________________ ERROR at setup of test_list __________________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fcca0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with bam --without bam-groups13] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637401240>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_source_show_simple ___________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243bb4700>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_display_single_setting[repositories.foo.url-{'url': 'https://bar.com/simple/'}\n] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc06d1510>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_add_constraint_not_found_with_source __________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dc790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options7-namespace-package-namespace-package-src/namespace_package-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b91b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_show_latest_decorated _________________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e772b010>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[false-expected2-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0b65480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________________ ERROR at setup of test_check_valid ______________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc5917eb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_publish_dist_dir_option[None] _____________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84e560>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_option_N0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_show_basic_with_group_options[--without main-pytest 3.7.3 Pytest package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b46fbd00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_show_all_shows_all_duplicates[] ____________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b6440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_run_keeps_options_passed_before_command_args_combined_short_opts _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0361dd120>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_list_poetry_managed[False] _______________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fc3a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_does_not_update_locked_dependencies[True-4.3.1-foo] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff003e680>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_directory_dependency---without dev] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d43c700>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options8-package-namespace-package-namespace/package-None] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b9642471000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_to_section_that_does_not_exist_yet[dev] ______
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dd900>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_source_show_one[lower] _________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243bb4a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_check_valid_legacy[args0-0] ______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc5f80790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_show_outdated[] ____________________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e772bbe0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[false-expected2-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a4820>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--without main --format json-expected7] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b40b09d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_run_keeps_options_passed_before_command_args ______
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0361ddea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--with foo,bar --without baz] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60b174ee0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options9-package-namespace-package-src/namespace/package-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96424715a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_does_not_update_locked_dependencies[True-4.3.1-foo --lock] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff003de10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_list_poetry_managed[True] _______________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd587f40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[0-expected3-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a57e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_source_show_one[upper] _________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243bb51b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_show_all_shows_all_duplicates[--format json] ______
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b71c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_show_outdated[--format json] ______________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e7c00820>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--only foo] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60afd6320>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_no_additional_output_in_verbose_mode[-v] ________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71af2dd80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_no_additional_output_in_v0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___________________ ERROR at setup of test_list_version[3-3] ___________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd585240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_file_dependency-] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d43d1b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_add_to_new_group_keeps_existing_group _________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x73356815e3b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options10-package-namespace-package-namespace/package-None] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e05e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_env_activate_prints_correct_script[bash-source-] ____
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d885480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw4/test_env_activate_prints_corre0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
________________ ERROR at setup of test_source_show_two[lower] _________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad244065480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_extras_are_parsed_and_populate_installer ________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4a18670>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_does_not_update_locked_dependencies[False-4.3.2-foo] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff003ee60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________________ ERROR at setup of test_show_tree _______________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b7be0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_list_version[3.9-2] __________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd1c5750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--all-groups] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc4d30>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with foo --without foo-groups14] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637ba8f70>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_display_single_local_setting ______________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc058a200>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_add_to_existing_group[False] ______________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fdb40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options11-package-namespace-package-src/namespace/package-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e17e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_install_ensures_project_plugins[--no-plugins-0] ____
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee09d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_add_with_git_constraint_with_extras __________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f2d40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_add_with_git_constraint_w0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_add_does_not_update_locked_dependencies[False-4.3.2-foo --lock] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7aeff003fb50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry_with_up_to_date_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("up_to_date_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_add.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '# This file is automatically @generated by Poetry 1.5.0.dev0 and should not be changed by hand.\n\n[[package]]\nname ...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "8f975cfcda1d3c938f9e7013b2e24cb2e43e6a2a573f0c6867acad407b0fb0d9"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_add_to_existing_group[True] ______________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fdf30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--with foo] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc52d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False--groups0] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637764430>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_display_empty_repositories_setting ___________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0450790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_install_ensures_project_plugins[-1] __________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee16c0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--only main-cachy 0.1.0 Cachy package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b46faef0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_show_tree_no_dev ____________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e22d20670>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_check_valid_legacy[args1-1] ______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc5f81870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_add_to_section_that_does_not_exist_yet[foo.BAR] ____
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d30402320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_to_group_with_latest_overwrite_existing ______
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fe3b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only-root-groups1] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637764550>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--without foo] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc7d90>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--only main --format json-expected9] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b46fa0e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_unset_nonempty_repositories_section[repositories-You cannot remove the [repositories] section] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0070310>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_check_invalid_dep_name_same_as_project_name ______
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc6fd95a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_with_git_constraint_with_subdirectory[git+https://github.com/demo/poetry-plugin2.git#subdirectory=subdir-None] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed116e60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_add_with_git_constraint_w1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
______________ ERROR at setup of test_extras_conflicts_all_extras ______________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4581f30>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_creating_poetry_section_does_not_remove_existing_tools _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006c280>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_run_keeps_options_passed_before_command ________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c03d0fcaf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_add_multiple_dependencies_to_dependency_group _____
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fe560>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_unset_nonempty_repositories_section[repositories.test-There is no test repository defined] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0073f40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time --without test-cachy    0.1.0 Cachy package\npendulum 2.0.0 Pendulum package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe97e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only main-groups2] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7076377660e0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_check_invalid _____________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc66b4ca0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--with foo] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4581ea0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--with foo,bar --without baz] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60b174ca0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_add_to_dev_group ____________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006c550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_publish_dist_dir_option[dist] _____________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b8fff40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_option_d0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_________________ ERROR at setup of test_list_version[3.9.2-0] _________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd404af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_with_git_constraint_with_subdirectory[git+https://github.com/demo/poetry-plugin2.git@master#subdirectory=subdir-master] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f30a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_add_with_git_constraint_w2/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
________ ERROR at setup of test_add_to_group_uses_existing_legacy_group ________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687dd750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only foo-groups3] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637766dd0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[0-expected3-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd18941f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_source_show_two[upper] _________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad24450c1f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_check_private _____________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc66b6cb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--without foo] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4583400>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time --without test --format json-expected11] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe8790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_set_malformed_repositories_setting ___________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc00737f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_run_has_helpful_error_when_command_not_found ______
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d9e10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_show_outdated_with_only_up_to_date_packages[] _____
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e772af80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_file_dependency---without dev] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d65d000>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_creates_dependencies_array_if_necessary ______
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003caf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_add_should_not_select_prereleases ___________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006f5b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options12-namespace_package-namespace-package-namespace_package-None] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96429441f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_list_version[3.9.3-1] _________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46ff010>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only foo,bar-groups4] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637ba8d30>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_group_directory_constraint_mix_pep735[required_fixtures0] _
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687dc940>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_display_undefined_setting[repositories.foo-There is no foo repository defined] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc06d1990>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[pytest-expected4-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0cae5f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_env_activate_prints_correct_script[zsh-source-] ____
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d886680>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw4/test_env_activate_prints_corre1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
______ ERROR at setup of test_source_show_given_priority[source_primary] _______
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243f163b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_check_non_package_mode _________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc66b69e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time --without main,test-pendulum 2.0.0 Pendulum package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3feb880>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_install_extra_path_dependency_does_not_exist[] _____
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d514820>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_command_new[options13-namespace_package-namespace-package-src/namespace_package-src] _
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b9642473ac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_list_implementation[PyPy-1] ______________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fc9d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_add_existing_plugin_warns_about_no_operation ______
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f3d00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_add_existing_plugin_warns0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_add_should_skip_when_adding_existing_package_with_no_constraint[True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006e9e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_does_not_add_poetry_dependencies_if_not_necessary[True] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003f400>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_publish_dist_dir_option[other_dist/dist] ________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b101900>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_option_o0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_display_undefined_setting[foo-There is no foo setting.] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc06d0b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_check_lock_missing[-All set!\n-0] ___________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x771dc5a74f70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[pytest-expected4-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d316c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time --without main,test --format json-expected13] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3feac20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_no_additional_output_in_verbose_mode[-vv] _______
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b152cb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_no_additional_output_in_v1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_add_should_skip_when_adding_existing_package_with_no_constraint[False] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dce50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_command_new_with_readme[None] _____________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b92d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_run_script_exit_code __________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c0358db760>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry_with_scripts(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("scripts")
    
>       return project_factory(
            name="scripts",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            source=source,
        )

/workspace/tests/console/commands/test_run.py:42: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'scripts', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "scripts"\nversion = "0.1.0"\ndescription = ""\nauthors = ["Your Name <you@example.com>"]\nread... "scripts.return_code:main"\n\n[build-system]\nrequires = ["poetry-core"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/scripts'), locker_config = None
use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_does_not_add_poetry_dependencies_if_not_necessary[False] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003f910>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_list_implementation[pypy-1] ______________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fdd80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_source_show_given_priority[source_supplemental] ____
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ed630>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_with_only_up_to_date_packages[--format json] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e772a200>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--only time-pendulum 2.0.0 Pendulum package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b40b0280>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[PyTest-expected5-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d30ca0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with foo --without foo-groups14] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5a77640>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_env_activate_prints_correct_script[fish-source-.fish] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c55a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw4/test_env_activate_prints_corre2/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_install_extra_path_dependency_does_not_exist[--extras notinstallable] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d514940>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_command_new_with_readme[md] ______________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420bb2e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_should_skip_when_adding_canonicalized_existing_package_with_no_constraint[True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dc310>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_poetry_dependencies_if_necessary[True] _______
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003d2d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_list_implementation[CPython-2] _____________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fe050>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_command_new_with_readme[rst] ______________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b9f30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_source_show_given_priority[source_explicit] ______
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446efd00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_show_tree_why_package _________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b6ef0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--only foo] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60b175ea0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_env_activate_prints_correct_script[nu-overlay use-.nu] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c6950>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw4/test_env_activate_prints_corre3/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
________________ ERROR at setup of test_remove_invalid_version _________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd1c4b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--with foo,bar --without baz] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda42a9ea0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only bam-groups5] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637ba9d80>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_run_script_sys_argv0[not installed] __________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c0358da440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry_with_scripts(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("scripts")
    
>       return project_factory(
            name="scripts",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            source=source,
        )

/workspace/tests/console/commands/test_run.py:42: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'scripts', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "scripts"\nversion = "0.1.0"\ndescription = ""\nauthors = ["Your Name <you@example.com>"]\nread... "scripts.return_code:main"\n\n[build-system]\nrequires = ["poetry-core"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/scripts'), locker_config = None
use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_missing_directory_dependency_with_no_directory[] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d5163b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_publish_dist_dir_option[absolute] ___________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b101a20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_option_a0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_____ ERROR at setup of test_add_directory_with_poetry[required_fixtures0] _____
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687de710>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_poetry_dependencies_if_necessary[False] ______
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0b98d30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_show_outdated_has_prerelease_but_not_allowed[] _____
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f6170>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_command_new_with_readme[adoc] _____________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e0e50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_no_additional_output_in_verbose_mode[-vvv] _______
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b582320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_no_additional_output_in_v2/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_config_installer_binary_filter_config[PyTest-expected5-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d33520>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_add_existing_plugin_updates_if_requested ________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed5c4ca0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_add_existing_plugin_updat0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_invalid_groups_with_without_only[options0-valid_groups0-False] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc52d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_remove_version_not_precise_enough ___________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd1c5ea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--only foo] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee3ac0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with bam-groups6] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7076377679a0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_list_displays_set_get_local_setting __________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc06d2710>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_add_file_constraint_wheel[required_fixtures0] _____
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335682fd3f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_build_format_is_not_valid _______________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0b995a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_command_new_with_readme[creole] ____________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e01f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_source_show_pypi ____________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ee3b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_run_script_sys_argv0[installed] ____________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c0361dc790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry_with_scripts(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("scripts")
    
>       return project_factory(
            name="scripts",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            source=source,
        )

/workspace/tests/console/commands/test_run.py:42: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'scripts', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "scripts"\nversion = "0.1.0"\ndescription = ""\nauthors = ["Your Name <you@example.com>"]\nread... "scripts.return_code:main"\n\n[build-system]\nrequires = ["poetry-core"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/scripts'), locker_config = None
use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_missing_directory_dependency_with_no_directory[--no-directory] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d5179a0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options1-valid_groups1-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc4c10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_has_prerelease_but_not_allowed[--format json] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f6b00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_env_activate_prints_correct_script[csh-source-.csh] __
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d32d5a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw4/test_env_activate_prints_corre4/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_show_basic_with_group_options[--only time --format json-expected15] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b40b1870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---without foo,bar-groups7] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637766a70>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_add_file_constraint_sdist[required_fixtures0] _____
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335686945e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_list_must_not_display_sources_from_pyproject_toml ___
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0589ea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_env_info_displays_complete_info ____________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71bee0a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_show_tree_why _____________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b71c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_build_creates_packages_in_dist_directory_if_no_output_is_specified[sdist] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff04943a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False--groups0] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5f80820>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________________ ERROR at setup of test_search _________________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0361ddc60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_show_outdated_has_prerelease_and_allowed[] _______
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f6710>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_should_skip_when_adding_canonicalized_existing_package_with_no_constraint[False] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305de4d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options2-valid_groups2-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc4670>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--only time --with test-pendulum 2.0.0 Pendulum package\n] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b46fb520>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---without main-groups8] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637764550>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_set_http_basic _____________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0073eb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_constraint_with_extras_option[msgpack] _______
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x733568694a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[pytest,black-expected6-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a4040>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_source_show_pypi_and_other _______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad244064430>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_non_package_mode_does_not_try_to_install_root _____
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58d65cdc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only-root-groups1] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5a76950>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_search_empty_results __________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0361dc550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--only time --with test --format json-expected17] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe8e50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_only_root_conflicts_with_without_only_all_groups[--all-groups] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee3c70>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_env_info_displays_path_only ______________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b152320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options3-valid_groups3-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc5cf0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_has_prerelease_and_allowed[--format json] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f7760>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_adding_a_plugin_can_update_poetry_dependencies_if_needed _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed5c5c60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_adding_a_plugin_can_updat0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
__________ ERROR at setup of test_add_should_fail_circular_dependency __________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006eb90>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_publish_dist_dir_and_build_options[../dist] ______
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b1001f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_and_buil0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___________________ ERROR at setup of test_unset_http_basic ____________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0073130>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_add_constraint_with_extras_option[MsgPack] _______
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x733568694af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_env_activate_prints_correct_script[tcsh-source-.csh] __
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d32feb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw4/test_env_activate_prints_corre5/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only main-groups2] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5a76830>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________________ ERROR at setup of test_show_why[] _______________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f5750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with foo,bar --without baz --without bim --only bam-groups9] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637766560>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time-cachy    0.1.0 Cachy package\npendulum 2.0.0 Pendulum package\npytest   3.7.3 Pytest package\n1] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fea050>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options4-valid_groups4-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60b1763b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[pytest,black-expected6-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a4550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_source_show_no_sources _________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad244064550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_remove_version_no_installation _____________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd1c52d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_set_http_basic_unsuccessful_multiple_values ______
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc0070c10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only foo-groups3] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b6c20>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_add_latest_should_strip_out_invalid_pep508_path ____
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006d630>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_add_url_constraint_wheel ________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7335687de3b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_respect_use_poetry_python_on_new[False-1.1] ______
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e2710>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_show_top_level_with_explicitly_defined_dependency[] __
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d32c4c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_group_options[--with time --format json-expected19] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fea9e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---all-groups-groups10] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637baa440>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_show_outdated_formatting[] _______________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e7c00430>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_lock_does_not_update_if_not_necessary _________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d65de10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_add_latest_should_not_create_duplicate_keys[True] ___
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006e710>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_remove_version _____________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debcfbe290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_set_pypi_token _____________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x702bc06d1480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_env_info_displays_executable_only ___________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b1531c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_update_prints_operations[-True] ____________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7335687df370>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry_with_outdated_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("outdated_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_update.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '[[package]]\nname = "certifi"\nversion = "2020.6.20"\ndescription = "Python package for providing Mozilla\'s CA Bundl...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "2f47de5e052dabeff3c1362d3a37b5cfcaf9bbe9d9ce1681207e72ca1f4dab55"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_build_creates_packages_in_dist_directory_if_no_output_is_specified[wheel] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0495120>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_top_level_with_explicitly_defined_dependency[--format json] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d8848b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_show_basic_with_installed_packages_single[] ______
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe9000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only foo,bar-groups4] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b5990>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_respect_use_poetry_python_on_new[True-3.10] ______
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420bbac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--with foo] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4581bd0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_remove_version_implementation[cpython] _________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fef80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_add_latest_should_not_create_duplicate_keys[False] ___
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006c0d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_update_prints_operations[--dry-run-True] ________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7335687dd750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry_with_outdated_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("outdated_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_update.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '[[package]]\nname = "certifi"\nversion = "2020.6.20"\ndescription = "Python package for providing Mozilla\'s CA Bundl...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "2f47de5e052dabeff3c1362d3a37b5cfcaf9bbe9d9ce1681207e72ca1f4dab55"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_build_creates_packages_in_dist_directory_if_no_output_is_specified[all] _
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0404820>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_dry_run_populates_installer ______________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d2ef0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_installed_packages_single[--format json] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b40b1e10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_show_top_level_with_extras[] ______________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d9a8430>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---only bam-groups5] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b43a0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_show_why[--format json] ________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f5480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_basic_interactive_new _________________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420bb6d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_remove_version_implementation[pypy] __________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fd2d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_add_should_work_when_adding_existing_package_with_latest_constraint[True] _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305de290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_none_activated _____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b1523b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_build_with_local_version_label _____________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff04048b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_remove_installed_package ________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed5c6d40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_remove_installed_package0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___ ERROR at setup of test_new_creates_structure_in_empty_existing_directory ___
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b8310>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_show_required_by_deps[] ________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f7d90>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_show_outdated_formatting[--format json] ________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e7c01990>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_remove_multiple_versions ________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75dec46fe170>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_publish_dist_dir_and_build_options[tmp/dist] ______
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b418820>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_and_buil1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_invalid_groups_with_without_only[options5-valid_groups5-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60b176cb0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________________ ERROR at setup of test_activated _______________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64ca60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--without foo] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4582170>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_build_with_clean[True] _________________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003f760>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_new_with_dot_in_empty_directory ____________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96420b8a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_local_dependencies[-project_with_local_dependencies-required_fixtures0] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'project_with_local_dependencies'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f43a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/project_with_local_dependencies')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_show_required_by_deps[--format json] __________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f6ef0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with foo-groups11] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637baad40>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options6-valid_groups6-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc5cf0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_publish_not_possible_in_non_package_mode ________
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7b96425e0310>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7b9642b59fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_in_project_venv ____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64d630>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_build_with_clean[False] ________________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003eef0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_local_dependencies[--format json-project_with_local_dependencies-required_fixtures0] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'project_with_local_dependencies'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f6b90>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/project_with_local_dependencies')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_source_show_no_sources_implicit_pypi __________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2440664d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--with foo,bar --without baz] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda42a9240>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---without bam-groups12] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637767640>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_show_entire_description_truncate[False] ________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e22d208b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options7-valid_groups7-True] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc5bd0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_installed_packages_single_canonicalized[] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b40b2a70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_lock_always_updates_path_dependencies[True] ______
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d514790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_dry_run_does_not_build _________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d0e50>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_update_prints_operations[--lock-False] _________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x733568694af0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry_with_outdated_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("outdated_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_update.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '[[package]]\nname = "certifi"\nversion = "2020.6.20"\ndescription = "Python package for providing Mozilla\'s CA Bundl...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "2f47de5e052dabeff3c1362d3a37b5cfcaf9bbe9d9ce1681207e72ca1f4dab55"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_git_dev_dependency[-project_with_git_dev_dependency] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'project_with_git_dev_dependency'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f5750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/project_with_git_dev_dependency')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_build_with_clean_non_existing_output __________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff003c820>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_search_with_legacy_repository _____________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0361df130>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with bam --without bam-groups13] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637767520>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_show_top_level_with_extras[--format json] _______
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d9a92d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_basic_with_installed_packages_single_canonicalized[--format json] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ea0b3fe91b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_add_no_constraint ___________________
[gw3] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75debd655ab0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75debcfbdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw3/test_add_no_constraint0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with bam-groups6] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5f81990>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_lock_always_updates_path_dependencies[False] ______
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d5149d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[-expected7-installer.no-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a65f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_install_logs_output __________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0071b40>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options8-valid_groups8-False] _
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7bf60abc68c0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_publish_dist_dir_and_build_options[absolute] ______
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b418c10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw15/test_publish_dist_dir_and_buil2/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___________________ ERROR at setup of test_source_show_error ___________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad243f15ea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_git_dev_dependency[--format json-project_with_git_dev_dependency] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'project_with_git_dev_dependency'
project_factory = <function project_factory.<locals>._factory at 0x7113e772bac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/project_with_git_dev_dependency')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_update_sync_option_is_passed_to_the_installer _____
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7335682fe320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry_with_outdated_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("outdated_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_update.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '[[package]]\nname = "certifi"\nversion = "2020.6.20"\ndescription = "Python package for providing Mozilla\'s CA Bundl...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "2f47de5e052dabeff3c1362d3a37b5cfcaf9bbe9d9ce1681207e72ca1f4dab55"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with foo --without foo-groups14] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637765630>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_build_not_possible_in_non_package_mode _________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0494ee0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_search_only_legacy_repository _____________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035aaa170>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---without foo,bar-groups7] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc581e440>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_does_not_exist[missing_directory_dependency-True] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d515630>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_install_logs_output_decorated _____________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0073eb0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_remove_from_project_and_poetry _____________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84e290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_no_dev_git_dev_dependency[-project_with_git_dev_dependency] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'project_with_git_dev_dependency'
project_factory = <function project_factory.<locals>._factory at 0x7113e772b1c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/project_with_git_dev_dependency')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_installer_binary_filter_config[-expected7-installer.only-binary] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d30e50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_show_error_top_level_with_tree _____________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d532320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_does_not_exist[missing_directory_dependency-False] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d514160>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_add_no_constraint ___________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ee440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---without main-groups8] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5917eb0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_install_warning_corrupt_root[module-True] _______
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0d2d360>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_no_dev_git_dev_dependency[--format json-project_with_git_dev_dependency] _
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'project_with_git_dev_dependency'
project_factory = <function project_factory.<locals>._factory at 0x7113e7c01b40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/project_with_git_dev_dependency')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_search_multiple_queries ________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d9480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_does_not_exist[missing_file_dependency-True] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d65dea0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_show_entire_description_truncate[True] _________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e22d21480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_config_solver_lazy_wheel ________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d30f70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with foo,bar --without baz --without bim --only bam-groups9] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5a763b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_install_warning_corrupt_root[module-False] _______
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d0ee0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_in_project_venv_no_explicit_config ___________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64e440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_add_local_version ___________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ef880>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_show_basic_with_installed_packages[] __________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358db130>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_show_error_top_level_with_single_package ________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c7eb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_does_not_exist[missing_file_dependency-False] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d65cb80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_show_errors_without_lock_file _____________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f5b40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---all-groups-groups10] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5a771c0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_migrate[yes-system-git-client = true\n\n[virtualenvs]\nuse-poetry-python = true\n] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d33ac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_install_warning_corrupt_root[readme-True] _______
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d1c60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_remove_installed_package_dry_run ____________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ee6b15a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_remove_installed_package_0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_______________ ERROR at setup of test_in_project_venv_is_false ________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71af2d3f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_deleted_from_pyproject[deleted_directory_dependency-True] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d65c0d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_add_non_package_mode_no_name ______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad2446ed360>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_show_basic_with_installed_packages[--format json] ___
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0358d9240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_version_show ______________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006d900>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_outdated_missing_directory_dependency[deleted_directory_dependency-required_fixtures0] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'deleted_directory_dependency'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c5870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/deleted_directory_dependency')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with foo-groups11] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5f81ab0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_config_migrate[no-[experimental]\nsystem-git-client = true\n\n[virtualenvs]\nprefer-active-python = false\n] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd0d316c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_remove_by_python_version ________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71af2d240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_show_dependency_installed_from_git_in_dev[] ______
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e226f7a30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_remove_from_pep735_group_and_poetry_group _______
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84f490>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_version_show_with_underscore ______________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006eb00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_all_groups_conflicts_with_only_with_without[--only foo] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda42ab010>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_add_replace_by_constraint _______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7ad244065000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_config_migrate_local_config ______________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x709fd12a6440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_remove_by_name _____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b153eb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_show_error_invalid_output_format ____________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c7c70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_without_specific_group_removes_from_all_groups[True] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b4192d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_short_version_show ___________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dee60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_show_hides_incompatible_package[] ___________
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e7c02b00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_remove_all[None] ____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b1524d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options0-valid_groups0-False] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee37f0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_dependency_installed_from_git_in_dev[--format json] _
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b7640>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_build_with_multiple_readme_files ____________
[gw8] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7aeff0733a30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7aefefed1fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw8/test_build_with_multiple_readm0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
____ ERROR at setup of test_show_hides_incompatible_package[--format json] _____
[gw0] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7113e78f5480>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7113e78f7b50>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_without_specific_group_removes_from_all_groups[False] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b101cf0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_show_error_invalid_output_format_with_tree_option ___
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x70ba9d884940>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_install_warning_corrupt_root[readme-False] _______
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d1f30>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_version_update _____________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dea70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_remove_all[empty] ___________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64d240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_deleted_from_pyproject[deleted_directory_dependency-False] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d65e170>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_with_specific_group_removes_from_specific_groups[True] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b1009d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_short_version_update __________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305dd870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True--groups0] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d8852d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_install_warning_corrupt_root[-True] __________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0070c10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---without bam-groups12] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5f804c0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_url_dependency_is_not_outdated_by_repository_package[] _
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b5fc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options1-valid_groups1-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee0b80>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_remove_all[self] ____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64eb90>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens0-result0] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c03603be20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_lock_path_dependency_deleted_from_pyproject[deleted_file_dependency-True] _
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x74d58d517760>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_phase_version_update __________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d305df5b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_with_specific_group_removes_from_specific_groups[False] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b100670>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_install_warning_corrupt_root[-False] __________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0d2d3f0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with bam --without bam-groups13] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc59151b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_url_dependency_is_not_outdated_by_repository_package[--format json] _
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e229b76d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_remove_does_not_keep_empty_groups[True] ________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b103d90>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options2-valid_groups2-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4583b50>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_directory_dependency-] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0d2f9a0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[False---with foo --without foo-groups14] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5914a60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_remove_does_not_keep_empty_groups[False] ________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84f400>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_directory_dependency---without dev] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d0430>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_compile_option_is_passed_to_the_installer[False] ____
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b53f0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_canonicalized_named_removes_dependency_correctly[True] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84e9e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_show_top_level[] ____________________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e22d21990>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_compile_option_is_passed_to_the_installer[True] ____
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b5c60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_file_dependency-] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d2c20>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_remove_all[other] ___________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64f760>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options3-valid_groups3-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda45831c0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only-root-groups1] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d9aa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_no_directory_is_passed_to_installer[True] _______
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5f81e10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options4-valid_groups4-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda42aad40>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_remove_all[self_and_other] _______________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b152440>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens1-result1] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c0360a8b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________________ ERROR at setup of test_dry_run ________________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x749d3006eb00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_remove_all_and_version _________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b153910>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens2-result2] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035fa0940>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only main-groups2] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d531f30>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_remove_multiple ____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71af2c790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_canonicalized_named_removes_dependency_correctly[False] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b8788b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only foo-groups3] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c4310>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens3-result3] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035fa31c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_path_dependency_does_not_exist[missing_file_dependency---without dev] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc08541f0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_remove_in_project ___________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64cc10>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_remove_package_does_not_exist _____________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b102290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only foo,bar-groups4] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c7010>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens4-result4] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035fa2680>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_install_extra_path_dependency_does_not_exist[] _____
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d3760>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_show_top_level[--format json] _____________
[gw1] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x7d4e22d225f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7d4e235f5f30>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_remove_in_project_all _________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64d360>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options5-valid_groups5-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda42a95a0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_remove_package_no_dependencies _____________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b1024d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---only bam-groups5] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d32cee0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens5-result5] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035d505e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_extra_path_dependency_does_not_exist[--extras notinstallable] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d09d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_activate_activates_non_existing_virtualenv_no_envs_file _
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64c1f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options6-valid_groups6-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee1090>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_command_should_not_write_changes_upon_installer_errors _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84f2e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_application_input_configuration_and_sorting[tokens6-result6] _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x79c035d50a60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________________ ERROR at setup of test_show_format[] _____________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f2050>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_format__0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_get_prefers_explicitly_activated_virtualenvs_over_env_var _
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64d240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with bam-groups6] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d32d090>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_missing_directory_dependency_with_no_directory[] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0072b00>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options7-valid_groups7-True] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee0af0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_with_dry_run_keep_files_intact[up_to_date_lock] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84f0a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_no_directory_is_passed_to_installer[False] _______
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5f823b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_install_missing_directory_dependency_with_no_directory[--no-directory] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0071e10>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options8-valid_groups8-False] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda4ee08b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_with_dry_run_keep_files_intact[up_to_date_lock_non_package] _
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76353b84e200>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_no_all_extras_doesnt_populate_installer ________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b5c60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_non_package_mode_does_not_try_to_install_root _____
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc00709d0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_invalid_groups_with_without_only[options9-valid_groups9-False] _
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x73dda42aa170>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_show_format[--format json] _______________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f2950>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_format___format_json0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---without foo,bar-groups7] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d9aa710>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_get_prefers_explicitly_activated_non_existing_virtualenvs_over_env_var _
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64cca0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________ ERROR at setup of test_all_extras_populates_installer _____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b4a60>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_show_format[--format text] _______________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed5c57e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_format___format_text0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---without main-groups8] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d532170>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_install_invalid_version ________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b152830>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with foo,bar --without baz --without bim --only bam-groups9] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c7be0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_install_free_threaded_not_supported __________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71af2d6c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_sync_option_not_available _______________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0854ca0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---all-groups-groups10] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c6dd0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_install_exists _____________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64eb90>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________________ ERROR at setup of test_synced_installer ____________________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc0072b90>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with foo-groups11] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d3c7ac0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________________ ERROR at setup of test_install_no_download __________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x75e71b64f640>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_update_with_dry_run_keep_files_intact[--dry-run] ____
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc00732e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry_with_outdated_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("outdated_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_update.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '[[package]]\nname = "certifi"\nversion = "2020.6.20"\ndescription = "Python package for providing Mozilla\'s CA Bundl...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "2f47de5e052dabeff3c1362d3a37b5cfcaf9bbe9d9ce1681207e72ca1f4dab55"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_displays_installed_plugins[entry_point_values_by_group0-poetry-plugin] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed5c4550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_displays_installed_p0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---without bam-groups12] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d9aa9e0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_update_with_dry_run_keep_files_intact[docker --dry-run] _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bc06d1ab0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry_with_outdated_lockfile(
        project_factory: ProjectFactory, fixture_dir: FixtureDirGetter
    ) -> Poetry:
        source = fixture_dir("outdated_lock")
    
>       return project_factory(
            name="foobar",
            pyproject_content=(source / "pyproject.toml").read_text(encoding="utf-8"),
            poetry_lock_content=(source / "poetry.lock").read_text(encoding="utf-8"),
        )

/workspace/tests/console/commands/test_update.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'foobar', dependencies = {}, dev_dependencies = {}
pyproject_content = '[project]\nname = "foobar"\nversion = "0.1.0"\nrequires-python = ">=3.8,<4.0"\ndependencies = [\n    "docker>=4.3.1",\n]\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\nbuild-backend = "poetry.core.masonry.api"\n'
poetry_lock_content = '[[package]]\nname = "certifi"\nversion = "2020.6.20"\ndescription = "Python package for providing Mozilla\'s CA Bundl...= "2.0"\npython-versions = "^3.8"\ncontent-hash = "2f47de5e052dabeff3c1362d3a37b5cfcaf9bbe9d9ce1681207e72ca1f4dab55"\n'
install_deps = True, source = None, locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_group_options_are_passed_to_the_installer[True---with bam --without bam-groups13] _
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9d9ab490>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory) -> Poetry:
>       return project_factory(name="export", pyproject_content=PYPROJECT_CONTENT)

/workspace/tests/console/commands/test_install.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'export', dependencies = {}, dev_dependencies = {}
pyproject_content = '[tool.poetry]\nname = "simple-project"\nversion = "1.2.3"\ndescription = "Some description."\nauthors = [\n    "Pytho...l.poetry.group.bam.dependencies]\nbam = "^1.4"\n\n[tool.poetry.extras]\nextras_a = [ "fizz" ]\nextras_b = [ "buzz" ]\n'
poetry_lock_content = None, install_deps = True, source = None
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_show_displays_installed_plugins[entry_point_values_by_group0-not-package-name] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed5c7a30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_displays_installed_p1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_show_displays_installed_plugins_with_multiple_plugins[entry_point_values_by_group0] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f2d40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_displays_installed_p2/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_show_displays_installed_plugins_with_dependencies[entry_point_values_by_group0-plugin_package_requires_dist0] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ece6f9a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_show_displays_installed_p3/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ ERROR at setup of test_self_update_can_update_from_recommended_installation __
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed76c160>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw6/test_self_update_can_update_fr0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___________________ ERROR at setup of test_source_add_simple ___________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed76ce50>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_source_add_simple_without_existing_sources _______
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed76dbd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_uploader_properly_handles_nonstandard_errors ______
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637dcdea0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637b6ff70>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[308-Permanent Redirect] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637b085e0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637b51bd0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[307-Temporary Redirect] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637b500a0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7076377633a0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[304-Not Modified] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637602560>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637b08f10>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
__ ERROR at setup of test_uploader_properly_handles_redirects[303-See Other] ___
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637629300>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637dfc910>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
____ ERROR at setup of test_uploader_properly_handles_redirects[302-Found] _____
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x70763762b430>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637663190>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________________ ERROR at setup of test_source_add_supplemental ________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ece6f9a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[301-Moved Permanently] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637b51f60>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637b62200>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_properly_handles_redirects[300-Multiple Choices] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7076377be1a0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637c54fd0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________ ERROR at setup of test_uploader_properly_handles_301_redirects ________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7076376137c0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637bdad40>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
__________________ ERROR at setup of test_source_add_explicit __________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed0f2e60>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_uploader_properly_handles_400_errors __________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ad2442c7280>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad2446dc8b0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_________ ERROR at setup of test_uploader_properly_handles_403_errors __________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ad24308b4f0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad243b09480>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_____ ERROR at setup of test_uploader_registers_for_appropriate_400_errors _____
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637626cb0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x70763635e050>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_____________ ERROR at setup of test_uploader_skips_existing[409-] _____________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x70763c1970d0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637645870>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
________________ ERROR at setup of test_add_project_plugin_path ________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x749d306060e0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw10/test_add_project_plugin_path0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
________________ ERROR at setup of test_source_add_error_no_url ________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8edbc8ee0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_uploader_skips_existing[400-File already exists] ____
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x70763c197f10>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x70763c258e50>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_skips_existing[400-Repository does not allow updating assets] _
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x707637624d60>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x707637745900>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_________________ ERROR at setup of test_source_add_error_pypi _________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8edbc9bd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_source_add_pypi[pypi] _________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8edbc8790>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_ensure_plugins_no_output_if_fresh[False] ________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x749d304e5570>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw10/test_ensure_plugins_no_output_0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_________________ ERROR at setup of test_source_add_pypi[PyPI] _________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed76dd80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_ensure_plugins_no_output_if_fresh[True] ________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x749d30071360>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw10/test_ensure_plugins_no_output_1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_______________ ERROR at setup of test_source_add_pypi_explicit ________________
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_directory = 'simple_project'
project_factory = <function project_factory.<locals>._factory at 0x76e8ed76c160>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(
        project_directory: str,
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
    ) -> Poetry:
>       return project_factory(name="simple", source=fixture_dir(project_directory))

/workspace/tests/console/conftest.py:94: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_ensure_plugins_ignore_irrelevant_markers[False] ____
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x749d3058c1c0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw10/test_ensure_plugins_ignore_irr0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
____ ERROR at setup of test_ensure_plugins_ignore_irrelevant_markers[True] _____
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x749d30073880>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw10/test_ensure_plugins_ignore_irr1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_uploader_skips_existing[403-Not enough permissions to overwrite artifact] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ea0b42f5810>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ea0b42fc190>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
_ ERROR at setup of test_uploader_skips_existing[400-file name has already been taken] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ea0b388ddb0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ea0b3b83490>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
___ ERROR at setup of test_uploader_skip_existing_bubbles_unskippable_errors ___
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ea0b416cd60>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ea0b3b81180>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
______ ERROR at setup of test_uploader_properly_handles_file_not_existing ______
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.fixture
    def uploader(fixture_dir: FixtureDirGetter) -> Uploader:
>       return Uploader(Factory().create_poetry(fixture_dir("simple_project")), NullIO())

/workspace/tests/publishing/test_uploader.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.uploader.Uploader object at 0x7ea0b3b9e830>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ea0b42f9030>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/uploader.py:34: AttributeError
____________ ERROR at setup of test_ensure_plugins_remove_outdated _____________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd0ceb880>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_remove_out0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_ensure_plugins_ignore_already_installed_in_system_env _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd0d20820>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_ignore_alr0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
______________ ERROR at setup of test_system_site_packages[True] _______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5914550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
installed_results = [<importlib.metadata.PathDistribution object at 0x771dc66cb010>, <importlib.metadata.PathDistribution object at 0x771d...tadata.PathDistribution object at 0x771dc5a0a7d0>, <importlib.metadata.PathDistribution object at 0x771dc5a085b0>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_system_site_packages_source_type ____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5788ca0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
installed_results = [<importlib.metadata.PathDistribution object at 0x771dc66cb010>, <importlib.metadata.PathDistribution object at 0x771d...tadata.PathDistribution object at 0x771dc5a0a7d0>, <importlib.metadata.PathDistribution object at 0x771dc5a085b0>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_pipx_shared_lib_site_packages _____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc66b56c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
installed_results = [<importlib.metadata.PathDistribution object at 0x771dc66cb010>, <importlib.metadata.PathDistribution object at 0x771d...tadata.PathDistribution object at 0x771dc5a0a7d0>, <importlib.metadata.PathDistribution object at 0x771dc5a085b0>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_ensure_plugins_install_missing_plugins _________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd14101f0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_install_mi0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
______________ ERROR at setup of test_system_site_packages[False] ______________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70ba9c82cd30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>
installed_results = [<importlib.metadata.PathDistribution object at 0x70ba9d905c60>, <importlib.metadata.PathDistribution object at 0x70ba...tadata.PathDistribution object at 0x70ba9d810760>, <importlib.metadata.PathDistribution object at 0x70ba9d813490>, ...]

    @pytest.fixture
    def poetry(
        project_factory: ProjectFactory,
        fixture_dir: FixtureDirGetter,
        installed_results: list[metadata.PathDistribution],
    ) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/repositories/test_installed_repository.py:159: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_ensure_plugins_install_only_missing_plugins ______
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd142b460>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_install_on0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_ensure_plugins_install_overwrite_wrong_version_plugins[False] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd0cf3cd0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_install_ov0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_ensure_plugins_install_overwrite_wrong_version_plugins[True] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd120f3a0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_install_ov1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_____ ERROR at setup of test_ensure_plugins_pins_other_installed_packages ______
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd0f9e200>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_ensure_plugins_pins_other0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_project_plugins_are_installed_in_project_folder[False] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd14a2dd0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_project_plugins_are_insta0')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_ ERROR at setup of test_project_plugins_are_installed_in_project_folder[True] _
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x709fd0ee58a0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw16/test_project_plugins_are_insta1')

    @pytest.fixture
    def poetry_with_plugins(
        fixture_dir: FixtureDirGetter, pool: RepositoryPool, tmp_path: Path
    ) -> Poetry:
        orig_path = fixture_dir("project_plugins")
        project_path = tmp_path / "project"
        project_path.mkdir()
        shutil.copy(orig_path / "pyproject.toml", project_path / "pyproject.toml")
        poetry = Factory().create_poetry(project_path)
>       poetry.set_pool(pool)
E       AttributeError: 'NoneType' object has no attribute 'set_pool'

/workspace/tests/plugins/test_plugin_manager.py:110: AttributeError
_____ ERROR at setup of test_env_system_packages_are_relative_to_lib[True] _____
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763638dd80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_activate_activates_non_existing_virtualenv_no_envs_file _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad24270a050>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_env_system_packages[True] _______________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e719d51fc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_env_system_packages_are_relative_to_lib[False] _____
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763638ef80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_activate_activates_different_virtualenv_with_envs_file _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c034561360>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_activate_fails_when_python_cannot_be_found _______
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad243058430>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______ ERROR at setup of test_activate_in_project_venv_no_explicit_config ______
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x709fd1313910>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_env_system_packages[False] _______________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e719d51750>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_activate_activates_recreates_for_different_patch ____
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c034561240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_env_no_pip[flags0-packages0] ______________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763638e5f0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__ ERROR at setup of test_activate_activates_existing_virtualenv_no_envs_file __
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad24270bac0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
______________ ERROR at setup of test_generic_env_system_packages ______________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e719e47eb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_activate_does_not_recreate_when_switching_minor ____
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c034561d80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_env_no_pip[flags1-packages1] ______________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763638f5b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_activate_activates_same_virtualenv_with_envs_file ___
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad24270ba30>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_env_no_pip[flags2-packages2] ______________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x763539de1510>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____________________ ERROR at setup of test_remove_by_name _____________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x733567056a70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________ ERROR at setup of test_deactivate_non_activated_but_existing _________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x709fd13104c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_get_venv_with_venv_folder_present[None] ________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e719e45ab0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_tries_to_find_a_compatible_python_executable_using_generic_ones_first _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad24270b520>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_raises_if_acting_on_different_project_by_name __
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763638c040>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_env_finds_the_correct_executables ___________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x76353b2aeef0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_remove_by_string_with_python_and_version ________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x733567054b80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_activate_with_in_project_setting_does_not_fail_if_no_venvs_dir _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c034562320>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_create_venv_finds_no_python_executable _________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad24270b250>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ ERROR at setup of test_marker_env_is_equal_for_all_envs ____________
[gw13] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x74d58c988f70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x74d58d9763b0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_get_prefers_explicitly_activated_virtualenvs_over_env_var _
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e719e47370>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________ ERROR at setup of test_deactivate_activated __________________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x709fd1312830>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___ ERROR at setup of test_env_finds_the_correct_executables_for_generic_env ___
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x76353b2af010>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____________ ERROR at setup of test_remove_by_full_path_to_python _____________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x733567056dd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_tries_to_find_a_compatible_python_executable_using_specific_ones _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad2446ee290>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_________________________ ERROR at setup of test_list __________________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e719e45fc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_build_venv_does_not_change_loglevel __________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x749d305df6d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
____ ERROR at setup of test_env_finds_fallback_executables_for_generic_env _____
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x763539de31c0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76353b5c6050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_build_environment_not_called_without_build_script_specified _
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bbf538dc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________ ERROR at setup of test_get_venv_with_venv_folder_present[True] ________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x709fd13070a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_generate_env_name_ignores_case_for_case_insensitive_fs _
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x749d305dd000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_remove_raises_if_acting_on_different_project_by_full_path _
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7335688ab9a0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73356815dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_command_from_bin_preserves_relative_path ________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x702bbf539870>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x702bc0589fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_____ ERROR at setup of test_raises_when_passing_old_env_after_dir_rename ______
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x70763638d240>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_accepts_fallback_version_w_nonzero_patchlevel _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc5a75a20>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
________________ ERROR at setup of test_remove_also_deactivates ________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637bec550>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______________ ERROR at setup of test_remove_by_python_version ________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x75e71b152a70>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_fails_if_no_compatible_python_version_could_be_found _
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7ad24270b910>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_does_not_try_to_find_compatible_versions_with_executable _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c03603b640>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_does_not_keep_inconsistent_envs_entry[False] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc4d7e9e0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
__________ ERROR at setup of test_remove_keeps_dir_if_not_deleteable ___________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x707637baa200>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_does_not_keep_inconsistent_envs_entry[True] _
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x771dc4d7d000>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_uses_patch_version_to_detect_compatibility _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c036039bd0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_______ ERROR at setup of test_get_venv_with_venv_folder_present[False] ________
[gw16] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x709fd1306830>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x709fd0cadfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_uses_patch_version_to_detect_compatibility_with_executable _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c035b62f80>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_virtualenvs_with_spaces_in_their_path_work_as_expected _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x76e8ed76f6d0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_create_venv_fails_if_current_python_version_is_not_supported _
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x79c035b62cb0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_env_commands_with_spaces_in_their_arg_work_as_expected _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x76e8ecc908b0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_env_get_supported_tags_matches_inside_virtualenv[True] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x76e8ecc92950>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
_ ERROR at setup of test_env_get_supported_tags_matches_inside_virtualenv[False] _
[gw6] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x76e8ecc93250>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x76e8ed1fdfc0>

    @pytest.fixture
    def poetry(project_factory: ProjectFactory, fixture_dir: FixtureDirGetter) -> Poetry:
>       return project_factory("simple", source=fixture_dir("simple_project"))

/workspace/tests/utils/env/conftest.py:18: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
=================================== FAILURES ===================================
_________ test_init_non_interactive_existing_pyproject_add_dependency __________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73dda49ec970>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw18/test_init_non_interactive_exis0')
init_basic_inputs = 'my-package\n1.2.3\nThis is a description\nn\nMIT\n>=3.6\nn\nn\n\n'
repo = <tests.helpers.TestRepository object at 0x73dda42ef7c0>

    def test_init_non_interactive_existing_pyproject_add_dependency(
        tester: CommandTester,
        source_dir: Path,
        init_basic_inputs: str,
        repo: TestRepository,
    ) -> None:
        pyproject_file = source_dir / "pyproject.toml"
        existing_section = """
    [tool.black]
    line-length = 88
    """
        pyproject_file.write_text(existing_section, encoding="utf-8")
    
        repo.add_package(get_package("foo", "1.19.2"))
    
>       tester.execute(
            "--author 'Your Name <you@example.com>' "
            "--name 'my-package' "
            "--python '>=3.6' "
            "--dependency foo",
            interactive=False,
        )

/workspace/tests/console/commands/test_init.py:962: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:193: in _init_pyproject
    self._determine_requirements(self.option("dependency"))
/workspace/src/poetry/console/commands/init.py:411: in _determine_requirements
    for requirement in self._parse_requirements(requires):
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73dda49ec7c0>
requirements = ['foo']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
___________________ test_build_relative_directory_src_layout ___________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw14/test_build_relative_directory_0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    def test_build_relative_directory_src_layout(
        tmp_path: Path, fixture_dir: FixtureDirGetter
    ) -> None:
        tmp_project_path = tmp_path / "project"
        with with_working_directory(fixture_dir("simple_project"), tmp_project_path):
            shutil.rmtree(tmp_project_path / "dist")
            (tmp_project_path / "src").mkdir()
            (tmp_project_path / "simple_project").rename(
                tmp_project_path / "src" / "simple_project"
            )
    
            # We have to use ApplicationTester because CommandTester
            # initializes Poetry before passing the directory.
            app = Application()
            tester = ApplicationTester(app)
            tester.execute("build --project .")
    
            build_dir = tmp_project_path / "dist"
    
>           assert len(list(build_dir.iterdir())) == 2

/workspace/tests/console/commands/test_build.py:218: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw14/test_build_relative_directory_0/project/dist')

    def iterdir(self):
        """Iterate over the files in this directory.  Does not yield any
        result for the special paths '.' and '..'.
        """
>       for name in self._accessor.listdir(self):
E       FileNotFoundError: [Errno 2] No such file or directory: '/tmp/pytest-of-root/pytest-0/popen-gw14/test_build_relative_directory_0/project/dist'

/usr/local/lib/python3.10/pathlib.py:1017: FileNotFoundError
______________ test_requires_isolated_build[core_in_range-False] _______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'core_in_range', isolated_build = False
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc5a8b9a0>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc5a8bc40>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
______________________ test_interactive_with_dependencies ______________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdc3c1f0>
repo = <tests.helpers.TestRepository object at 0x73eacdc23310>

    def test_interactive_with_dependencies(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("django-pendulum", "0.1.6-pre4"))
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
        repo.add_package(get_package("flask", "2.0.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "pendulu",  # Search for package
            "1",  # Second option is pendulum
            "",  # Do not set constraint
            "Flask",
            "0",
            "",
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:138: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdc3c190>
requirements = ['pendulu']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_____________ test_requires_isolated_build[core_not_in_range-True] _____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'core_not_in_range', isolated_build = True
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc5f692d0>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc5f21fc0>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
_____________ test_requires_isolated_build[has_build_script-True] ______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'has_build_script', isolated_build = True
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc61222f0>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc60ff7f0>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
____________ test_requires_isolated_build[multiple_build_deps-True] ____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'multiple_build_deps', isolated_build = True
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc6121960>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc60c1a80>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
__________________ test_requires_isolated_build[no_core-True] __________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'no_core', isolated_build = True
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc5eeb1c0>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc617f4f0>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
_____________ test_interactive_with_dependencies_and_no_selection ______________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eace1ad540>
repo = <tests.helpers.TestRepository object at 0x73eace1b8e20>

    def test_interactive_with_dependencies_and_no_selection(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("django-pendulum", "0.1.6-pre4"))
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "pendulu",  # Search for package
            "",  # Do not select an option
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "",  # Do not select an option
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:196: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eace1ad4e0>
requirements = ['pendulu']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_______________ test_requires_isolated_build[core_from_git-True] _______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'core_from_git', isolated_build = True
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc60f7730>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc59d64a0>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
_____________ test_requires_isolated_build[no_build_system-False] ______________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'no_build_system', isolated_build = False
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc6136cb0>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc59224a0>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
_____________ test_requires_isolated_build[no_build_backend-False] _____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'no_build_backend', isolated_build = False
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc617dff0>

    @pytest.mark.parametrize(
        ["project", "isolated_build"],
        [
            ("core_in_range", False),
            ("core_not_in_range", True),
            ("has_build_script", True),
            ("multiple_build_deps", True),
            ("no_core", True),
            ("core_from_git", True),
            ("no_build_system", False),
            ("no_build_backend", False),
        ],
    )
    def test_requires_isolated_build(
        project: str,
        isolated_build: bool,
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(f"build_systems/{project}"))
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
    
>       assert handler._requires_isolated_build() is isolated_build

/workspace/tests/console/commands/test_build.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/console/commands/build.py:94: in _requires_isolated_build
    if not self._has_build_backend_defined():
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc66c9f90>

    def _has_build_backend_defined(self) -> bool:
>       return "build-backend" in self.poetry.pyproject.data.get("build-system", {})
E       AttributeError: 'NoneType' object has no attribute 'pyproject'

/workspace/src/poetry/console/commands/build.py:127: AttributeError
______________________ test_build_handler_build_isolated _______________________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc66ce6b0>

    def test_build_handler_build_isolated(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture
    ) -> None:
        from build import ProjectBuilder
    
        poetry = Factory().create_poetry(fixture_dir("build_systems/has_build_script"))
    
        mock_builder = mocker.MagicMock(spec=ProjectBuilder)
        mock_isolated_builder = mocker.patch(
            "poetry.console.commands.build.isolated_builder"
        )
        mock_isolated_builder.return_value.__enter__.return_value = mock_builder
    
        handler = BuildHandler(poetry=poetry, env=mocker.Mock(), io=NullIO())
>       handler.build(BuildOptions(clean=True, formats=["wheel"], output="dist"))

/workspace/tests/console/commands/test_build.py:302: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.build.BuildHandler object at 0x771dc6119db0>
options = BuildOptions(clean=True, formats=['wheel'], output='dist', config_settings={})

    def build(self, options: BuildOptions) -> int:
>       if not self.poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/workspace/src/poetry/console/commands/build.py:130: AttributeError
____________________ test_interactive_with_git_dependencies ____________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdbe7ac0>
repo = <tests.helpers.TestRepository object at 0x73eace00a080>

    def test_interactive_with_git_dependencies(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "git+https://github.com/demo/demo.git",  # Search for package
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:265: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdbe7940>
requirements = ['git+https://github.com/demo/demo.git']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
____________ test_interactive_with_git_dependencies_with_reference _____________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacd90d000>
repo = <tests.helpers.TestRepository object at 0x73eacde65960>

    def test_interactive_with_git_dependencies_with_reference(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "git+https://github.com/demo/demo.git@develop",  # Search for package
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:361: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacd90db40>
requirements = ['git+https://github.com/demo/demo.git@develop']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
____________ test_interactive_with_git_dependencies_and_other_name _____________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdb37040>
repo = <tests.helpers.TestRepository object at 0x73eacda86d40>

    def test_interactive_with_git_dependencies_and_other_name(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "git+https://github.com/demo/pyproject-demo.git",  # Search for package
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:410: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdb36fe0>
requirements = ['git+https://github.com/demo/pyproject-demo.git']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
__________________ test_interactive_with_directory_dependency __________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacda7a9e0>
repo = <tests.helpers.TestRepository object at 0x73eacdb55ff0>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw17/test_interactive_with_director0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    def test_interactive_with_directory_dependency(
        tester: CommandTester,
        repo: TestRepository,
        source_dir: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        demo = fixture_dir("git") / "github.com" / "demo" / "demo"
        shutil.copytree(str(demo), str(source_dir / "demo"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "./demo",  # Search for package
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:465: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacda7a560>
requirements = ['./demo']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
__________ test_interactive_with_directory_dependency_and_other_name ___________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdc4e050>
repo = <tests.helpers.TestRepository object at 0x73eace002530>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw17/test_interactive_with_director1')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    def test_interactive_with_directory_dependency_and_other_name(
        tester: CommandTester,
        repo: TestRepository,
        source_dir: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        demo = fixture_dir("git") / "github.com" / "demo" / "pyproject-demo"
        shutil.copytree(str(demo), str(source_dir / "pyproject-demo"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "./pyproject-demo",  # Search for package
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:520: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdc4e1d0>
requirements = ['./pyproject-demo']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
____________________ test_interactive_with_file_dependency _____________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdbcd900>
repo = <tests.helpers.TestRepository object at 0x73eacdc4ca30>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw17/test_interactive_with_file_dep0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    def test_interactive_with_file_dependency(
        tester: CommandTester,
        repo: TestRepository,
        source_dir: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        demo = fixture_dir("distributions") / "demo-0.1.0-py2.py3-none-any.whl"
        shutil.copyfile(str(demo), str(source_dir / demo.name))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "./demo-0.1.0-py2.py3-none-any.whl",  # Search for package
            "",  # Stop searching for packages
            "",  # Interactive dev packages
            "pytest",  # Search for package
            "0",
            "",
            "",
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:576: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdbcd840>
requirements = ['./demo-0.1.0-py2.py3-none-any.whl']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
________________ test_interactive_with_wrong_dependency_inputs _________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdbd6890>
repo = <tests.helpers.TestRepository object at 0x73eacdfb5570>

    def test_interactive_with_wrong_dependency_inputs(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.8",  # Python
            "",  # Interactive packages
            "foo 1.19.2",
            "pendulum 2.0.0 foo",  # Package name and constraint (invalid)
            "pendulum@^2.0.0",  # Package name and constraint (valid)
            "",  # End package selection
            "",  # Interactive dev packages
            "pytest 3.6.0 foo",  # Dev package name and constraint (invalid)
            "pytest 3.6.0",  # Dev package name and constraint (invalid)
            "pytest@3.6.0",  # Dev package name and constraint (valid)
            "",  # End package selection
            "\n",  # Generate
        ]
>       tester.execute(inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:625: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:214: in _init_pyproject
    self._format_requirements(self._determine_requirements([]))
/workspace/src/poetry/console/commands/init.py:331: in _determine_requirements
    constraint = self._parse_requirements([package])[0]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdbd6950>
requirements = ['foo 1.19.2']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_____________________ test_info_setup_complex_pep517_error _____________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7076376e3190>
demo_setup_complex = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_complex_pep5170/source')

    def test_info_setup_complex_pep517_error(
        mocker: MockerFixture, demo_setup_complex: Path
    ) -> None:
        output = uuid.uuid4().hex
        mocker.patch(
            "build.ProjectBuilder.from_isolated_env",
            autospec=True,
            side_effect=BuildBackendException(CalledProcessError(1, "mock", output=output)),
        )
    
        with pytest.raises(PackageInfoError) as exc:
>           PackageInfo.from_directory(demo_setup_complex)

/workspace/tests/inspection/test_info.py:353: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_complex_pep5170/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
____________________ test_info_setup_complex_pep517_legacy _____________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

demo_setup_complex_pep517_legacy = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_complex_pep5171/source')

    def test_info_setup_complex_pep517_legacy(
        demo_setup_complex_pep517_legacy: Path,
    ) -> None:
>       info = PackageInfo.from_directory(demo_setup_complex_pep517_legacy)

/workspace/tests/inspection/test_info.py:367: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_complex_pep5171/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_____________________ test_info_setup_complex_calls_script _____________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

demo_setup_complex_calls_script = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_complex_calls_0/source')

    def test_info_setup_complex_calls_script(demo_setup_complex_calls_script: Path) -> None:
        """Building the project requires calling a script from its build_requires."""
>       info = PackageInfo.from_directory(demo_setup_complex_calls_script)

/workspace/tests/inspection/test_info.py:373: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_complex_calls_0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
__________________________ test_predefined_dependency __________________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdbe7580>
repo = <tests.helpers.TestRepository object at 0x73eacda7ecb0>

    def test_predefined_dependency(tester: CommandTester, repo: TestRepository) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "n",  # Interactive packages
            "n",  # Interactive dev packages
            "\n",  # Generate
        ]
>       tester.execute("--dependency pendulum", inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:695: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:193: in _init_pyproject
    self._determine_requirements(self.option("dependency"))
/workspace/src/poetry/console/commands/init.py:411: in _determine_requirements
    for requirement in self._parse_requirements(requires):
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdbe4910>
requirements = ['pendulum']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_________________ test_predefined_and_interactive_dependencies _________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdbd5e40>
repo = <tests.helpers.TestRepository object at 0x73eacdb38f40>

    def test_predefined_and_interactive_dependencies(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pyramid", "1.10"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "",  # Interactive packages
            "pyramid",  # Search for package
            "0",  # First option
            "",  # Do not set constraint
            "",  # Stop searching for packages
            "n",  # Interactive dev packages
            "\n",  # Generate
        ]
    
>       tester.execute("--dependency pendulum", inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:738: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:193: in _init_pyproject
    self._determine_requirements(self.option("dependency"))
/workspace/src/poetry/console/commands/init.py:411: in _determine_requirements
    for requirement in self._parse_requirements(requires):
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdbd6cb0>
requirements = ['pendulum']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_______________ test_application_verify_source_cache_flag[False] _______________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

disable_cache = False
set_project_context = <function set_project_context.<locals>.project_context at 0x79c0361df640>

    @pytest.mark.parametrize("disable_cache", [True, False])
    def test_application_verify_source_cache_flag(
        disable_cache: bool, set_project_context: SetProjectContext
    ) -> None:
        with set_project_context("sample_project"):
            app = Application()
    
            tester = ApplicationTester(app)
            command = "debug info"
    
            if disable_cache:
                command = f"{command} --no-cache"
    
            assert not app._poetry
    
            tester.execute(command)
    
>           assert app.poetry.pool.repositories
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/console/test_application.py:153: AttributeError
________________________ test_predefined_dev_dependency ________________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdc6a0e0>
repo = <tests.helpers.TestRepository object at 0x73eacd87ea70>

    def test_predefined_dev_dependency(tester: CommandTester, repo: TestRepository) -> None:
        repo.add_package(get_package("pytest", "3.6.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "n",  # Interactive packages
            "n",  # Interactive dev packages
            "\n",  # Generate
        ]
    
>       tester.execute("--dev-dependency pytest", inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:774: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:221: in _init_pyproject
    self._determine_requirements(self.option("dev-dependency"))
/workspace/src/poetry/console/commands/init.py:411: in _determine_requirements
    for requirement in self._parse_requirements(requires):
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdc6a170>
requirements = ['pytest']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_____________ test_application_verify_cache_flag_at_install[True] ______________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x79c035d3aaa0>
disable_cache = True
set_project_context = <function set_project_context.<locals>.project_context at 0x79c035fa24d0>

    @pytest.mark.parametrize("disable_cache", [True, False])
    def test_application_verify_cache_flag_at_install(
        mocker: MockerFixture,
        disable_cache: bool,
        set_project_context: SetProjectContext,
    ) -> None:
        import poetry.utils.authenticator
    
        # Set default authenticator to None so that it is recreated for each test
        # and we get a consistent call_count.
        poetry.utils.authenticator._authenticator = None
    
        with set_project_context("sample_project"):
            app = Application()
    
            tester = ApplicationTester(app)
            command = "install --dry-run"
    
            if disable_cache:
                command = f"{command} --no-cache"
    
            spy = mocker.spy(Authenticator, "__init__")
    
            tester.execute(command)
    
            # The third call is the default authenticator, which ignores the cache flag.
>           assert spy.call_count == 3
E           assert 0 == 3
E            +  where 0 = <function __init__ at 0x79c0360380d0>.call_count

/workspace/tests/console/test_application.py:186: AssertionError
_______ test_info_setup_missing_mandatory_should_trigger_pep517[version] _______
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x70763742e230>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_missing_mandat0/source')
missing = 'version'

    @pytest.mark.parametrize("missing", ["version", "name"])
    def test_info_setup_missing_mandatory_should_trigger_pep517(
        mocker: MockerFixture, source_dir: Path, missing: str
    ) -> None:
        setup = "from setuptools import setup; "
        setup += "setup("
        setup += 'name="demo", ' if missing != "name" else ""
        setup += 'version="0.1.0", ' if missing != "version" else ""
        setup += 'install_requires=["package"]'
        setup += ")"
    
        setup_py = source_dir / "setup.py"
        setup_py.write_text(setup, encoding="utf-8")
    
        spy = mocker.spy(ProjectBuilder, "from_isolated_env")
>       _ = PackageInfo.from_directory(source_dir)

/workspace/tests/inspection/test_info.py:392: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_missing_mandat0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_____________ test_application_verify_cache_flag_at_install[False] _____________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x79c035fc2260>
disable_cache = False
set_project_context = <function set_project_context.<locals>.project_context at 0x79c0361dec20>

    @pytest.mark.parametrize("disable_cache", [True, False])
    def test_application_verify_cache_flag_at_install(
        mocker: MockerFixture,
        disable_cache: bool,
        set_project_context: SetProjectContext,
    ) -> None:
        import poetry.utils.authenticator
    
        # Set default authenticator to None so that it is recreated for each test
        # and we get a consistent call_count.
        poetry.utils.authenticator._authenticator = None
    
        with set_project_context("sample_project"):
            app = Application()
    
            tester = ApplicationTester(app)
            command = "install --dry-run"
    
            if disable_cache:
                command = f"{command} --no-cache"
    
            spy = mocker.spy(Authenticator, "__init__")
    
            tester.execute(command)
    
            # The third call is the default authenticator, which ignores the cache flag.
>           assert spy.call_count == 3
E           assert 0 == 3
E            +  where 0 = <function __init__ at 0x79c03603acb0>.call_count

/workspace/tests/console/test_application.py:186: AssertionError
________ test_info_setup_missing_mandatory_should_trigger_pep517[name] _________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x70763761e4a0>
source_dir = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_missing_mandat1/source')
missing = 'name'

    @pytest.mark.parametrize("missing", ["version", "name"])
    def test_info_setup_missing_mandatory_should_trigger_pep517(
        mocker: MockerFixture, source_dir: Path, missing: str
    ) -> None:
        setup = "from setuptools import setup; "
        setup += "setup("
        setup += 'name="demo", ' if missing != "name" else ""
        setup += 'version="0.1.0", ' if missing != "version" else ""
        setup += 'install_requires=["package"]'
        setup += ")"
    
        setup_py = source_dir / "setup.py"
        setup_py.write_text(setup, encoding="utf-8")
    
        spy = mocker.spy(ProjectBuilder, "from_isolated_env")
>       _ = PackageInfo.from_directory(source_dir)

/workspace/tests/inspection/test_info.py:392: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw12/test_info_setup_missing_mandat1/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_______________ test_predefined_and_interactive_dev_dependencies _______________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacda875b0>
repo = <tests.helpers.TestRepository object at 0x73eacdf98a30>

    def test_predefined_and_interactive_dev_dependencies(
        tester: CommandTester, repo: TestRepository
    ) -> None:
        repo.add_package(get_package("pytest", "3.6.0"))
        repo.add_package(get_package("pytest-requests", "0.2.0"))
    
        inputs = [
            "my-package",  # Package name
            "1.2.3",  # Version
            "This is a description",  # Description
            "n",  # Author
            "MIT",  # License
            ">=3.6",  # Python
            "n",  # Interactive packages
            "",  # Interactive dev packages
            "pytest-requests",  # Search for package
            "0",  # Select first option
            "",  # Do not set constraint
            "",  # Stop searching for dev packages
            "\n",  # Generate
        ]
    
>       tester.execute("--dev-dependency pytest", inputs="\n".join(inputs))

/workspace/tests/console/commands/test_init.py:821: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:221: in _init_pyproject
    self._determine_requirements(self.option("dev-dependency"))
/workspace/src/poetry/console/commands/init.py:411: in _determine_requirements
    for requirement in self._parse_requirements(requires):
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacda874f0>
requirements = ['pytest']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_________________________ test_predefined_all_options __________________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

tester = <cleo.testers.command_tester.CommandTester object at 0x73eacdc43c10>
repo = <tests.helpers.TestRepository object at 0x73eacdb42950>

    def test_predefined_all_options(tester: CommandTester, repo: TestRepository) -> None:
        repo.add_package(get_package("pendulum", "2.0.0"))
        repo.add_package(get_package("pytest", "3.6.0"))
    
        inputs = [
            "1.2.3",  # Version
            "",  # Author
            "n",  # Interactive packages
            "n",  # Interactive dev packages
            "\n",  # Generate
        ]
    
>       tester.execute(
            "--name my-package "
            "--description 'This is a description' "
            "--author 'Foo Bar <foo@example.com>' "
            "--python '>=3.8' "
            "--license MIT "
            "--dependency pendulum "
            "--dev-dependency pytest",
            inputs="\n".join(inputs),
        )

/workspace/tests/console/commands/test_init.py:860: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/venv/lib/python3.10/site-packages/cleo/testers/command_tester.py:88: in execute
    self._status_code = self._command.run(self._io)
/opt/venv/lib/python3.10/site-packages/cleo/commands/base_command.py:117: in run
    return self.execute(io) or 0
/opt/venv/lib/python3.10/site-packages/cleo/commands/command.py:61: in execute
    return self.handle()
/workspace/src/poetry/console/commands/init.py:85: in handle
    return self._init_pyproject(project_path=project_path)
/workspace/src/poetry/console/commands/init.py:193: in _init_pyproject
    self._determine_requirements(self.option("dependency"))
/workspace/src/poetry/console/commands/init.py:411: in _determine_requirements
    for requirement in self._parse_requirements(requires):
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.console.commands.init.InitCommand object at 0x73eacdc406a0>
requirements = ['pendulum']

    def _parse_requirements(self, requirements: list[str]) -> list[dict[str, Any]]:
        from poetry.core.pyproject.exceptions import PyProjectError
    
        try:
>           cwd = self.poetry.file.path.parent
E           AttributeError: 'NoneType' object has no attribute 'file'

/workspace/src/poetry/console/commands/init.py:467: AttributeError
_______________________ test_info_from_sdist_no_pkg_info _______________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    def test_info_from_sdist_no_pkg_info(fixture_dir: FixtureDirGetter) -> None:
        path = fixture_dir("distributions") / "demo_no_pkg_info-0.1.0.tar.gz"
>       info = PackageInfo.from_sdist(path)

/workspace/tests/inspection/test_info.py:193: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpq_srfnlc/demo-0.1.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_______________ test_application_verify_source_cache_flag[True] ________________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

disable_cache = True
set_project_context = <function set_project_context.<locals>.project_context at 0x7bf60b175750>

    @pytest.mark.parametrize("disable_cache", [True, False])
    def test_application_verify_source_cache_flag(
        disable_cache: bool, set_project_context: SetProjectContext
    ) -> None:
        with set_project_context("sample_project"):
            app = Application()
    
            tester = ApplicationTester(app)
            command = "debug info"
    
            if disable_cache:
                command = f"{command} --no-cache"
    
            assert not app._poetry
    
            tester.execute(command)
    
>           assert app.poetry.pool.repositories
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/console/test_application.py:153: AttributeError
____________________________ test_info_setup_simple ____________________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad243fd0a00>
demo_setup = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw7/test_info_setup_simple0/source')

    def test_info_setup_simple(mocker: MockerFixture, demo_setup: Path) -> None:
        spy = mocker.spy(VirtualEnv, "run")
>       info = PackageInfo.from_directory(demo_setup)

/workspace/tests/inspection/test_info.py:331: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw7/test_info_setup_simple0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
___________________________ test_info_setup_complex ____________________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

demo_setup_complex = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw7/test_info_setup_complex0/source')

    def test_info_setup_complex(demo_setup_complex: Path) -> None:
>       info = PackageInfo.from_directory(demo_setup_complex)

/workspace/tests/inspection/test_info.py:338: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw7/test_info_setup_complex0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
___ test_builder_falls_back_on_setup_and_pip_for_packages_with_build_scripts ___
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x75e71b65be20>
extended_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_falls_back_on_set0')

    def test_builder_falls_back_on_setup_and_pip_for_packages_with_build_scripts(
        mocker: MockerFixture, extended_poetry: Poetry, tmp_path: Path
    ) -> None:
        pip_install = mocker.patch("poetry.masonry.builders.editable.pip_install")
        env = MockEnv(path=tmp_path / "foo")
>       builder = EditableBuilder(extended_poetry, env, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:273: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x75e71b8a2bc0>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
__________________ test_publish_publishes_to_pypi_by_default ___________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad2442c7490>
config = <tests.conftest.Config object at 0x7ad2446c8730>

    def test_publish_publishes_to_pypi_by_default(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:31: AttributeError
_________ test_builder_installs_proper_files_when_packages_configured __________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

project_with_include = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_installs_proper_f0/venv")

    def test_builder_installs_proper_files_when_packages_configured(
        project_with_include: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(project_with_include, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:285: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x75e71b8c9db0>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_installs_proper_f0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
________ test_search_for_directory_setup_with_base[non-canonical-name] _________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

provider = <poetry.puzzle.provider.Provider object at 0x70ba9d900bb0>
directory = 'non-canonical-name'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_search_for_directory_setu0')

    @pytest.mark.parametrize("directory", ["demo", "non-canonical-name"])
    def test_search_for_directory_setup_with_base(
        provider: Provider, directory: str, fixture_dir: FixtureDirGetter, tmp_path: Path
    ) -> None:
        path = shutil.copytree(
            fixture_dir("git") / "github.com" / "demo" / directory, tmp_path / "project"
        )
    
        dependency = DirectoryDependency("demo", path, base=path)
    
>       package = provider.search_for_direct_origin_dependency(dependency)

/workspace/tests/puzzle/test_provider.py:329: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/puzzle/provider.py:253: in search_for_direct_origin_dependency
    package = self._search_for_directory(dependency)
/workspace/src/poetry/puzzle/provider.py:357: in _search_for_directory
    package = self._direct_origin.get_package_from_directory(dependency.full_path)
/workspace/src/poetry/packages/direct_origin.py:80: in get_package_from_directory
    return PackageInfo.from_directory(path=directory).to_package(root_dir=directory)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_search_for_directory_setu0/project')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_________ test_publish_can_publish_to_given_repository[sample_project] _________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad243c61420>
config = <tests.conftest.Config object at 0x7ad243c9cbb0>
fixture_name = 'sample_project'

    @pytest.mark.parametrize("fixture_name", ["sample_project", "with_source"])
    def test_publish_can_publish_to_given_repository(
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
        config: Config,
        fixture_name: str,
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
    
        config.merge(
            {
                "repositories": {"foo": {"url": "http://foo.bar"}},
                "http-basic": {"foo": {"username": "foo", "password": "bar"}},
            }
        )
    
        mocker.patch("poetry.config.config.Config.create", return_value=config)
        poetry = Factory().create_poetry(fixture_dir(fixture_name))
    
        io = BufferedIO()
>       publisher = Publisher(poetry, io)

/workspace/tests/publishing/test_publisher.py:67: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7ad243fd3400>
poetry = None, io = <cleo.io.buffered_io.BufferedIO object at 0x7ad2442c4eb0>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
______ test_builder_generates_proper_metadata_when_multiple_readme_files _______
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

with_multiple_readme_files = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_generates_proper_0/venv")

    def test_builder_generates_proper_metadata_when_multiple_readme_files(
        with_multiple_readme_files: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(with_multiple_readme_files, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:310: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x75e71b8dda20>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_generates_proper_0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
__________ test_publish_can_publish_to_given_repository[with_source] ___________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad243bc0460>
config = <tests.conftest.Config object at 0x7ad243bc1cc0>
fixture_name = 'with_source'

    @pytest.mark.parametrize("fixture_name", ["sample_project", "with_source"])
    def test_publish_can_publish_to_given_repository(
        fixture_dir: FixtureDirGetter,
        mocker: MockerFixture,
        config: Config,
        fixture_name: str,
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
    
        config.merge(
            {
                "repositories": {"foo": {"url": "http://foo.bar"}},
                "http-basic": {"foo": {"username": "foo", "password": "bar"}},
            }
        )
    
        mocker.patch("poetry.config.config.Config.create", return_value=config)
        poetry = Factory().create_poetry(fixture_dir(fixture_name))
    
        io = BufferedIO()
>       publisher = Publisher(poetry, io)

/workspace/tests/publishing/test_publisher.py:67: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7ad2446e37f0>
poetry = None, io = <cleo.io.buffered_io.BufferedIO object at 0x7ad2446e3970>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
______________ test_publish_raises_error_for_undefined_repository ______________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
config = <tests.conftest.Config object at 0x7ad243c9d720>

    def test_publish_raises_error_for_undefined_repository(
        fixture_dir: FixtureDirGetter, config: Config
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:84: AttributeError
__________________ test_builder_should_execute_build_scripts ___________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x75e71b875e10>
extended_without_setup_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_should_execute_bu0')

    def test_builder_should_execute_build_scripts(
        mocker: MockerFixture, extended_without_setup_poetry: Poetry, tmp_path: Path
    ) -> None:
        env = MockEnv(path=tmp_path / "foo")
        mocker.patch(
            "poetry.masonry.builders.editable.build_environment"
        ).return_value.__enter__.return_value = env
    
>       builder = EditableBuilder(extended_without_setup_poetry, env, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:352: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x75e71b5d6a10>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
_____________________ test_publish_uses_token_if_it_exists _____________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad243c575b0>
config = <tests.conftest.Config object at 0x7ad2442c76a0>

    def test_publish_uses_token_if_it_exists(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        config.merge({"pypi-token": {"pypi": "my-token"}})
>       assert_publish_uses_token_if_it_exists(fixture_dir, mocker, config)

/workspace/tests/publishing/test_publisher.py:118: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad243c575b0>
config = <tests.conftest.Config object at 0x7ad2442c76a0>

    def assert_publish_uses_token_if_it_exists(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config | None = None
    ) -> None:
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
    
        if config:
>           poetry._config = config
E           AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:102: AttributeError
___________________ test_publish_uses_env_token_if_it_exists ___________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad2440618a0>
environ = None

    def test_publish_uses_env_token_if_it_exists(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, environ: None
    ) -> None:
        os.environ["POETRY_PYPI_TOKEN_PYPI"] = "my-token"
>       assert_publish_uses_token_if_it_exists(fixture_dir, mocker)

/workspace/tests/publishing/test_publisher.py:125: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/tests/publishing/test_publisher.py:104: in assert_publish_uses_token_if_it_exists
    publisher = Publisher(poetry, NullIO())
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7ad2440aee00>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad24424d750>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
____________________________ test_publish_uses_cert ____________________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad24716a170>
config = <tests.conftest.Config object at 0x7ad243f214b0>

    def test_publish_uses_cert(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        cert = "path/to/ca.pem"
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:135: AttributeError
________________________ test_publish_uses_client_cert _________________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad247168df0>
config = <tests.conftest.Config object at 0x7ad24405cca0>

    def test_publish_uses_client_cert(
        fixture_dir: FixtureDirGetter, mocker: MockerFixture, config: Config
    ) -> None:
        client_cert = "path/to/client.pem"
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       poetry._config = config
E       AttributeError: 'NoneType' object has no attribute '_config'

/workspace/tests/publishing/test_publisher.py:165: AttributeError
_________________ test_publish_read_from_environment_variable __________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>
environ = None
mocker = <pytest_mock.plugin.MockerFixture object at 0x7ad2440be2c0>
config = <tests.conftest.Config object at 0x7ad243b08d30>

    def test_publish_read_from_environment_variable(
        fixture_dir: FixtureDirGetter,
        environ: None,
        mocker: MockerFixture,
        config: Config,
    ) -> None:
        os.environ["POETRY_REPOSITORIES_FOO_URL"] = "https://foo.bar"
        os.environ["POETRY_HTTP_BASIC_FOO_USERNAME"] = "bar"
        os.environ["POETRY_HTTP_BASIC_FOO_PASSWORD"] = "baz"
        uploader_auth = mocker.patch("poetry.publishing.uploader.Uploader.auth")
        uploader_upload = mocker.patch("poetry.publishing.uploader.Uploader.upload")
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
>       publisher = Publisher(poetry, NullIO())

/workspace/tests/publishing/test_publisher.py:199: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.publishing.publisher.Publisher object at 0x7ad24424f8b0>
poetry = None, io = <cleo.io.null_io.NullIO object at 0x7ad24307f730>
dist_dir = None

    def __init__(self, poetry: Poetry, io: IO, dist_dir: Path | None = None) -> None:
        self._poetry = poetry
>       self._package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/publishing/publisher.py:28: AttributeError
__________________ test_builder_catches_bad_scripts_no_colon ___________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

bad_scripts_no_colon = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_catches_bad_scrip0/venv")

    def test_builder_catches_bad_scripts_no_colon(
        bad_scripts_no_colon: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(bad_scripts_no_colon, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:364: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x75e71b6d6050>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_catches_bad_scrip0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_______________ test_builder_catches_bad_scripts_too_many_colon ________________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

bad_scripts_too_many_colon = None
tmp_venv = VirtualEnv("/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_catches_bad_scrip1/venv")

    def test_builder_catches_bad_scripts_too_many_colon(
        bad_scripts_too_many_colon: Poetry, tmp_venv: VirtualEnv
    ) -> None:
>       builder = EditableBuilder(bad_scripts_too_many_colon, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:378: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x75e71b602980>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log setup ------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw5/test_builder_catches_bad_scrip1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_______ test_search_for_directory_setup_read_setup_with_no_dependencies ________
[gw4] linux -- Python 3.10.18 /opt/venv/bin/python

provider = <poetry.puzzle.provider.Provider object at 0x70ba9d3d9c00>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x70ba9d3c40d0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_search_for_directory_setu3')

    def test_search_for_directory_setup_read_setup_with_no_dependencies(
        provider: Provider, fixture_dir: FixtureDirGetter, tmp_path: Path
    ) -> None:
        path = shutil.copytree(
            fixture_dir("git") / "github.com" / "demo" / "no-dependencies",
            tmp_path / "project",
        )
    
        dependency = DirectoryDependency("demo", path)
    
>       package = provider.search_for_direct_origin_dependency(dependency)

/workspace/tests/puzzle/test_provider.py:412: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/puzzle/provider.py:253: in search_for_direct_origin_dependency
    package = self._search_for_directory(dependency)
/workspace/src/poetry/puzzle/provider.py:357: in _search_for_directory
    package = self._direct_origin.get_package_from_directory(dependency.full_path)
/workspace/src/poetry/packages/direct_origin.py:80: in get_package_from_directory
    return PackageInfo.from_directory(path=directory).to_package(root_dir=directory)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw4/test_search_for_directory_setu3/project')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
___ test_builder_installs_proper_files_for_standard_packages[simple_project] ___
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'simple_project', simple_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw2/test_builder_installs_proper_f0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.mark.parametrize("project", ("simple_project", "simple_project_legacy"))
    def test_builder_installs_proper_files_for_standard_packages(
        project: str,
        simple_poetry: Poetry,
        tmp_path: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        simple_poetry = Factory().create_poetry(fixture_dir(project))
        env_manager = EnvManager(simple_poetry)
        venv_path = tmp_path / "venv"
        env_manager.build_venv(venv_path)
        tmp_venv = VirtualEnv(venv_path)
    
>       builder = EditableBuilder(simple_poetry, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:143: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7ea0b432cbe0>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log call -------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw2/test_builder_installs_proper_f0/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
_ test_builder_installs_proper_files_for_standard_packages[simple_project_legacy] _
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'simple_project_legacy', simple_poetry = None
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw2/test_builder_installs_proper_f1')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    @pytest.mark.parametrize("project", ("simple_project", "simple_project_legacy"))
    def test_builder_installs_proper_files_for_standard_packages(
        project: str,
        simple_poetry: Poetry,
        tmp_path: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        simple_poetry = Factory().create_poetry(fixture_dir(project))
        env_manager = EnvManager(simple_poetry)
        venv_path = tmp_path / "venv"
        env_manager.build_venv(venv_path)
        tmp_venv = VirtualEnv(venv_path)
    
>       builder = EditableBuilder(simple_poetry, tmp_venv, NullIO())

/workspace/tests/masonry/builders/test_editable_builder.py:143: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/masonry/builders/editable.py:47: in __init__
    super().__init__(poetry)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <poetry.masonry.builders.editable.EditableBuilder object at 0x7ea0b38b4d60>
poetry = None, executable = None, config_settings = None

    def __init__(
        self,
        poetry: Poetry,
        executable: Path | None = None,
        config_settings: dict[str, Any] | None = None,
    ) -> None:
        from poetry.core.masonry.metadata import Metadata
    
>       if not poetry.is_package_mode:
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/opt/venv/lib/python3.10/site-packages/poetry/core/masonry/builders/builder.py:39: AttributeError
------------------------------ Captured log call -------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/popen-gw2/test_builder_installs_proper_f1/venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
______________ test_solver_chooses_from_supplemental_if_explicit _______________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x76353b490b50>
name = 'pastel'
version = Version(epoch=0, release=Release(major=0, minor=1, patch=0, extra=(), precision=3, text='0.1.0', _compare_key=(0, 1)),...(0, 1)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('pastel', '0.1.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

package = Package('root', '1.0')
io = <cleo.io.null_io.NullIO object at 0x76353b4939d0>
legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x76353b490b50>
pypi_repository = <poetry.repositories.pypi_repository.PyPiRepository object at 0x76353b643340>

    def test_solver_chooses_from_supplemental_if_explicit(
        package: ProjectPackage,
        io: NullIO,
        legacy_repository: LegacyRepository,
        pypi_repository: PyPiRepository,
    ) -> None:
        package.python_versions = "^3.7"
        package.add_dependency(
            Factory.create_dependency("clikit", {"version": "^0.2.0", "source": "PyPI"})
        )
    
        pool = RepositoryPool()
        pool.add_repository(pypi_repository, priority=Priority.SUPPLEMENTAL)
        pool.add_repository(legacy_repository)
    
        solver = Solver(package, pool, [], [], io)
    
>       transaction = solver.solve()

/workspace/tests/puzzle/test_solver.py:3414: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/puzzle/solver.py:87: in solve
    packages = self._solve()
/workspace/src/poetry/puzzle/solver.py:170: in _solve
    result = resolve_version(self._package, self._provider)
/workspace/src/poetry/mixology/__init__.py:18: in resolve_version
    return solver.solve()
/workspace/src/poetry/mixology/version_solver.py:192: in solve
    next = self._choose_package_version()
/workspace/src/poetry/mixology/version_solver.py:599: in _choose_package_version
    package = self._provider.complete_package(package)
/workspace/src/poetry/puzzle/provider.py:476: in complete_package
    self.get_package_from_pool(
/workspace/src/poetry/repositories/repository_pool.py:162: in package
    return repo.package(name, version)
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpijd_uzc_/pastel-0.1.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b25ebc0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/simple/clikit/", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': 'application/vnd.pypi.simple.v1+json', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b25eb30>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b25e320>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/pypi/clikit/0.2.4/json", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b25e230>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b662380>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pylev/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b6627d0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b663ca0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/simple/pylev/", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': 'application/vnd.pypi.simple.v1+json', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b662020>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b660580>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pylev/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b660490>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b660ac0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/pypi/pylev/1.3.0/json", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b6634c0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b6633d0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pastel/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b6629b0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b4c9450>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b4caf80>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b4c8cd0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b4c8220>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b4c9900>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b4ca260>: 'super' object has no attribute 'flush'
________ test_solver_can_resolve_directory_dependencies_nested_editable ________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

repo = <poetry.repositories.repository.Repository object at 0x771dc5a4e2c0>
pool = <poetry.repositories.repository_pool.RepositoryPool object at 0x771dc4e91ae0>
io = <cleo.io.null_io.NullIO object at 0x771dc4e91cc0>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>

    def test_solver_can_resolve_directory_dependencies_nested_editable(
        repo: Repository,
        pool: RepositoryPool,
        io: NullIO,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        base = fixture_dir("project_with_nested_local")
        poetry = Factory().create_poetry(cwd=base)
>       package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/puzzle/test_solver.py:2865: AttributeError
_______________ test_get_package_information_fallback_read_setup _______________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x749d305e94b0>
name = 'jupyter'
version = Version(epoch=0, release=Release(major=1, minor=0, patch=0, extra=(), precision=3, text='1.0.0', _compare_key=(1,)), p...y=(1,)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('jupyter', '1.0.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x749d305e94b0>

    def test_get_package_information_fallback_read_setup(
        legacy_repository: LegacyRepository,
    ) -> None:
        repo = legacy_repository
    
>       package = repo.package("jupyter", Version.parse("1.0.0"))

/workspace/tests/repositories/test_legacy_repository.py:138: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpnxc6ywr7/jupyter-1.0.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x749d305eb370>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/jupyter/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x749d305ebb80>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x749d305ead40>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x749d305ea050>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x749d305e8970>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x749d305eada0>: 'super' object has no attribute 'flush'
_____ test_solver_does_not_choose_from_supplemental_repository_by_default ______
[gw21] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x7b9642578760>
name = 'pastel'
version = Version(epoch=0, release=Release(major=0, minor=1, patch=0, extra=(), precision=3, text='0.1.0', _compare_key=(0, 1)),...(0, 1)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('pastel', '0.1.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

package = Package('root', '1.0')
io = <cleo.io.null_io.NullIO object at 0x7b96425672b0>
legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x7b9642578760>
pypi_repository = <poetry.repositories.pypi_repository.PyPiRepository object at 0x7b96420a0160>

    def test_solver_does_not_choose_from_supplemental_repository_by_default(
        package: ProjectPackage,
        io: NullIO,
        legacy_repository: LegacyRepository,
        pypi_repository: PyPiRepository,
    ) -> None:
        package.python_versions = "^3.7"
        package.add_dependency(Factory.create_dependency("clikit", {"version": "^0.2.0"}))
    
        pool = RepositoryPool()
        pool.add_repository(pypi_repository, priority=Priority.SUPPLEMENTAL)
        pool.add_repository(legacy_repository)
    
        solver = Solver(package, pool, [], [], io)
    
>       transaction = solver.solve()

/workspace/tests/puzzle/test_solver.py:3362: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/puzzle/solver.py:87: in solve
    packages = self._solve()
/workspace/src/poetry/puzzle/solver.py:170: in _solve
    result = resolve_version(self._package, self._provider)
/workspace/src/poetry/mixology/__init__.py:18: in resolve_version
    return solver.solve()
/workspace/src/poetry/mixology/version_solver.py:192: in solve
    next = self._choose_package_version()
/workspace/src/poetry/mixology/version_solver.py:599: in _choose_package_version
    package = self._provider.complete_package(package)
/workspace/src/poetry/puzzle/provider.py:476: in complete_package
    self.get_package_from_pool(
/workspace/src/poetry/repositories/repository_pool.py:162: in package
    return repo.package(name, version)
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmpjp356e6o/pastel-0.1.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b9642578400>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/clikit/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b9642579600>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fc880>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/7b/0d/bb4c8a2d0edca8c300373ed736fb4680cf73be5be2ff84544dee5f979c14/clikit-0.2.4-py2.py3-none-any.whl", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'identity', 'Accept': '*/*', 'Connection': 'keep-alive', 'Cache-Control': 'no-cache', 'Range': 'bytes=-10000'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fc9a0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fc9a0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fc400>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/7b/0d/bb4c8a2d0edca8c300373ed736fb4680cf73be5be2ff84544dee5f979c14/clikit-0.2.4-py2.py3-none-any.whl", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fe050>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fd0c0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pylev/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fc490>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fda50>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/simple/pylev/", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': 'application/vnd.pypi.simple.v1+json', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fdc00>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fe830>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pylev/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fe860>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fe740>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/pypi/pylev/1.3.0/json", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fed10>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fef20>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pastel/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96427fef80>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96421c7760>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96421c44c0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96425c7160>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96425c5a50>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96425c4550>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7b96425c6b60>: 'super' object has no attribute 'flush'
________ test_solver_ignores_explicit_repo_for_transitive_dependencies _________
[gw15] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x76353b7547c0>
name = 'pastel'
version = Version(epoch=0, release=Release(major=0, minor=1, patch=0, extra=(), precision=3, text='0.1.0', _compare_key=(0, 1)),...(0, 1)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('pastel', '0.1.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

package = Package('root', '1.0')
io = <cleo.io.null_io.NullIO object at 0x76353b805a80>
legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x76353b7547c0>
pypi_repository = <poetry.repositories.pypi_repository.PyPiRepository object at 0x76353b89d4b0>

    def test_solver_ignores_explicit_repo_for_transitive_dependencies(
        package: ProjectPackage,
        io: NullIO,
        legacy_repository: LegacyRepository,
        pypi_repository: PyPiRepository,
    ) -> None:
        # clikit depends on pylev, which is in pypi_repository (explicit) but not in
        # legacy_repository
        package.python_versions = "^3.7"
        package.add_dependency(
            Factory.create_dependency("clikit", {"version": "^0.2.0", "source": "PyPI"})
        )
    
        pool = RepositoryPool()
        pool.add_repository(pypi_repository, priority=Priority.EXPLICIT)
        pool.add_repository(legacy_repository)
    
        solver = Solver(package, pool, [], [], io)
    
        with pytest.raises(SolverProblemError):
>           solver.solve()

/workspace/tests/puzzle/test_solver.py:3510: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/puzzle/solver.py:87: in solve
    packages = self._solve()
/workspace/src/poetry/puzzle/solver.py:170: in _solve
    result = resolve_version(self._package, self._provider)
/workspace/src/poetry/mixology/__init__.py:18: in resolve_version
    return solver.solve()
/workspace/src/poetry/mixology/version_solver.py:192: in solve
    next = self._choose_package_version()
/workspace/src/poetry/mixology/version_solver.py:599: in _choose_package_version
    package = self._provider.complete_package(package)
/workspace/src/poetry/puzzle/provider.py:476: in complete_package
    self.get_package_from_pool(
/workspace/src/poetry/repositories/repository_pool.py:162: in package
    return repo.package(name, version)
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmp0_xh6ghq/pastel-0.1.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26d990>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/simple/clikit/", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': 'application/vnd.pypi.simple.v1+json', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26f880>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26fb50>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://pypi.org/pypi/clikit/0.2.4/json", headers={'Host': 'pypi.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26fdf0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26dde0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pylev/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26f850>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26f3d0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/pastel/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b26e5c0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b01fa30>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b01d810>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b01fc70>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b01d090>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b01dd20>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/bd/13/a68f2e448b471e8c49e9b596d569ae167a5135ac672b1dc5f24f62f9c15f/pastel-0.1.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x76353b01e7a0>: 'super' object has no attribute 'flush'
___________ test_create_pyproject_from_package[project_with_extras] ____________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'project_with_extras'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    @pytest.mark.parametrize(
        ("project",),
        [
            ("simple_project_legacy",),
            ("project_with_extras",),
        ],
    )
    def test_create_pyproject_from_package(
        project: str, fixture_dir: FixtureDirGetter
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(project))
>       package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/test_factory.py:165: AttributeError
_________ test_search_for_directory_setup_egg_info[non-canonical-name] _________
[gw18] linux -- Python 3.10.18 /opt/venv/bin/python

provider = <poetry.puzzle.provider.Provider object at 0x73dda495c280>
directory = 'non-canonical-name'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73dda45817e0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw18/test_search_for_directory_setu1')

    @pytest.mark.parametrize("directory", ["demo", "non-canonical-name"])
    def test_search_for_directory_setup_egg_info(
        provider: Provider, directory: str, fixture_dir: FixtureDirGetter, tmp_path: Path
    ) -> None:
        path = shutil.copytree(
            fixture_dir("git") / "github.com" / "demo" / directory, tmp_path / "project"
        )
        dependency = DirectoryDependency("demo", path)
    
>       package = provider.search_for_direct_origin_dependency(dependency)

/workspace/tests/puzzle/test_provider.py:280: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/puzzle/provider.py:253: in search_for_direct_origin_dependency
    package = self._search_for_directory(dependency)
/workspace/src/poetry/puzzle/provider.py:357: in _search_for_directory
    package = self._direct_origin.get_package_from_directory(dependency.full_path)
/workspace/src/poetry/packages/direct_origin.py:80: in get_package_from_directory
    return PackageInfo.from_directory(path=directory).to_package(root_dir=directory)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw18/test_search_for_directory_setu1/project')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
________________ test_create_poetry_with_packages_and_includes _________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    def test_create_poetry_with_packages_and_includes(
        fixture_dir: FixtureDirGetter,
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir("with-include"))
    
>       package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/test_factory.py:198: AttributeError
_______ test_poetry_with_pypi_explicit_only[with_explicit_pypi_no_other] _______
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'with_explicit_pypi_no_other'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
with_simple_keyring = None

    @pytest.mark.parametrize(
        "project", ["with_explicit_pypi_no_other", "with_explicit_pypi_and_other_explicit"]
    )
    def test_poetry_with_pypi_explicit_only(
        project: str, fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
>       with pytest.raises(PoetryError) as e:
E       Failed: DID NOT RAISE <class 'poetry.exceptions.PoetryError'>

/workspace/tests/test_factory.py:379: Failed
__ test_poetry_with_pypi_explicit_only[with_explicit_pypi_and_other_explicit] __
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'with_explicit_pypi_and_other_explicit'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>
with_simple_keyring = None

    @pytest.mark.parametrize(
        "project", ["with_explicit_pypi_no_other", "with_explicit_pypi_and_other_explicit"]
    )
    def test_poetry_with_pypi_explicit_only(
        project: str, fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
>       with pytest.raises(PoetryError) as e:
E       Failed: DID NOT RAISE <class 'poetry.exceptions.PoetryError'>

/workspace/tests/test_factory.py:379: Failed
_____________ test_create_poetry_with_multi_constraints_dependency _____________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    def test_create_poetry_with_multi_constraints_dependency(
        fixture_dir: FixtureDirGetter,
    ) -> None:
        poetry = Factory().create_poetry(
            fixture_dir("project_with_multi_constraints_dependency")
        )
    
>       package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/test_factory.py:231: AttributeError
______________________________ test_create_poetry ______________________________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    def test_create_poetry(fixture_dir: FixtureDirGetter) -> None:
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
    
>       package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/test_factory.py:47: AttributeError
_____________________ test_create_poetry_with_local_config _____________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    def test_create_poetry_with_local_config(fixture_dir: FixtureDirGetter) -> None:
        poetry = Factory().create_poetry(fixture_dir("with_local_config"))
    
>       assert not poetry.config.get("virtualenvs.in-project")
E       AttributeError: 'NoneType' object has no attribute 'config'

/workspace/tests/test_factory.py:439: AttributeError
______________________ test_create_poetry_version_not_ok _______________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>

    def test_create_poetry_version_not_ok(fixture_dir: FixtureDirGetter) -> None:
>       with pytest.raises(PoetryError) as e:
E       Failed: DID NOT RAISE <class 'poetry.exceptions.PoetryError'>

/workspace/tests/test_factory.py:251: Failed
__________ test_create_pyproject_from_package[simple_project_legacy] ___________
[gw7] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'simple_project_legacy'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ad243f15fc0>

    @pytest.mark.parametrize(
        ("project",),
        [
            ("simple_project_legacy",),
            ("project_with_extras",),
        ],
    )
    def test_create_pyproject_from_package(
        project: str, fixture_dir: FixtureDirGetter
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir(project))
>       package = poetry.package
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/test_factory.py:165: AttributeError
_______________________ test_create_poetry_with_plugins ________________________
[gw17] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x73eacdc5bc40>
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x73eacd96e050>

    def test_create_poetry_with_plugins(
        mocker: MockerFixture, fixture_dir: FixtureDirGetter
    ) -> None:
        mock_metadata_entry_points(mocker, MyPlugin)
    
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
    
>       assert poetry.package.readmes == (Path("README.md"),)
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/tests/test_factory.py:453: AttributeError
_____________________ test_create_poetry_non_package_mode ______________________
[gw19] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x79c035aaa050>

    def test_create_poetry_non_package_mode(fixture_dir: FixtureDirGetter) -> None:
        poetry = Factory().create_poetry(fixture_dir("non_package_mode"))
    
>       assert not poetry.is_package_mode
E       AttributeError: 'NoneType' object has no attribute 'is_package_mode'

/workspace/tests/test_factory.py:239: AttributeError
________ test_poetry_with_primary_source[with_primary_source_implicit] _________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'with_primary_source_implicit'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>
with_simple_keyring = None

    @pytest.mark.parametrize(
        "project",
        ("with_primary_source_implicit", "with_primary_source_explicit"),
    )
    def test_poetry_with_primary_source(
        project: str, fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        io = BufferedIO()
        poetry = Factory().create_poetry(fixture_dir(project), io=io)
    
>       assert not poetry.pool.has_repository("PyPI")
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:269: AttributeError
________ test_poetry_with_primary_source[with_primary_source_explicit] _________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

project = 'with_primary_source_explicit'
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>
with_simple_keyring = None

    @pytest.mark.parametrize(
        "project",
        ("with_primary_source_implicit", "with_primary_source_explicit"),
    )
    def test_poetry_with_primary_source(
        project: str, fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        io = BufferedIO()
        poetry = Factory().create_poetry(fixture_dir(project), io=io)
    
>       assert not poetry.pool.has_repository("PyPI")
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:269: AttributeError
________________ test_poetry_with_multiple_supplemental_sources ________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>
with_simple_keyring = None

    def test_poetry_with_multiple_supplemental_sources(
        fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir("with_multiple_supplemental_sources"))
    
>       assert poetry.pool.has_repository("PyPI")
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:281: AttributeError
______________________ test_poetry_with_multiple_sources _______________________
[gw12] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x707637401870>
with_simple_keyring = None

    def test_poetry_with_multiple_sources(
        fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        poetry = Factory().create_poetry(fixture_dir("with_multiple_sources"))
    
>       assert not poetry.pool.has_repository("PyPI")
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:296: AttributeError
__________________________ test_package_partial_yank ___________________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x733568353d60>
name = 'futures'
version = Version(epoch=0, release=Release(major=3, minor=2, patch=0, extra=(), precision=3, text='3.2.0', _compare_key=(3, 2)),...(3, 2)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('futures', '3.2.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x733566eb3cd0>
legacy_repository_partial_yank = <poetry.repositories.legacy_repository.LegacyRepository object at 0x733568353d60>

    def test_package_partial_yank(
        legacy_repository: LegacyRepository,
        legacy_repository_partial_yank: LegacyRepository,
    ) -> None:
        repo = legacy_repository
        package = repo.package("futures", Version.parse("3.2.0"))
        assert len(package.files) == 2
    
        repo = legacy_repository_partial_yank
>       package = repo.package("futures", Version.parse("3.2.0"))

/workspace/tests/repositories/test_legacy_repository.py:501: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmppdklgk79/futures-3.2.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7335683510f0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/futures/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568351fc0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568353460>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/2d/99/b2c4e9d5a30f6471e410a146232b4118e697fa3ffc06d6a65efde84debd0/futures-3.2.0-py2-none-any.whl", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'identity', 'Accept': '*/*', 'Connection': 'keep-alive', 'Cache-Control': 'no-cache', 'Range': 'bytes=-10000'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568351b40>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568351b40>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568350f40>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/2d/99/b2c4e9d5a30f6471e410a146232b4118e697fa3ffc06d6a65efde84debd0/futures-3.2.0-py2-none-any.whl", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568351780>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568797430>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/futures-partial-yank/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568797550>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568795c60>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/1f/9e/7b2ff7e965fc654592269f2906ade1c7d705f1bf25b7d469fa153f7d19eb/futures-3.2.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x733568796470>: 'super' object has no attribute 'flush'
______________ test_get_package_retrieves_packages_with_no_hashes ______________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

self = <poetry.repositories.legacy_repository.LegacyRepository object at 0x7ea0b46dde10>
name = 'jupyter'
version = Version(epoch=0, release=Release(major=1, minor=0, patch=0, extra=(), precision=3, text='1.0.0', _compare_key=(1,)), p...y=(1,)), ReleaseTag(phase='z', number=0), ReleaseTag(phase='', number=0), ReleaseTag(phase='z', number=0), ((0, ''),)))

    def package(self, name: str, version: Version) -> Package:
        """
        Retrieve the release information.
    
        This is a heavy task which takes time.
        We have to download a package to get the dependencies.
        We also need to download every file matching this release
        to get the various hashes.
    
        Note that this will be cached so the subsequent operations
        should be much faster.
        """
        try:
>           index = self._packages.index(Package(name, version))
E           ValueError: Package('jupyter', '1.0.0') is not in list

/workspace/src/poetry/repositories/legacy_repository.py:62: ValueError

During handling of the above exception, another exception occurred:

legacy_repository = <poetry.repositories.legacy_repository.LegacyRepository object at 0x7ea0b46dde10>
dist_hash_getter = <function dist_hash_getter.<locals>.get_hash at 0x7ea0b1748040>

    def test_get_package_retrieves_packages_with_no_hashes(
        legacy_repository: LegacyRepository, dist_hash_getter: DistributionHashGetter
    ) -> None:
        repo = legacy_repository
    
>       package = repo.package("jupyter", Version.parse("1.0.0"))

/workspace/tests/repositories/test_legacy_repository.py:455: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/repositories/legacy_repository.py:66: in package
    package = super().package(name, version)
/workspace/src/poetry/repositories/cached_repository.py:70: in package
    return self.get_release_info(canonicalize_name(name), version).to_package(
/workspace/src/poetry/repositories/cached_repository.py:50: in get_release_info
    return PackageInfo.load(self._get_release_info(name, version))
/workspace/src/poetry/repositories/legacy_repository.py:119: in _get_release_info
    return self._links_to_data(
/workspace/src/poetry/repositories/http_repository.py:367: in _links_to_data
    info = self._get_info_from_links(links, ignore_yanked=not data.yanked)
/workspace/src/poetry/repositories/http_repository.py:332: in _get_info_from_links
    return self._get_info_from_metadata(sdists[0]) or self._get_info_from_sdist(
/workspace/src/poetry/repositories/http_repository.py:167: in _get_info_from_sdist
    return PackageInfo.from_sdist(filepath)
/workspace/src/poetry/inspection/info.py:479: in from_sdist
    return cls._from_sdist_file(path=path)
/workspace/src/poetry/inspection/info.py:335: in _from_sdist_file
    new_info = cls.from_directory(path=sdist_dir)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/tmp8cjbalh3/jupyter-1.0.0'), distribution = 'wheel'
python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
------------------------------ Captured log call -------------------------------
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7ea0b46dcd00>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://legacy.foo.bar/jupyter/", headers={'Host': 'legacy.foo.bar', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7ea0b46defe0>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7ea0b46dcfa0>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7ea0b46dca30>: 'super' object has no attribute 'flush'
DEBUG    httpretty.core:core.py:588 setsockopt(6, 1, 1) failed
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7ea0b46dc820>: 'super' object has no attribute 'flush'
INFO     httpretty.core:core.py:1626 captured: <HTTPrettyRequest("GET", "https://files.pythonhosted.org/packages/c9/a9/371d0b8fe37dd231cf4b2cff0a9f0f25e98f3a73c3771742444be27f2944/jupyter-1.0.0.tar.gz", headers={'Host': 'files.pythonhosted.org', 'User-Agent': 'poetry/1.8.2 CPython/3.10.18 Linux/6.6.87.2-microsoft-standard-WSL2', 'Accept-Encoding': 'Identity', 'Accept': '*/*', 'Connection': 'keep-alive'}, body=0)>
DEBUG    httpretty.core:core.py:458 error closing file <httpretty.core.FakeSockFile object at 0x7ea0b46df9d0>: 'super' object has no attribute 'flush'
____________________ test_poetry_with_multiple_sources_pypi ____________________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>
with_simple_keyring = None

    def test_poetry_with_multiple_sources_pypi(
        fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        io = BufferedIO()
        poetry = Factory().create_poetry(fixture_dir("with_multiple_sources_pypi"), io=io)
    
>       assert len(poetry.pool.repositories) == 4
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:310: AttributeError
______________________ test_poetry_with_no_default_source ______________________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>

    def test_poetry_with_no_default_source(fixture_dir: FixtureDirGetter) -> None:
        poetry = Factory().create_poetry(fixture_dir("sample_project"))
    
>       assert poetry.pool.has_repository("PyPI")
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:322: AttributeError
______________ test_create_poetry_fails_on_invalid_configuration _______________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    def test_create_poetry_fails_on_invalid_configuration(
        fixture_dir: FixtureDirGetter,
    ) -> None:
>       with pytest.raises(RuntimeError) as e:
E       Failed: DID NOT RAISE <class 'RuntimeError'>

/workspace/tests/test_factory.py:411: Failed
_____________________ test_poetry_with_supplemental_source _____________________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>
with_simple_keyring = None

    def test_poetry_with_supplemental_source(
        fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        io = BufferedIO()
        poetry = Factory().create_poetry(fixture_dir("with_supplemental_source"), io=io)
    
>       assert poetry.pool.has_repository("PyPI")
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:334: AttributeError
_________________ test_create_poetry_fails_on_nameless_project _________________
[gw10] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x749d30401fc0>

    def test_create_poetry_fails_on_nameless_project(
        fixture_dir: FixtureDirGetter,
    ) -> None:
>       with pytest.raises(RuntimeError) as e:
E       Failed: DID NOT RAISE <class 'RuntimeError'>

/workspace/tests/test_factory.py:425: Failed
_______________________ test_poetry_with_explicit_source _______________________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>
with_simple_keyring = None

    def test_poetry_with_explicit_source(
        fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        io = BufferedIO()
        poetry = Factory().create_poetry(fixture_dir("with_explicit_source"), io=io)
    
>       assert len(poetry.pool.repositories) == 1
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:350: AttributeError
_____________ test_build_environment_called_build_script_specified _____________
[gw11] linux -- Python 3.10.18 /opt/venv/bin/python

mocker = <pytest_mock.plugin.MockerFixture object at 0x702bc0dd2620>
extended_without_setup_poetry = None

    def test_build_environment_called_build_script_specified(
        mocker: MockerFixture,
        extended_without_setup_poetry: Poetry,
    ) -> None:
        patched_install = mocker.patch("poetry.utils.isolated_build.IsolatedEnv.install")
    
        with ephemeral_environment() as project_env:
            import poetry.utils.env
    
            spy = mocker.spy(poetry.utils.env, "ephemeral_environment")
    
>           with build_environment(extended_without_setup_poetry, project_env):

/workspace/tests/utils/env/test_env.py:502: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

poetry = None, env = VirtualEnv("/tmp/tmpvw4i7m8a/.venv"), io = None

    @contextmanager
    def build_environment(
        poetry: Poetry, env: Env | None = None, io: IO | None = None
    ) -> Iterator[Env]:
        """
        If a build script is specified for the project, there could be additional build
        time dependencies, eg: cython, setuptools etc. In these cases, we create an
        ephemeral build environment with all requirements specified under
        `build-system.requires` and return this. Otherwise, the given default project
        environment is returned.
        """
>       if not env or poetry.package.build_script:
E       AttributeError: 'NoneType' object has no attribute 'package'

/workspace/src/poetry/utils/env/__init__.py:63: AttributeError
------------------------------ Captured log call -------------------------------
INFO     virtualenv.discovery.builtin:builtin.py:78 find interpreter for spec PythonSpec(path=/opt/venv/bin/python)
INFO     virtualenv.discovery.builtin:builtin.py:85 proposed PythonInfo(spec=CPython3.10.18.final.0-64, system=/usr/local/bin/python3.10, exe=/opt/venv/bin/python, platform=linux, version='3.10.18 (main, Sep 30 2025, 00:42:07) [GCC 14.2.0]', encoding_fs_io=utf-8-utf-8)
WARNING  virtualenv.seed.embed.base_embed:base_embed.py:38 The --no-wheel and --wheel options are deprecated. They have no effect for Python > 3.8 as wheel is no longer bundled in virtualenv.
INFO     virtualenv.run.session:session.py:52 create virtual environment via CPython3Posix(dest=/tmp/tmpvw4i7m8a/.venv, clear=False, no_vcs_ignore=False, global=False)
INFO     virtualenv.run.session:session.py:65 add activators for Bash, CShell, Fish, Nushell, PowerShell, Python
___________________ test_poetry_with_explicit_pypi_and_other ___________________
[gw2] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7ea0b3a4a050>
with_simple_keyring = None

    def test_poetry_with_explicit_pypi_and_other(
        fixture_dir: FixtureDirGetter, with_simple_keyring: None
    ) -> None:
        io = BufferedIO()
        poetry = Factory().create_poetry(fixture_dir("with_explicit_pypi_and_other"), io=io)
    
>       assert len(poetry.pool.repositories) == 1
E       AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/tests/test_factory.py:367: AttributeError
___________ test_create_venv_project_name_empty_sets_correct_prompt ____________
[gw14] linux -- Python 3.10.18 /opt/venv/bin/python

fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x771dc581dfc0>
project_factory = <function project_factory.<locals>._factory at 0x771dc578bd00>
config = <tests.conftest.Config object at 0x771dc6763610>
mocker = <pytest_mock.plugin.MockerFixture object at 0x771dc5a0dfc0>
config_virtualenvs_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw14/test_create_venv_project_name_0/.cache/pypoetry/virtualenvs')
mocked_python_register = <function mocked_python_register.<locals>.register at 0x771dc66b79a0>

    def test_create_venv_project_name_empty_sets_correct_prompt(
        fixture_dir: FixtureDirGetter,
        project_factory: ProjectFactory,
        config: Config,
        mocker: MockerFixture,
        config_virtualenvs_path: Path,
        mocked_python_register: MockedPythonRegister,
    ) -> None:
        config.config["virtualenvs"]["use-poetry-python"] = True
        if "VIRTUAL_ENV" in os.environ:
            del os.environ["VIRTUAL_ENV"]
    
>       poetry = project_factory("no", source=fixture_dir("no_name_project"))

/workspace/tests/utils/env/test_env_manager.py:1138: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'no', dependencies = {}, dev_dependencies = {}, pyproject_content = None
poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/no_name_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ test_run_installs_with_local_setuptools_directory[False] ___________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

installer = <poetry.installation.installer.Installer object at 0x7bf60b2a5ab0>
locker = <tests.installation.test_installer.Locker object at 0x7bf60b133790>
repo = <poetry.repositories.repository.Repository object at 0x7bf60b133e80>
package = Package('root', '1.0')
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw20/test_run_installs_with_local_s0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7bf60a99d630>

    def test_run_installs_with_local_setuptools_directory(
        installer: Installer,
        locker: Locker,
        repo: Repository,
        package: ProjectPackage,
        tmp_path: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        root_dir = tmp_path / "root"
        package.root_dir = root_dir
        locker.set_lock_path(root_dir)
        file_path = shutil.copytree(fixture_dir("project_with_setup"), root_dir / "project")
        package.add_dependency(
            Factory.create_dependency(
                "project-with-setup",
                {"path": str(file_path.relative_to(root_dir))},
                root_dir=root_dir,
            )
        )
    
        repo.add_package(get_package("pendulum", "1.4.4"))
        repo.add_package(get_package("cachy", "0.2.0"))
    
>       result = installer.run()

/workspace/tests/installation/test_installer.py:1806: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/installation/installer.py:103: in run
    return self._do_install()
/workspace/src/poetry/installation/installer.py:241: in _do_install
    solved_packages = solver.solve(
/workspace/src/poetry/puzzle/solver.py:87: in solve
    packages = self._solve()
/workspace/src/poetry/puzzle/solver.py:170: in _solve
    result = resolve_version(self._package, self._provider)
/workspace/src/poetry/mixology/__init__.py:18: in resolve_version
    return solver.solve()
/workspace/src/poetry/mixology/version_solver.py:192: in solve
    next = self._choose_package_version()
/workspace/src/poetry/mixology/version_solver.py:599: in _choose_package_version
    package = self._provider.complete_package(package)
/workspace/src/poetry/puzzle/provider.py:577: in complete_package
    self.search_for_direct_origin_dependency(dep)
/workspace/src/poetry/puzzle/provider.py:253: in search_for_direct_origin_dependency
    package = self._search_for_directory(dependency)
/workspace/src/poetry/puzzle/provider.py:357: in _search_for_directory
    package = self._direct_origin.get_package_from_directory(dependency.full_path)
/workspace/src/poetry/packages/direct_origin.py:80: in get_package_from_directory
    return PackageInfo.from_directory(path=directory).to_package(root_dir=directory)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw20/test_run_installs_with_local_s0/root/project')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_____________ test_isolated_builder_outside_poetry_project_context _____________
[gw5] linux -- Python 3.10.18 /opt/venv/bin/python

tmp_working_directory = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw5/test_isolated_builder_outside_0')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x75e71b582050>

    def test_isolated_builder_outside_poetry_project_context(
        tmp_working_directory: Path, fixture_dir: FixtureDirGetter
    ) -> None:
        source = tmp_working_directory / "source"
        shutil.copytree(fixture_dir("project_with_setup"), source)
        destination = tmp_working_directory / "dist"
    
        try:
>           with isolated_builder(source, "wheel") as builder:

/workspace/tests/utils/test_isolated_build.py:127: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw5/test_isolated_builder_outside_0/source')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
_________________________ test_python_find_compatible __________________________
[gw9] linux -- Python 3.10.18 /opt/venv/bin/python

project_factory = <function project_factory.<locals>._factory at 0x7335688a8040>
mocked_python_register = <function mocked_python_register.<locals>.register at 0x7335688a8670>

    def test_python_find_compatible(
        project_factory: ProjectFactory, mocked_python_register: MockedPythonRegister
    ) -> None:
        # Note: This test may fail on Windows systems using Python from the Microsoft Store,
        # as the executable is named `py.exe`, which is not currently recognized by
        # Python.get_compatible_python. This issue will be resolved in #2117.
        # However, this does not cause problems in our case because Poetry's own
        # Python interpreter is used before attempting to find another compatible version.
        fixture = Path(__file__).parent.parent / "fixtures" / "simple_project"
>       poetry = project_factory("simple-project", source=fixture)

/workspace/tests/utils/test_python_manager.py:140: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

name = 'simple-project', dependencies = {}, dev_dependencies = {}
pyproject_content = None, poetry_lock_content = None, install_deps = True
source = PosixPath('/workspace/tests/fixtures/simple_project')
locker_config = None, use_test_locker = True

    def _factory(
        name: str | None = None,
        dependencies: Mapping[str, str] | None = None,
        dev_dependencies: Mapping[str, str] | None = None,
        pyproject_content: str | None = None,
        poetry_lock_content: str | None = None,
        install_deps: bool = True,
        source: Path | None = None,
        locker_config: dict[str, Any] | None = None,
        use_test_locker: bool = True,
    ) -> Poetry:
        project_dir = workspace / f"poetry-fixture-{name}"
        dependencies = dependencies or {}
        dev_dependencies = dev_dependencies or {}
    
        if pyproject_content or source:
            if source:
                project_dir.parent.mkdir(parents=True, exist_ok=True)
                shutil.copytree(source, project_dir)
            else:
                project_dir.mkdir(parents=True, exist_ok=True)
    
            if pyproject_content:
                with (project_dir / "pyproject.toml").open("w", encoding="utf-8") as f:
                    f.write(pyproject_content)
        else:
            assert name is not None
            layout("src")(
                name,
                "0.1.0",
                author="PyTest Tester <mc.testy@testface.com>",
                readme_format="md",
                python=default_python,
                dependencies=dependencies,
                dev_dependencies=dev_dependencies,
            ).create(project_dir, with_tests=False)
    
        if poetry_lock_content:
            lock_file = project_dir / "poetry.lock"
            lock_file.write_text(data=poetry_lock_content, encoding="utf-8")
    
        poetry = Factory().create_poetry(project_dir)
    
        if use_test_locker:
            locker = TestLocker(
>               poetry.locker.lock, locker_config or poetry.locker._pyproject_data
            )
E           AttributeError: 'NoneType' object has no attribute 'locker'

/workspace/tests/conftest.py:515: AttributeError
___________ test_run_installs_with_local_setuptools_directory[True] ____________
[gw20] linux -- Python 3.10.18 /opt/venv/bin/python

installer = <poetry.installation.installer.Installer object at 0x7bf60ad72da0>
locker = <tests.installation.test_installer.Locker object at 0x7bf60b2884c0>
repo = <poetry.repositories.repository.Repository object at 0x7bf60b288fa0>
package = Package('root', '1.0')
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw20/test_run_installs_with_local_s1')
fixture_dir = <function fixture_dir.<locals>._fixture_dir at 0x7bf60a99d630>

    def test_run_installs_with_local_setuptools_directory(
        installer: Installer,
        locker: Locker,
        repo: Repository,
        package: ProjectPackage,
        tmp_path: Path,
        fixture_dir: FixtureDirGetter,
    ) -> None:
        root_dir = tmp_path / "root"
        package.root_dir = root_dir
        locker.set_lock_path(root_dir)
        file_path = shutil.copytree(fixture_dir("project_with_setup"), root_dir / "project")
        package.add_dependency(
            Factory.create_dependency(
                "project-with-setup",
                {"path": str(file_path.relative_to(root_dir))},
                root_dir=root_dir,
            )
        )
    
        repo.add_package(get_package("pendulum", "1.4.4"))
        repo.add_package(get_package("cachy", "0.2.0"))
    
>       result = installer.run()

/workspace/tests/installation/test_installer.py:1806: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/workspace/src/poetry/installation/installer.py:103: in run
    return self._do_install()
/workspace/src/poetry/installation/installer.py:241: in _do_install
    solved_packages = solver.solve(
/workspace/src/poetry/puzzle/solver.py:87: in solve
    packages = self._solve()
/workspace/src/poetry/puzzle/solver.py:170: in _solve
    result = resolve_version(self._package, self._provider)
/workspace/src/poetry/mixology/__init__.py:18: in resolve_version
    return solver.solve()
/workspace/src/poetry/mixology/version_solver.py:192: in solve
    next = self._choose_package_version()
/workspace/src/poetry/mixology/version_solver.py:599: in _choose_package_version
    package = self._provider.complete_package(package)
/workspace/src/poetry/puzzle/provider.py:577: in complete_package
    self.search_for_direct_origin_dependency(dep)
/workspace/src/poetry/puzzle/provider.py:253: in search_for_direct_origin_dependency
    package = self._search_for_directory(dependency)
/workspace/src/poetry/puzzle/provider.py:357: in _search_for_directory
    package = self._direct_origin.get_package_from_directory(dependency.full_path)
/workspace/src/poetry/packages/direct_origin.py:80: in get_package_from_directory
    return PackageInfo.from_directory(path=directory).to_package(root_dir=directory)
/workspace/src/poetry/inspection/info.py:459: in from_directory
    info = get_pep517_metadata(path)
/workspace/src/poetry/inspection/info.py:540: in get_pep517_metadata
    with isolated_builder(path, "wheel") as builder:
/usr/local/lib/python3.10/contextlib.py:135: in __enter__
    return next(self.gen)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

source = PosixPath('/tmp/pytest-of-root/pytest-0/popen-gw20/test_run_installs_with_local_s1/root/project')
distribution = 'wheel', python_executable = None, pool = None

    @contextmanager
    def isolated_builder(
        source: Path,
        distribution: DistributionType = "wheel",
        python_executable: Path | None = None,
        pool: RepositoryPool | None = None,
    ) -> Iterator[ProjectBuilder]:
        from build import ProjectBuilder
        from pyproject_hooks import quiet_subprocess_runner
    
        from poetry.factory import Factory
    
        try:
            # we recreate the project's Poetry instance in order to retrieve the correct repository pool
            # when a pool is not provided
>           pool = pool or Factory().create_poetry().pool
E           AttributeError: 'NoneType' object has no attribute 'pool'

/workspace/src/poetry/utils/isolated_build.py:173: AttributeError
=========================== short test summary info ============================
SKIPPED [1] tests/console/commands/test_run.py:159: Poetry only installs CMD script files for console scripts of editable dependencies on Windows
SKIPPED [3] tests/console/commands/env/test_activate.py:53: Only Windows shells
SKIPPED [1] tests/console/commands/test_sync.py:26: Only relevant for `poetry install`
SKIPPED [1] tests/installation/test_executor.py:414: https://github.com/python-poetry/poetry/issues/7983
SKIPPED [1] tests/utils/env/test_env_manager.py:1265: requires darwin
SKIPPED [1] tests/utils/test_python_manager.py:104: Windows only
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_install.py - TypeError: expected str, ...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/console/commands/self/test_sync.py - TypeError: expected str, byt...
ERROR tests/config/test_config.py::test_config_get_default_value[installer.parallel-True]
ERROR tests/console/commands/test_config.py::test_unset_pypi_token - TypeErro...
ERROR tests/console/commands/test_add.py::test_add_no_constraint_editable_error
ERROR tests/config/test_config.py::test_config_get_from_environment_variable[virtualenvs.in-project-POETRY_VIRTUALENVS_IN_PROJECT-0-False]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True--groups0]
ERROR tests/console/commands/test_publish.py::test_publish_returns_non_zero_code_for_upload_errors
ERROR tests/console/commands/test_build.py::test_build_output_option[None] - ...
ERROR tests/console/commands/self/test_add_plugins.py::test_add_with_constraint
ERROR tests/console/commands/test_config.py::test_config_migrate_local_config_should_raise_if_not_found
ERROR tests/console/commands/env/test_activate.py::test_no_additional_output_in_verbose_mode[]
ERROR tests/config/test_config.py::test_config_get_from_environment_variable[virtualenvs.options.no-pip-POETRY_VIRTUALENVS_OPTIONS_NO_PIP-True-True]
ERROR tests/console/commands/test_add.py::test_add_url_constraint_wheel_with_extras[foo]
ERROR tests/console/commands/test_check.py::test_check_lock_missing[--lock-Error: poetry.lock was not found.\n-1]
ERROR tests/console/commands/test_install.py::test_sync_option_is_passed_to_the_installer[True]
ERROR tests/config/test_dict_config_source.py::test_dict_config_source_get_property
ERROR tests/console/commands/test_add.py::test_add_should_work_when_adding_existing_package_with_latest_constraint[False]
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_deleted_from_pyproject[deleted_file_dependency-False]
ERROR tests/console/commands/source/test_add.py::test_source_add_existing_no_change_except_case_of_name[lower]
ERROR tests/console/commands/test_init.py::test_add_package_with_extras_and_whitespace
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options9-valid_groups9-False]
ERROR tests/console/commands/test_remove.py::test_remove_performs_uninstall_op[up_to_date_lock]
ERROR tests/console/commands/python/test_python_install.py::test_install_failure
ERROR tests/console/commands/test_publish.py::test_publish_returns_non_zero_code_for_connection_errors
ERROR tests/console/commands/test_check.py::test_check_lock_outdated[] - Attr...
ERROR tests/console/commands/test_config.py::test_set_pypi_token_unsuccessful_multiple_values
ERROR tests/console/commands/test_build.py::test_build_output_option[dist] - ...
ERROR tests/console/commands/test_add.py::test_add_equal_constraint - Attribu...
ERROR tests/console/commands/test_add.py::test_add_url_constraint_wheel_with_extras[FOO]
ERROR tests/console/commands/test_config.py::test_config_installer_build_config_settings
ERROR tests/console/commands/test_remove.py::test_remove_performs_uninstall_op[up_to_date_lock_non_package]
ERROR tests/console/commands/test_add.py::test_add_chooses_prerelease_if_only_prereleases_are_available
ERROR tests/console/commands/test_install.py::test_sync_option_is_passed_to_the_installer[False]
ERROR tests/console/commands/python/test_python_install.py::test_install_corrupt[False]
ERROR tests/console/commands/test_lock.py::test_lock_with_incompatible_lockfile[True]
ERROR tests/console/commands/source/test_add.py::test_source_add_existing_no_change_except_case_of_name[upper]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---only-root-groups1]
ERROR tests/console/commands/test_install.py::test_dry_run_populates_installer
ERROR tests/console/commands/test_publish.py::test_publish_with_cert - Attrib...
ERROR tests/console/commands/test_build.py::test_build_output_option[test/dir]
ERROR tests/console/commands/test_check.py::test_check_lock_outdated[--lock]
ERROR tests/console/commands/test_add.py::test_add_greater_constraint - Attri...
ERROR tests/console/commands/test_config.py::test_config_installer_build_config_settings_bad_values[BAD=VALUE]
ERROR tests/console/commands/test_add.py::test_add_prefers_stable_releases - ...
ERROR tests/console/commands/test_remove.py::test_remove_with_lock_does_not_perform_uninstall_op[up_to_date_lock]
ERROR tests/console/commands/test_install.py::test_compile_option_is_passed_to_the_installer[False]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[None-expected_extras0-True]
ERROR tests/console/commands/test_config.py::test_set_pypi_token_no_values - ...
ERROR tests/console/commands/python/test_python_install.py::test_install_corrupt[True]
ERROR tests/console/commands/test_publish.py::test_publish_with_client_cert
ERROR tests/console/commands/test_check.py::test_check_lock_up_to_date[] - At...
ERROR tests/console/commands/test_build.py::test_build_output_option[../dist]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_extras[msgpack]
ERROR tests/console/commands/source/test_add.py::test_source_add_existing_updating[lower]
ERROR tests/console/commands/test_config.py::test_config_installer_build_config_settings_bad_values[BAD]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---only main-groups2]
ERROR tests/console/commands/test_add.py::test_add_with_lock - AttributeError...
ERROR tests/console/commands/test_remove.py::test_remove_with_lock_does_not_perform_uninstall_op[up_to_date_lock_non_package]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[None-expected_extras0-False]
ERROR tests/console/commands/test_install.py::test_compile_option_is_passed_to_the_installer[True]
ERROR tests/console/commands/test_install.py::test_dry_run_does_not_build - A...
ERROR tests/console/commands/test_lock.py::test_lock_with_incompatible_lockfile[False]
ERROR tests/console/commands/test_check.py::test_check_lock_up_to_date[--lock]
ERROR tests/console/commands/test_publish.py::test_publish_dry_run_skip_existing[--dry-run]
ERROR tests/console/commands/test_config.py::test_set_client_cert - Attribute...
ERROR tests/console/commands/python/test_python_install.py::test_install_success
ERROR tests/console/commands/test_add.py::test_add_constraint_with_extras[MsgPack]
ERROR tests/console/commands/test_config.py::test_config_installer_build_config_settings_bad_values[{"key": ["str", 0]}]
ERROR tests/console/commands/test_build.py::test_build_output_option[absolute]
ERROR tests/console/commands/test_run.py::test_run_passes_all_args - Attribut...
ERROR tests/console/commands/source/test_add.py::test_source_add_existing_updating[upper]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---only foo-groups3]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[existing_extras1-expected_extras1-True]
ERROR tests/console/commands/test_publish.py::test_publish_dry_run_skip_existing[--skip-existing]
ERROR tests/console/commands/test_check.py::test_check_does_not_error_on_pypi_reference
ERROR tests/console/commands/test_add.py::test_add_keyboard_interrupt_restore_content
ERROR tests/console/commands/test_lock.py::test_lock_with_invalid_lockfile[True]
ERROR tests/console/commands/test_config.py::test_command_config_build_config_settings_get
ERROR tests/console/commands/test_add.py::test_add_constraint_dependencies - ...
ERROR tests/console/commands/test_install.py::test_no_directory_is_passed_to_installer[True]
ERROR tests/console/commands/test_install.py::test_install_logs_output - Attr...
ERROR tests/console/commands/test_run.py::test_run_is_not_eager - AttributeEr...
ERROR tests/console/commands/test_config.py::test_set_client_cert_unsuccessful_multiple_values
ERROR tests/console/commands/test_publish.py::test_publish_dry_run_skip_existing[--dry-run --skip-existing]
ERROR tests/console/commands/python/test_python_install.py::test_install_reinstall
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[existing_extras1-expected_extras1-False]
ERROR tests/console/commands/source/test_remove.py::test_source_remove_simple[lower]
ERROR tests/console/commands/test_config.py::test_show_config_with_local_config_file_empty
ERROR tests/console/commands/test_add.py::test_add_with_markers - AttributeEr...
ERROR tests/console/commands/test_add.py::test_add_with_dry_run_keep_files_intact[cachy --dry-run]
ERROR tests/console/commands/test_install.py::test_no_directory_is_passed_to_installer[False]
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---only foo,bar-groups4]
ERROR tests/console/commands/test_lock.py::test_lock_with_invalid_lockfile[False]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[existing_extras2-expected_extras2-True]
ERROR tests/console/commands/test_config.py::test_set_cert[path/to/ca.pem-path/to/ca.pem]
ERROR tests/console/commands/test_add.py::test_add_git_constraint - Attribute...
ERROR tests/console/commands/test_config.py::test_list_displays_default_value_if_not_set
ERROR tests/console/commands/python/test_python_install.py::test_install_passes_options_to_installer[cpython-False]
ERROR tests/console/commands/test_publish.py::test_skip_existing_output - Att...
ERROR tests/console/commands/test_install.py::test_no_all_extras_doesnt_populate_installer
ERROR tests/console/commands/source/test_remove.py::test_source_remove_simple[upper]
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[-vP run run]
ERROR tests/console/commands/test_install.py::test_install_logs_output_decorated
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[existing_extras2-expected_extras2-False]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---only bam-groups5]
ERROR tests/console/commands/test_add.py::test_add_git_constraint_with_poetry
ERROR tests/console/commands/test_config.py::test_list_displays_set_get_setting
ERROR tests/console/commands/test_config.py::test_set_cert[true-True] - Attri...
ERROR tests/console/commands/test_new.py::test_command_new[options0-package-package-package-None]
ERROR tests/console/commands/test_install.py::test_all_extras_populates_installer
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[run -vP run]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[existing_extras3-expected_extras3-True]
ERROR tests/console/commands/python/test_python_install.py::test_install_passes_options_to_installer[cpython-True]
ERROR tests/console/commands/test_config.py::test_set_cert[false-False] - Att...
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---with bam-groups6]
ERROR tests/console/commands/test_new.py::test_command_new[options1-package-package-src/package-src]
ERROR tests/console/commands/test_init.py::test_noninteractive - AttributeErr...
ERROR tests/console/commands/source/test_remove.py::test_source_remove_pypi[pypi]
ERROR tests/console/commands/test_config.py::test_unset_cert - AttributeError...
ERROR tests/console/commands/test_add.py::test_add_with_dry_run_keep_files_intact[cachy --lock --dry-run]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---without foo,bar-groups7]
ERROR tests/console/commands/cache/test_list.py::test_cache_list - AttributeE...
ERROR tests/console/commands/source/test_remove.py::test_source_remove_pypi[PyPI]
ERROR tests/console/commands/test_install.py::test_install_warning_corrupt_root[module-True]
ERROR tests/console/commands/python/test_python_install.py::test_install_passes_options_to_installer[pypy-False]
ERROR tests/console/commands/test_install.py::test_install_warning_corrupt_root[module-False]
ERROR tests/console/commands/source/test_remove.py::test_source_remove_pypi_and_other[pypi]
ERROR tests/console/commands/test_new.py::test_command_new[options2-namespace-package-namespace-package-namespace/package-None]
ERROR tests/console/commands/test_install.py::test_install_warning_corrupt_root[readme-True]
ERROR tests/console/commands/cache/test_list.py::test_cache_list_empty - Attr...
ERROR tests/console/commands/python/test_python_install.py::test_install_passes_options_to_installer[pypy-True]
ERROR tests/console/commands/test_new.py::test_command_new[options3-namespace-package-namespace-package-src/namespace/package-src]
ERROR tests/console/commands/test_add.py::test_add_git_constraint_with_extras[foo]
ERROR tests/console/commands/test_add.py::test_add_should_not_change_lock_file_when_dependency_installation_fail
ERROR tests/console/commands/debug/test_resolve.py::test_debug_resolve_gives_resolution_results
ERROR tests/console/commands/test_config.py::test_cannot_set_with_multiple_values
ERROR tests/console/commands/test_install.py::test_extras_are_parsed_and_populate_installer
ERROR tests/console/commands/debug/test_resolve.py::test_debug_resolve_tree_option_gives_the_dependency_tree
ERROR tests/console/commands/test_config.py::test_cannot_set_invalid_value - ...
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional[existing_extras3-expected_extras3-False]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[-cachy  0.1.0 Cachy package\npytest 3.7.3 Pytest package\n]
ERROR tests/console/commands/test_add.py::test_add_git_constraint_with_extras[FOO]
ERROR tests/console/commands/test_add.py::test_add_with_path_dependency_no_loopiness
ERROR tests/console/commands/test_install.py::test_install_ensures_project_plugins[--no-plugins-0]
ERROR tests/console/commands/test_show.py::test_show_basic_with_not_installed_packages_non_decorated[]
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[-vPrun run]
ERROR tests/console/commands/debug/test_resolve.py::test_debug_resolve_git_dependency
ERROR tests/console/commands/test_add.py::test_add_constraint_with_optional_not_main_group
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---without main-groups8]
ERROR tests/console/commands/test_add.py::test_add_git_constraint_with_subdirectory[git+https://github.com/demo/subdirectories.git#subdirectory=two-None]
ERROR tests/console/commands/test_config.py::test_config_installer_parallel
ERROR tests/console/commands/test_config.py::test_cannot_unset_with_value - A...
ERROR tests/console/commands/test_install.py::test_install_ensures_project_plugins[-1]
ERROR tests/console/commands/test_add.py::test_add_extras_are_parsed_and_included
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--format json-expected1]
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[run -vPrun ]
ERROR tests/console/commands/source/test_remove.py::test_source_remove_pypi_and_other[PyPI]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---with foo,bar --without baz --without bim --only bam-groups9]
ERROR tests/console/commands/test_show.py::test_show_basic_with_not_installed_packages_non_decorated[--format json]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_python - A...
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[true-expected0-installer.no-binary]
ERROR tests/console/commands/test_install.py::test_install_warning_corrupt_root[readme-False]
ERROR tests/console/commands/test_add.py::test_add_git_constraint_with_subdirectory[git+https://github.com/demo/subdirectories.git@master#subdirectory=two-master]
ERROR tests/console/commands/test_config.py::test_unset_setting - AttributeEr...
ERROR tests/console/commands/test_install.py::test_extras_conflicts_all_extras
ERROR tests/console/commands/test_add.py::test_add_extras_only_accepts_one_package[requests --extras security socks]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time-cachy    0.1.0 Cachy package\npendulum 2.0.0 Pendulum package\npytest   3.7.3 Pytest package\n0]
ERROR tests/console/commands/test_show.py::test_show_all_shows_incompatible_package[]
ERROR tests/console/commands/python/test_python_list.py::test_list_no_versions
ERROR tests/console/commands/source/test_remove.py::test_source_remove_error[foo]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---all-groups-groups10]
ERROR tests/console/commands/test_show.py::test_show_basic_with_not_installed_packages_decorated
ERROR tests/console/commands/test_add.py::test_add_git_ssh_constraint[False]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_platform
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[-v --project=run run]
ERROR tests/console/commands/test_new.py::test_command_new[options4-namespace-package_a-namespace-package-a-namespace/package_a-None]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[true-expected0-installer.only-binary]
ERROR tests/console/commands/test_config.py::test_unset_repo_setting - Attrib...
ERROR tests/console/commands/test_install.py::test_install_warning_corrupt_root[-True]
ERROR tests/console/commands/test_install.py::test_only_root_conflicts_with_without_only_all_groups[--with foo]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time --format json-expected3]
ERROR tests/console/commands/python/test_python_list.py::test_list_all - Attr...
ERROR tests/console/commands/test_show.py::test_show_all_shows_incompatible_package[--format json]
ERROR tests/console/commands/source/test_remove.py::test_source_remove_error[pypi]
ERROR tests/console/commands/test_add.py::test_add_git_ssh_constraint[True]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---with foo-groups11]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_source - A...
ERROR tests/console/commands/test_show.py::test_show_latest_non_decorated[]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[1-expected1-installer.no-binary]
ERROR tests/console/commands/test_config.py::test_unset_value_not_exists - At...
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[-v run --project=run]
ERROR tests/console/commands/test_new.py::test_command_new[options5-namespace-package_a-namespace-package-a-src/namespace/package_a-src]
ERROR tests/console/commands/test_install.py::test_only_root_conflicts_with_without_only_all_groups[--without foo]
ERROR tests/console/commands/test_install.py::test_install_warning_corrupt_root[-False]
ERROR tests/console/commands/test_show.py::test_show_hides_incompatible_package_with_duplicate[]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---without bam-groups12]
ERROR tests/console/commands/python/test_python_list.py::test_list_invalid_version
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--without test-cachy 0.1.0 Cachy package\n]
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[-v --directory=run run]
ERROR tests/console/commands/test_add.py::test_add_directory_constraint[False-required_fixtures0]
ERROR tests/console/commands/test_config.py::test_display_single_setting[virtualenvs.create-true\n]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[1-expected1-installer.only-binary]
ERROR tests/console/commands/source/test_remove.py::test_source_remove_error[PyPI]
ERROR tests/console/commands/test_add.py::test_add_constraint_with_source_that_does_not_exist
ERROR tests/console/commands/test_new.py::test_command_new[options6-namespace-package-namespace-package-namespace_package-None]
ERROR tests/console/commands/test_show.py::test_show_latest_non_decorated[--format json]
ERROR tests/console/commands/self/test_add_plugins.py::test_add_with_git_constraint
ERROR tests/console/commands/test_install.py::test_install_path_dependency_does_not_exist[missing_directory_dependency-]
ERROR tests/console/commands/test_add.py::test_add_directory_constraint[True-required_fixtures0]
ERROR tests/console/commands/test_run.py::test_run_passes_args_after_run_before_command_name_conflict[run -v --directory=run]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--without test --format json-expected5]
ERROR tests/console/commands/test_show.py::test_show_hides_incompatible_package_with_duplicate[--format json]
ERROR tests/console/commands/python/test_python_list.py::test_list - Attribut...
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---with bam --without bam-groups13]
ERROR tests/console/commands/source/test_show.py::test_source_show_simple - A...
ERROR tests/console/commands/test_config.py::test_display_single_setting[repositories.foo.url-{'url': 'https://bar.com/simple/'}\n]
ERROR tests/console/commands/test_add.py::test_add_constraint_not_found_with_source
ERROR tests/console/commands/test_new.py::test_command_new[options7-namespace-package-namespace-package-src/namespace_package-src]
ERROR tests/console/commands/test_show.py::test_show_latest_decorated - Attri...
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[false-expected2-installer.no-binary]
ERROR tests/console/commands/test_check.py::test_check_valid - AttributeError...
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_option[None]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--without main-pytest 3.7.3 Pytest package\n]
ERROR tests/console/commands/test_show.py::test_show_all_shows_all_duplicates[]
ERROR tests/console/commands/test_run.py::test_run_keeps_options_passed_before_command_args_combined_short_opts
ERROR tests/console/commands/python/test_python_list.py::test_list_poetry_managed[False]
ERROR tests/console/commands/test_add.py::test_add_does_not_update_locked_dependencies[True-4.3.1-foo]
ERROR tests/console/commands/test_install.py::test_install_path_dependency_does_not_exist[missing_directory_dependency---without dev]
ERROR tests/console/commands/test_new.py::test_command_new[options8-package-namespace-package-namespace/package-None]
ERROR tests/console/commands/test_add.py::test_add_to_section_that_does_not_exist_yet[dev]
ERROR tests/console/commands/source/test_show.py::test_source_show_one[lower]
ERROR tests/console/commands/test_check.py::test_check_valid_legacy[args0-0]
ERROR tests/console/commands/test_show.py::test_show_outdated[] - AttributeEr...
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[false-expected2-installer.only-binary]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--without main --format json-expected7]
ERROR tests/console/commands/test_run.py::test_run_keeps_options_passed_before_command_args
ERROR tests/console/commands/test_install.py::test_only_root_conflicts_with_without_only_all_groups[--with foo,bar --without baz]
ERROR tests/console/commands/test_new.py::test_command_new[options9-package-namespace-package-src/namespace/package-src]
ERROR tests/console/commands/test_add.py::test_add_does_not_update_locked_dependencies[True-4.3.1-foo --lock]
ERROR tests/console/commands/python/test_python_list.py::test_list_poetry_managed[True]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[0-expected3-installer.no-binary]
ERROR tests/console/commands/source/test_show.py::test_source_show_one[upper]
ERROR tests/console/commands/test_show.py::test_show_all_shows_all_duplicates[--format json]
ERROR tests/console/commands/test_show.py::test_show_outdated[--format json]
ERROR tests/console/commands/test_install.py::test_only_root_conflicts_with_without_only_all_groups[--only foo]
ERROR tests/console/commands/env/test_activate.py::test_no_additional_output_in_verbose_mode[-v]
ERROR tests/console/commands/python/test_python_list.py::test_list_version[3-3]
ERROR tests/console/commands/test_install.py::test_install_path_dependency_does_not_exist[missing_file_dependency-]
ERROR tests/console/commands/test_add.py::test_add_to_new_group_keeps_existing_group
ERROR tests/console/commands/test_new.py::test_command_new[options10-package-namespace-package-namespace/package-None]
ERROR tests/console/commands/env/test_activate.py::test_env_activate_prints_correct_script[bash-source-]
ERROR tests/console/commands/source/test_show.py::test_source_show_two[lower]
ERROR tests/console/commands/test_sync.py::test_extras_are_parsed_and_populate_installer
ERROR tests/console/commands/test_add.py::test_add_does_not_update_locked_dependencies[False-4.3.2-foo]
ERROR tests/console/commands/test_show.py::test_show_tree - AttributeError: '...
ERROR tests/console/commands/python/test_python_list.py::test_list_version[3.9-2]
ERROR tests/console/commands/test_install.py::test_only_root_conflicts_with_without_only_all_groups[--all-groups]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[True---with foo --without foo-groups14]
ERROR tests/console/commands/test_config.py::test_display_single_local_setting
ERROR tests/console/commands/test_add.py::test_add_to_existing_group[False]
ERROR tests/console/commands/test_new.py::test_command_new[options11-package-namespace-package-src/namespace/package-src]
ERROR tests/console/commands/test_sync.py::test_install_ensures_project_plugins[--no-plugins-0]
ERROR tests/console/commands/self/test_add_plugins.py::test_add_with_git_constraint_with_extras
ERROR tests/console/commands/test_add.py::test_add_does_not_update_locked_dependencies[False-4.3.2-foo --lock]
ERROR tests/console/commands/test_add.py::test_add_to_existing_group[True] - ...
ERROR tests/console/commands/test_install.py::test_all_groups_conflicts_with_only_with_without[--with foo]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False--groups0]
ERROR tests/console/commands/test_config.py::test_display_empty_repositories_setting
ERROR tests/console/commands/test_sync.py::test_install_ensures_project_plugins[-1]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--only main-cachy 0.1.0 Cachy package\n]
ERROR tests/console/commands/test_show.py::test_show_tree_no_dev - AttributeE...
ERROR tests/console/commands/test_check.py::test_check_valid_legacy[args1-1]
ERROR tests/console/commands/test_add.py::test_add_to_section_that_does_not_exist_yet[foo.BAR]
ERROR tests/console/commands/test_add.py::test_add_to_group_with_latest_overwrite_existing
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---only-root-groups1]
ERROR tests/console/commands/test_install.py::test_all_groups_conflicts_with_only_with_without[--without foo]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--only main --format json-expected9]
ERROR tests/console/commands/test_config.py::test_unset_nonempty_repositories_section[repositories-You cannot remove the [repositories] section]
ERROR tests/console/commands/test_check.py::test_check_invalid_dep_name_same_as_project_name
ERROR tests/console/commands/self/test_add_plugins.py::test_add_with_git_constraint_with_subdirectory[git+https://github.com/demo/poetry-plugin2.git#subdirectory=subdir-None]
ERROR tests/console/commands/test_sync.py::test_extras_conflicts_all_extras
ERROR tests/console/commands/test_add.py::test_add_creating_poetry_section_does_not_remove_existing_tools
ERROR tests/console/commands/test_run.py::test_run_keeps_options_passed_before_command
ERROR tests/console/commands/test_add.py::test_add_multiple_dependencies_to_dependency_group
ERROR tests/console/commands/test_config.py::test_unset_nonempty_repositories_section[repositories.test-There is no test repository defined]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time --without test-cachy    0.1.0 Cachy package\npendulum 2.0.0 Pendulum package\n]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---only main-groups2]
ERROR tests/console/commands/test_check.py::test_check_invalid - AttributeErr...
ERROR tests/console/commands/test_sync.py::test_only_root_conflicts_with_without_only_all_groups[--with foo]
ERROR tests/console/commands/test_install.py::test_all_groups_conflicts_with_only_with_without[--with foo,bar --without baz]
ERROR tests/console/commands/test_add.py::test_add_to_dev_group - AttributeEr...
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_option[dist]
ERROR tests/console/commands/python/test_python_list.py::test_list_version[3.9.2-0]
ERROR tests/console/commands/self/test_add_plugins.py::test_add_with_git_constraint_with_subdirectory[git+https://github.com/demo/poetry-plugin2.git@master#subdirectory=subdir-master]
ERROR tests/console/commands/test_add.py::test_add_to_group_uses_existing_legacy_group
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---only foo-groups3]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[0-expected3-installer.only-binary]
ERROR tests/console/commands/source/test_show.py::test_source_show_two[upper]
ERROR tests/console/commands/test_check.py::test_check_private - AttributeErr...
ERROR tests/console/commands/test_sync.py::test_only_root_conflicts_with_without_only_all_groups[--without foo]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time --without test --format json-expected11]
ERROR tests/console/commands/test_config.py::test_set_malformed_repositories_setting
ERROR tests/console/commands/test_run.py::test_run_has_helpful_error_when_command_not_found
ERROR tests/console/commands/test_show.py::test_show_outdated_with_only_up_to_date_packages[]
ERROR tests/console/commands/test_install.py::test_install_path_dependency_does_not_exist[missing_file_dependency---without dev]
ERROR tests/console/commands/test_add.py::test_add_creates_dependencies_array_if_necessary
ERROR tests/console/commands/test_add.py::test_add_should_not_select_prereleases
ERROR tests/console/commands/test_new.py::test_command_new[options12-namespace_package-namespace-package-namespace_package-None]
ERROR tests/console/commands/python/test_python_list.py::test_list_version[3.9.3-1]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---only foo,bar-groups4]
ERROR tests/console/commands/test_add.py::test_add_group_directory_constraint_mix_pep735[required_fixtures0]
ERROR tests/console/commands/test_config.py::test_display_undefined_setting[repositories.foo-There is no foo repository defined]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[pytest-expected4-installer.no-binary]
ERROR tests/console/commands/env/test_activate.py::test_env_activate_prints_correct_script[zsh-source-]
ERROR tests/console/commands/source/test_show.py::test_source_show_given_priority[source_primary]
ERROR tests/console/commands/test_check.py::test_check_non_package_mode - Att...
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time --without main,test-pendulum 2.0.0 Pendulum package\n]
ERROR tests/console/commands/test_install.py::test_install_extra_path_dependency_does_not_exist[]
ERROR tests/console/commands/test_new.py::test_command_new[options13-namespace_package-namespace-package-src/namespace_package-src]
ERROR tests/console/commands/python/test_python_list.py::test_list_implementation[PyPy-1]
ERROR tests/console/commands/self/test_add_plugins.py::test_add_existing_plugin_warns_about_no_operation
ERROR tests/console/commands/test_add.py::test_add_should_skip_when_adding_existing_package_with_no_constraint[True]
ERROR tests/console/commands/test_add.py::test_add_does_not_add_poetry_dependencies_if_not_necessary[True]
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_option[other_dist/dist]
ERROR tests/console/commands/test_config.py::test_display_undefined_setting[foo-There is no foo setting.]
ERROR tests/console/commands/test_check.py::test_check_lock_missing[-All set!\n-0]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[pytest-expected4-installer.only-binary]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time --without main,test --format json-expected13]
ERROR tests/console/commands/env/test_activate.py::test_no_additional_output_in_verbose_mode[-vv]
ERROR tests/console/commands/test_add.py::test_add_should_skip_when_adding_existing_package_with_no_constraint[False]
ERROR tests/console/commands/test_new.py::test_command_new_with_readme[None]
ERROR tests/console/commands/test_run.py::test_run_script_exit_code - Attribu...
ERROR tests/console/commands/test_add.py::test_add_does_not_add_poetry_dependencies_if_not_necessary[False]
ERROR tests/console/commands/python/test_python_list.py::test_list_implementation[pypy-1]
ERROR tests/console/commands/source/test_show.py::test_source_show_given_priority[source_supplemental]
ERROR tests/console/commands/test_show.py::test_show_outdated_with_only_up_to_date_packages[--format json]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--only time-pendulum 2.0.0 Pendulum package\n]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[PyTest-expected5-installer.no-binary]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---with foo --without foo-groups14]
ERROR tests/console/commands/env/test_activate.py::test_env_activate_prints_correct_script[fish-source-.fish]
ERROR tests/console/commands/test_install.py::test_install_extra_path_dependency_does_not_exist[--extras notinstallable]
ERROR tests/console/commands/test_new.py::test_command_new_with_readme[md] - ...
ERROR tests/console/commands/test_add.py::test_add_should_skip_when_adding_canonicalized_existing_package_with_no_constraint[True]
ERROR tests/console/commands/test_add.py::test_add_poetry_dependencies_if_necessary[True]
ERROR tests/console/commands/python/test_python_list.py::test_list_implementation[CPython-2]
ERROR tests/console/commands/test_new.py::test_command_new_with_readme[rst]
ERROR tests/console/commands/source/test_show.py::test_source_show_given_priority[source_explicit]
ERROR tests/console/commands/test_show.py::test_show_tree_why_package - Attri...
ERROR tests/console/commands/test_install.py::test_all_groups_conflicts_with_only_with_without[--only foo]
ERROR tests/console/commands/env/test_activate.py::test_env_activate_prints_correct_script[nu-overlay use-.nu]
ERROR tests/console/commands/python/test_python_remove.py::test_remove_invalid_version
ERROR tests/console/commands/test_sync.py::test_only_root_conflicts_with_without_only_all_groups[--with foo,bar --without baz]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---only bam-groups5]
ERROR tests/console/commands/test_run.py::test_run_script_sys_argv0[not installed]
ERROR tests/console/commands/test_install.py::test_install_missing_directory_dependency_with_no_directory[]
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_option[absolute]
ERROR tests/console/commands/test_add.py::test_add_directory_with_poetry[required_fixtures0]
ERROR tests/console/commands/test_add.py::test_add_poetry_dependencies_if_necessary[False]
ERROR tests/console/commands/test_show.py::test_show_outdated_has_prerelease_but_not_allowed[]
ERROR tests/console/commands/test_new.py::test_command_new_with_readme[adoc]
ERROR tests/console/commands/env/test_activate.py::test_no_additional_output_in_verbose_mode[-vvv]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[PyTest-expected5-installer.only-binary]
ERROR tests/console/commands/self/test_add_plugins.py::test_add_existing_plugin_updates_if_requested
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options0-valid_groups0-False]
ERROR tests/console/commands/python/test_python_remove.py::test_remove_version_not_precise_enough
ERROR tests/console/commands/test_sync.py::test_only_root_conflicts_with_without_only_all_groups[--only foo]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---with bam-groups6]
ERROR tests/console/commands/test_config.py::test_list_displays_set_get_local_setting
ERROR tests/console/commands/test_add.py::test_add_file_constraint_wheel[required_fixtures0]
ERROR tests/console/commands/test_build.py::test_build_format_is_not_valid - ...
ERROR tests/console/commands/test_new.py::test_command_new_with_readme[creole]
ERROR tests/console/commands/source/test_show.py::test_source_show_pypi - Att...
ERROR tests/console/commands/test_run.py::test_run_script_sys_argv0[installed]
ERROR tests/console/commands/test_install.py::test_install_missing_directory_dependency_with_no_directory[--no-directory]
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options1-valid_groups1-True]
ERROR tests/console/commands/test_show.py::test_show_outdated_has_prerelease_but_not_allowed[--format json]
ERROR tests/console/commands/env/test_activate.py::test_env_activate_prints_correct_script[csh-source-.csh]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--only time --format json-expected15]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---without foo,bar-groups7]
ERROR tests/console/commands/test_add.py::test_add_file_constraint_sdist[required_fixtures0]
ERROR tests/console/commands/test_config.py::test_list_must_not_display_sources_from_pyproject_toml
ERROR tests/console/commands/env/test_info.py::test_env_info_displays_complete_info
ERROR tests/console/commands/test_show.py::test_show_tree_why - AttributeErro...
ERROR tests/console/commands/test_build.py::test_build_creates_packages_in_dist_directory_if_no_output_is_specified[sdist]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False--groups0]
ERROR tests/console/commands/test_search.py::test_search - AttributeError: 'N...
ERROR tests/console/commands/test_show.py::test_show_outdated_has_prerelease_and_allowed[]
ERROR tests/console/commands/test_add.py::test_add_should_skip_when_adding_canonicalized_existing_package_with_no_constraint[False]
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options2-valid_groups2-True]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--only time --with test-pendulum 2.0.0 Pendulum package\n]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---without main-groups8]
ERROR tests/console/commands/test_config.py::test_set_http_basic - AttributeE...
ERROR tests/console/commands/test_add.py::test_add_constraint_with_extras_option[msgpack]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[pytest,black-expected6-installer.no-binary]
ERROR tests/console/commands/source/test_show.py::test_source_show_pypi_and_other
ERROR tests/console/commands/test_install.py::test_non_package_mode_does_not_try_to_install_root
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---only-root-groups1]
ERROR tests/console/commands/test_search.py::test_search_empty_results - Attr...
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--only time --with test --format json-expected17]
ERROR tests/console/commands/test_sync.py::test_only_root_conflicts_with_without_only_all_groups[--all-groups]
ERROR tests/console/commands/env/test_info.py::test_env_info_displays_path_only
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options3-valid_groups3-True]
ERROR tests/console/commands/test_show.py::test_show_outdated_has_prerelease_and_allowed[--format json]
ERROR tests/console/commands/self/test_add_plugins.py::test_adding_a_plugin_can_update_poetry_dependencies_if_needed
ERROR tests/console/commands/test_add.py::test_add_should_fail_circular_dependency
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_and_build_options[../dist]
ERROR tests/console/commands/test_config.py::test_unset_http_basic - Attribut...
ERROR tests/console/commands/test_add.py::test_add_constraint_with_extras_option[MsgPack]
ERROR tests/console/commands/env/test_activate.py::test_env_activate_prints_correct_script[tcsh-source-.csh]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---only main-groups2]
ERROR tests/console/commands/test_show.py::test_show_why[] - AttributeError: ...
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---with foo,bar --without baz --without bim --only bam-groups9]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time-cachy    0.1.0 Cachy package\npendulum 2.0.0 Pendulum package\npytest   3.7.3 Pytest package\n1]
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options4-valid_groups4-True]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[pytest,black-expected6-installer.only-binary]
ERROR tests/console/commands/source/test_show.py::test_source_show_no_sources
ERROR tests/console/commands/python/test_python_remove.py::test_remove_version_no_installation
ERROR tests/console/commands/test_config.py::test_set_http_basic_unsuccessful_multiple_values
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---only foo-groups3]
ERROR tests/console/commands/test_add.py::test_add_latest_should_strip_out_invalid_pep508_path
ERROR tests/console/commands/test_add.py::test_add_url_constraint_wheel - Att...
ERROR tests/console/commands/test_new.py::test_respect_use_poetry_python_on_new[False-1.1]
ERROR tests/console/commands/test_show.py::test_show_top_level_with_explicitly_defined_dependency[]
ERROR tests/console/commands/test_show.py::test_show_basic_with_group_options[--with time --format json-expected19]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---all-groups-groups10]
ERROR tests/console/commands/test_show.py::test_show_outdated_formatting[] - ...
ERROR tests/console/commands/test_lock.py::test_lock_does_not_update_if_not_necessary
ERROR tests/console/commands/test_add.py::test_add_latest_should_not_create_duplicate_keys[True]
ERROR tests/console/commands/python/test_python_remove.py::test_remove_version
ERROR tests/console/commands/test_config.py::test_set_pypi_token - AttributeE...
ERROR tests/console/commands/env/test_info.py::test_env_info_displays_executable_only
ERROR tests/console/commands/test_update.py::test_update_prints_operations[-True]
ERROR tests/console/commands/test_build.py::test_build_creates_packages_in_dist_directory_if_no_output_is_specified[wheel]
ERROR tests/console/commands/test_show.py::test_show_top_level_with_explicitly_defined_dependency[--format json]
ERROR tests/console/commands/test_show.py::test_show_basic_with_installed_packages_single[]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---only foo,bar-groups4]
ERROR tests/console/commands/test_new.py::test_respect_use_poetry_python_on_new[True-3.10]
ERROR tests/console/commands/test_sync.py::test_all_groups_conflicts_with_only_with_without[--with foo]
ERROR tests/console/commands/python/test_python_remove.py::test_remove_version_implementation[cpython]
ERROR tests/console/commands/test_add.py::test_add_latest_should_not_create_duplicate_keys[False]
ERROR tests/console/commands/test_update.py::test_update_prints_operations[--dry-run-True]
ERROR tests/console/commands/test_build.py::test_build_creates_packages_in_dist_directory_if_no_output_is_specified[all]
ERROR tests/console/commands/test_sync.py::test_dry_run_populates_installer
ERROR tests/console/commands/test_show.py::test_show_basic_with_installed_packages_single[--format json]
ERROR tests/console/commands/test_show.py::test_show_top_level_with_extras[]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---only bam-groups5]
ERROR tests/console/commands/test_show.py::test_show_why[--format json] - Att...
ERROR tests/console/commands/test_new.py::test_basic_interactive_new - Attrib...
ERROR tests/console/commands/python/test_python_remove.py::test_remove_version_implementation[pypy]
ERROR tests/console/commands/test_add.py::test_add_should_work_when_adding_existing_package_with_latest_constraint[True]
ERROR tests/console/commands/env/test_list.py::test_none_activated - Attribut...
ERROR tests/console/commands/test_build.py::test_build_with_local_version_label
ERROR tests/console/commands/self/test_remove_plugins.py::test_remove_installed_package
ERROR tests/console/commands/test_new.py::test_new_creates_structure_in_empty_existing_directory
ERROR tests/console/commands/test_show.py::test_show_required_by_deps[] - Att...
ERROR tests/console/commands/test_show.py::test_show_outdated_formatting[--format json]
ERROR tests/console/commands/python/test_python_remove.py::test_remove_multiple_versions
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_and_build_options[tmp/dist]
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options5-valid_groups5-True]
ERROR tests/console/commands/env/test_list.py::test_activated - AttributeErro...
ERROR tests/console/commands/test_sync.py::test_all_groups_conflicts_with_only_with_without[--without foo]
ERROR tests/console/commands/test_build.py::test_build_with_clean[True] - Att...
ERROR tests/console/commands/test_new.py::test_new_with_dot_in_empty_directory
ERROR tests/console/commands/test_show.py::test_show_outdated_local_dependencies[-project_with_local_dependencies-required_fixtures0]
ERROR tests/console/commands/test_show.py::test_show_required_by_deps[--format json]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---with foo-groups11]
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options6-valid_groups6-True]
ERROR tests/console/commands/test_publish.py::test_publish_not_possible_in_non_package_mode
ERROR tests/console/commands/env/test_list.py::test_in_project_venv - Attribu...
ERROR tests/console/commands/test_build.py::test_build_with_clean[False] - At...
ERROR tests/console/commands/test_show.py::test_show_outdated_local_dependencies[--format json-project_with_local_dependencies-required_fixtures0]
ERROR tests/console/commands/source/test_show.py::test_source_show_no_sources_implicit_pypi
ERROR tests/console/commands/test_sync.py::test_all_groups_conflicts_with_only_with_without[--with foo,bar --without baz]
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---without bam-groups12]
ERROR tests/console/commands/test_show.py::test_show_entire_description_truncate[False]
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options7-valid_groups7-True]
ERROR tests/console/commands/test_show.py::test_show_basic_with_installed_packages_single_canonicalized[]
ERROR tests/console/commands/test_lock.py::test_lock_always_updates_path_dependencies[True]
ERROR tests/console/commands/test_sync.py::test_dry_run_does_not_build - Attr...
ERROR tests/console/commands/test_update.py::test_update_prints_operations[--lock-False]
ERROR tests/console/commands/test_show.py::test_show_outdated_git_dev_dependency[-project_with_git_dev_dependency]
ERROR tests/console/commands/test_build.py::test_build_with_clean_non_existing_output
ERROR tests/console/commands/test_search.py::test_search_with_legacy_repository
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---with bam --without bam-groups13]
ERROR tests/console/commands/test_show.py::test_show_top_level_with_extras[--format json]
ERROR tests/console/commands/test_show.py::test_show_basic_with_installed_packages_single_canonicalized[--format json]
ERROR tests/console/commands/self/test_add_plugins.py::test_add_no_constraint
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---with bam-groups6]
ERROR tests/console/commands/test_lock.py::test_lock_always_updates_path_dependencies[False]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[-expected7-installer.no-binary]
ERROR tests/console/commands/test_sync.py::test_install_logs_output - Attribu...
ERROR tests/console/commands/test_install.py::test_invalid_groups_with_without_only[options8-valid_groups8-False]
ERROR tests/console/commands/test_publish.py::test_publish_dist_dir_and_build_options[absolute]
ERROR tests/console/commands/source/test_show.py::test_source_show_error - At...
ERROR tests/console/commands/test_show.py::test_show_outdated_git_dev_dependency[--format json-project_with_git_dev_dependency]
ERROR tests/console/commands/test_update.py::test_update_sync_option_is_passed_to_the_installer
ERROR tests/console/commands/test_install.py::test_group_options_are_passed_to_the_installer[False---with foo --without foo-groups14]
ERROR tests/console/commands/test_build.py::test_build_not_possible_in_non_package_mode
ERROR tests/console/commands/test_search.py::test_search_only_legacy_repository
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---without foo,bar-groups7]
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_does_not_exist[missing_directory_dependency-True]
ERROR tests/console/commands/test_sync.py::test_install_logs_output_decorated
ERROR tests/console/commands/test_remove.py::test_remove_from_project_and_poetry
ERROR tests/console/commands/test_show.py::test_show_outdated_no_dev_git_dev_dependency[-project_with_git_dev_dependency]
ERROR tests/console/commands/test_config.py::test_config_installer_binary_filter_config[-expected7-installer.only-binary]
ERROR tests/console/commands/test_show.py::test_show_error_top_level_with_tree
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_does_not_exist[missing_directory_dependency-False]
ERROR tests/console/commands/test_add.py::test_add_no_constraint - AttributeE...
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---without main-groups8]
ERROR tests/console/commands/test_sync.py::test_install_warning_corrupt_root[module-True]
ERROR tests/console/commands/test_show.py::test_show_outdated_no_dev_git_dev_dependency[--format json-project_with_git_dev_dependency]
ERROR tests/console/commands/test_search.py::test_search_multiple_queries - A...
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_does_not_exist[missing_file_dependency-True]
ERROR tests/console/commands/test_show.py::test_show_entire_description_truncate[True]
ERROR tests/console/commands/test_config.py::test_config_solver_lazy_wheel - ...
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---with foo,bar --without baz --without bim --only bam-groups9]
ERROR tests/console/commands/test_sync.py::test_install_warning_corrupt_root[module-False]
ERROR tests/console/commands/env/test_list.py::test_in_project_venv_no_explicit_config
ERROR tests/console/commands/test_add.py::test_add_local_version - AttributeE...
ERROR tests/console/commands/test_show.py::test_show_basic_with_installed_packages[]
ERROR tests/console/commands/test_show.py::test_show_error_top_level_with_single_package
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_does_not_exist[missing_file_dependency-False]
ERROR tests/console/commands/test_show.py::test_show_errors_without_lock_file
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---all-groups-groups10]
ERROR tests/console/commands/test_config.py::test_config_migrate[yes-system-git-client = true\n\n[virtualenvs]\nuse-poetry-python = true\n]
ERROR tests/console/commands/test_sync.py::test_install_warning_corrupt_root[readme-True]
ERROR tests/console/commands/self/test_remove_plugins.py::test_remove_installed_package_dry_run
ERROR tests/console/commands/env/test_list.py::test_in_project_venv_is_false
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_deleted_from_pyproject[deleted_directory_dependency-True]
ERROR tests/console/commands/test_add.py::test_add_non_package_mode_no_name
ERROR tests/console/commands/test_show.py::test_show_basic_with_installed_packages[--format json]
ERROR tests/console/commands/test_version.py::test_version_show - AttributeEr...
ERROR tests/console/commands/test_show.py::test_show_outdated_missing_directory_dependency[deleted_directory_dependency-required_fixtures0]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---with foo-groups11]
ERROR tests/console/commands/test_config.py::test_config_migrate[no-[experimental]\nsystem-git-client = true\n\n[virtualenvs]\nprefer-active-python = false\n]
ERROR tests/console/commands/env/test_remove.py::test_remove_by_python_version
ERROR tests/console/commands/test_show.py::test_show_dependency_installed_from_git_in_dev[]
ERROR tests/console/commands/test_remove.py::test_remove_from_pep735_group_and_poetry_group
ERROR tests/console/commands/test_version.py::test_version_show_with_underscore
ERROR tests/console/commands/test_sync.py::test_all_groups_conflicts_with_only_with_without[--only foo]
ERROR tests/console/commands/test_add.py::test_add_replace_by_constraint - At...
ERROR tests/console/commands/test_config.py::test_config_migrate_local_config
ERROR tests/console/commands/env/test_remove.py::test_remove_by_name - Attrib...
ERROR tests/console/commands/test_show.py::test_show_error_invalid_output_format
ERROR tests/console/commands/test_remove.py::test_remove_without_specific_group_removes_from_all_groups[True]
ERROR tests/console/commands/test_version.py::test_short_version_show - Attri...
ERROR tests/console/commands/test_show.py::test_show_hides_incompatible_package[]
ERROR tests/console/commands/env/test_remove.py::test_remove_all[None] - Attr...
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options0-valid_groups0-False]
ERROR tests/console/commands/test_show.py::test_show_dependency_installed_from_git_in_dev[--format json]
ERROR tests/console/commands/test_build.py::test_build_with_multiple_readme_files
ERROR tests/console/commands/test_show.py::test_show_hides_incompatible_package[--format json]
ERROR tests/console/commands/test_remove.py::test_remove_without_specific_group_removes_from_all_groups[False]
ERROR tests/console/commands/test_show.py::test_show_error_invalid_output_format_with_tree_option
ERROR tests/console/commands/test_sync.py::test_install_warning_corrupt_root[readme-False]
ERROR tests/console/commands/test_version.py::test_version_update - Attribute...
ERROR tests/console/commands/env/test_remove.py::test_remove_all[empty] - Att...
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_deleted_from_pyproject[deleted_directory_dependency-False]
ERROR tests/console/commands/test_remove.py::test_remove_with_specific_group_removes_from_specific_groups[True]
ERROR tests/console/commands/test_version.py::test_short_version_update - Att...
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True--groups0]
ERROR tests/console/commands/test_sync.py::test_install_warning_corrupt_root[-True]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---without bam-groups12]
ERROR tests/console/commands/test_show.py::test_url_dependency_is_not_outdated_by_repository_package[]
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options1-valid_groups1-True]
ERROR tests/console/commands/env/test_remove.py::test_remove_all[self] - Attr...
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens0-result0]
ERROR tests/console/commands/test_lock.py::test_lock_path_dependency_deleted_from_pyproject[deleted_file_dependency-True]
ERROR tests/console/commands/test_version.py::test_phase_version_update - Att...
ERROR tests/console/commands/test_remove.py::test_remove_with_specific_group_removes_from_specific_groups[False]
ERROR tests/console/commands/test_sync.py::test_install_warning_corrupt_root[-False]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---with bam --without bam-groups13]
ERROR tests/console/commands/test_show.py::test_url_dependency_is_not_outdated_by_repository_package[--format json]
ERROR tests/console/commands/test_remove.py::test_remove_does_not_keep_empty_groups[True]
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options2-valid_groups2-True]
ERROR tests/console/commands/test_sync.py::test_install_path_dependency_does_not_exist[missing_directory_dependency-]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[False---with foo --without foo-groups14]
ERROR tests/console/commands/test_remove.py::test_remove_does_not_keep_empty_groups[False]
ERROR tests/console/commands/test_sync.py::test_install_path_dependency_does_not_exist[missing_directory_dependency---without dev]
ERROR tests/console/commands/test_sync.py::test_compile_option_is_passed_to_the_installer[False]
ERROR tests/console/commands/test_remove.py::test_remove_canonicalized_named_removes_dependency_correctly[True]
ERROR tests/console/commands/test_show.py::test_show_top_level[] - AttributeE...
ERROR tests/console/commands/test_sync.py::test_compile_option_is_passed_to_the_installer[True]
ERROR tests/console/commands/test_sync.py::test_install_path_dependency_does_not_exist[missing_file_dependency-]
ERROR tests/console/commands/env/test_remove.py::test_remove_all[other] - Att...
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options3-valid_groups3-True]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---only-root-groups1]
ERROR tests/console/commands/test_sync.py::test_no_directory_is_passed_to_installer[True]
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options4-valid_groups4-True]
ERROR tests/console/commands/env/test_remove.py::test_remove_all[self_and_other]
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens1-result1]
ERROR tests/console/commands/test_version.py::test_dry_run - AttributeError: ...
ERROR tests/console/commands/env/test_remove.py::test_remove_all_and_version
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens2-result2]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---only main-groups2]
ERROR tests/console/commands/env/test_remove.py::test_remove_multiple - Attri...
ERROR tests/console/commands/test_remove.py::test_remove_canonicalized_named_removes_dependency_correctly[False]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---only foo-groups3]
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens3-result3]
ERROR tests/console/commands/test_sync.py::test_install_path_dependency_does_not_exist[missing_file_dependency---without dev]
ERROR tests/console/commands/env/test_remove.py::test_remove_in_project - Att...
ERROR tests/console/commands/test_remove.py::test_remove_package_does_not_exist
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---only foo,bar-groups4]
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens4-result4]
ERROR tests/console/commands/test_sync.py::test_install_extra_path_dependency_does_not_exist[]
ERROR tests/console/commands/test_show.py::test_show_top_level[--format json]
ERROR tests/console/commands/env/test_remove.py::test_remove_in_project_all
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options5-valid_groups5-True]
ERROR tests/console/commands/test_remove.py::test_remove_package_no_dependencies
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---only bam-groups5]
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens5-result5]
ERROR tests/console/commands/test_sync.py::test_install_extra_path_dependency_does_not_exist[--extras notinstallable]
ERROR tests/console/commands/env/test_use.py::test_activate_activates_non_existing_virtualenv_no_envs_file
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options6-valid_groups6-True]
ERROR tests/console/commands/test_remove.py::test_remove_command_should_not_write_changes_upon_installer_errors
ERROR tests/console/test_application.py::test_application_input_configuration_and_sorting[tokens6-result6]
ERROR tests/console/commands/self/test_show.py::test_show_format[] - Attribut...
ERROR tests/console/commands/env/test_use.py::test_get_prefers_explicitly_activated_virtualenvs_over_env_var
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---with bam-groups6]
ERROR tests/console/commands/test_sync.py::test_install_missing_directory_dependency_with_no_directory[]
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options7-valid_groups7-True]
ERROR tests/console/commands/test_remove.py::test_remove_with_dry_run_keep_files_intact[up_to_date_lock]
ERROR tests/console/commands/test_sync.py::test_no_directory_is_passed_to_installer[False]
ERROR tests/console/commands/test_sync.py::test_install_missing_directory_dependency_with_no_directory[--no-directory]
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options8-valid_groups8-False]
ERROR tests/console/commands/test_remove.py::test_remove_with_dry_run_keep_files_intact[up_to_date_lock_non_package]
ERROR tests/console/commands/test_sync.py::test_no_all_extras_doesnt_populate_installer
ERROR tests/console/commands/test_sync.py::test_non_package_mode_does_not_try_to_install_root
ERROR tests/console/commands/test_sync.py::test_invalid_groups_with_without_only[options9-valid_groups9-False]
ERROR tests/console/commands/self/test_show.py::test_show_format[--format json]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---without foo,bar-groups7]
ERROR tests/console/commands/env/test_use.py::test_get_prefers_explicitly_activated_non_existing_virtualenvs_over_env_var
ERROR tests/console/commands/test_sync.py::test_all_extras_populates_installer
ERROR tests/console/commands/self/test_show.py::test_show_format[--format text]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---without main-groups8]
ERROR tests/console/commands/python/test_python_install.py::test_install_invalid_version
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---with foo,bar --without baz --without bim --only bam-groups9]
ERROR tests/console/commands/python/test_python_install.py::test_install_free_threaded_not_supported
ERROR tests/console/commands/test_sync.py::test_sync_option_not_available - A...
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---all-groups-groups10]
ERROR tests/console/commands/python/test_python_install.py::test_install_exists
ERROR tests/console/commands/test_sync.py::test_synced_installer - AttributeE...
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---with foo-groups11]
ERROR tests/console/commands/python/test_python_install.py::test_install_no_download
ERROR tests/console/commands/test_update.py::test_update_with_dry_run_keep_files_intact[--dry-run]
ERROR tests/console/commands/self/test_show_plugins.py::test_show_displays_installed_plugins[entry_point_values_by_group0-poetry-plugin]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---without bam-groups12]
ERROR tests/console/commands/test_update.py::test_update_with_dry_run_keep_files_intact[docker --dry-run]
ERROR tests/console/commands/test_sync.py::test_group_options_are_passed_to_the_installer[True---with bam --without bam-groups13]
ERROR tests/console/commands/self/test_show_plugins.py::test_show_displays_installed_plugins[entry_point_values_by_group0-not-package-name]
ERROR tests/console/commands/self/test_show_plugins.py::test_show_displays_installed_plugins_with_multiple_plugins[entry_point_values_by_group0]
ERROR tests/console/commands/self/test_show_plugins.py::test_show_displays_installed_plugins_with_dependencies[entry_point_values_by_group0-plugin_package_requires_dist0]
ERROR tests/console/commands/self/test_update.py::test_self_update_can_update_from_recommended_installation
ERROR tests/console/commands/source/test_add.py::test_source_add_simple - Att...
ERROR tests/console/commands/source/test_add.py::test_source_add_simple_without_existing_sources
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_nonstandard_errors
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[308-Permanent Redirect]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[307-Temporary Redirect]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[304-Not Modified]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[303-See Other]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[302-Found]
ERROR tests/console/commands/source/test_add.py::test_source_add_supplemental
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[301-Moved Permanently]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_redirects[300-Multiple Choices]
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_301_redirects
ERROR tests/console/commands/source/test_add.py::test_source_add_explicit - A...
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_400_errors
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_403_errors
ERROR tests/publishing/test_uploader.py::test_uploader_registers_for_appropriate_400_errors
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[409-]
ERROR tests/plugins/test_plugin_manager.py::test_add_project_plugin_path - At...
ERROR tests/console/commands/source/test_add.py::test_source_add_error_no_url
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[400-File already exists]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[400-Repository does not allow updating assets]
ERROR tests/console/commands/source/test_add.py::test_source_add_error_pypi
ERROR tests/console/commands/source/test_add.py::test_source_add_pypi[pypi]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_no_output_if_fresh[False]
ERROR tests/console/commands/source/test_add.py::test_source_add_pypi[PyPI]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_no_output_if_fresh[True]
ERROR tests/console/commands/source/test_add.py::test_source_add_pypi_explicit
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_ignore_irrelevant_markers[False]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_ignore_irrelevant_markers[True]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[403-Not enough permissions to overwrite artifact]
ERROR tests/publishing/test_uploader.py::test_uploader_skips_existing[400-file name has already been taken]
ERROR tests/publishing/test_uploader.py::test_uploader_skip_existing_bubbles_unskippable_errors
ERROR tests/publishing/test_uploader.py::test_uploader_properly_handles_file_not_existing
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_remove_outdated
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_ignore_already_installed_in_system_env
ERROR tests/repositories/test_installed_repository.py::test_system_site_packages[True]
ERROR tests/repositories/test_installed_repository.py::test_system_site_packages_source_type
ERROR tests/repositories/test_installed_repository.py::test_pipx_shared_lib_site_packages
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_missing_plugins
ERROR tests/repositories/test_installed_repository.py::test_system_site_packages[False]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_only_missing_plugins
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_overwrite_wrong_version_plugins[False]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_install_overwrite_wrong_version_plugins[True]
ERROR tests/plugins/test_plugin_manager.py::test_ensure_plugins_pins_other_installed_packages
ERROR tests/plugins/test_plugin_manager.py::test_project_plugins_are_installed_in_project_folder[False]
ERROR tests/plugins/test_plugin_manager.py::test_project_plugins_are_installed_in_project_folder[True]
ERROR tests/utils/env/test_env.py::test_env_system_packages_are_relative_to_lib[True]
ERROR tests/utils/env/test_env_manager.py::test_activate_activates_non_existing_virtualenv_no_envs_file
ERROR tests/utils/env/test_env.py::test_env_system_packages[True] - Attribute...
ERROR tests/utils/env/test_env.py::test_env_system_packages_are_relative_to_lib[False]
ERROR tests/utils/env/test_env_manager.py::test_activate_activates_different_virtualenv_with_envs_file
ERROR tests/utils/env/test_env_manager.py::test_activate_fails_when_python_cannot_be_found
ERROR tests/utils/env/test_env_manager.py::test_activate_in_project_venv_no_explicit_config
ERROR tests/utils/env/test_env.py::test_env_system_packages[False] - Attribut...
ERROR tests/utils/env/test_env_manager.py::test_activate_activates_recreates_for_different_patch
ERROR tests/utils/env/test_env.py::test_env_no_pip[flags0-packages0] - Attrib...
ERROR tests/utils/env/test_env_manager.py::test_activate_activates_existing_virtualenv_no_envs_file
ERROR tests/utils/env/test_env.py::test_generic_env_system_packages - Attribu...
ERROR tests/utils/env/test_env_manager.py::test_activate_does_not_recreate_when_switching_minor
ERROR tests/utils/env/test_env.py::test_env_no_pip[flags1-packages1] - Attrib...
ERROR tests/utils/env/test_env_manager.py::test_activate_activates_same_virtualenv_with_envs_file
ERROR tests/utils/env/test_env.py::test_env_no_pip[flags2-packages2] - Attrib...
ERROR tests/utils/env/test_env_manager.py::test_remove_by_name - AttributeErr...
ERROR tests/utils/env/test_env_manager.py::test_deactivate_non_activated_but_existing
ERROR tests/utils/env/test_env_manager.py::test_get_venv_with_venv_folder_present[None]
ERROR tests/utils/env/test_env_manager.py::test_create_venv_tries_to_find_a_compatible_python_executable_using_generic_ones_first
ERROR tests/utils/env/test_env_manager.py::test_remove_raises_if_acting_on_different_project_by_name
ERROR tests/utils/env/test_env.py::test_env_finds_the_correct_executables - A...
ERROR tests/utils/env/test_env_manager.py::test_remove_by_string_with_python_and_version
ERROR tests/utils/env/test_env_manager.py::test_activate_with_in_project_setting_does_not_fail_if_no_venvs_dir
ERROR tests/utils/env/test_env_manager.py::test_create_venv_finds_no_python_executable
ERROR tests/utils/env/test_env.py::test_marker_env_is_equal_for_all_envs - At...
ERROR tests/utils/env/test_env_manager.py::test_get_prefers_explicitly_activated_virtualenvs_over_env_var
ERROR tests/utils/env/test_env_manager.py::test_deactivate_activated - Attrib...
ERROR tests/utils/env/test_env.py::test_env_finds_the_correct_executables_for_generic_env
ERROR tests/utils/env/test_env_manager.py::test_remove_by_full_path_to_python
ERROR tests/utils/env/test_env_manager.py::test_create_venv_tries_to_find_a_compatible_python_executable_using_specific_ones
ERROR tests/utils/env/test_env_manager.py::test_list - AttributeError: 'NoneT...
ERROR tests/utils/env/test_env_manager.py::test_build_venv_does_not_change_loglevel
ERROR tests/utils/env/test_env.py::test_env_finds_fallback_executables_for_generic_env
ERROR tests/utils/env/test_env.py::test_build_environment_not_called_without_build_script_specified
ERROR tests/utils/env/test_env_manager.py::test_get_venv_with_venv_folder_present[True]
ERROR tests/utils/env/test_env_manager.py::test_generate_env_name_ignores_case_for_case_insensitive_fs
ERROR tests/utils/env/test_env_manager.py::test_remove_raises_if_acting_on_different_project_by_full_path
ERROR tests/utils/env/test_env.py::test_command_from_bin_preserves_relative_path
ERROR tests/utils/env/test_env_manager.py::test_raises_when_passing_old_env_after_dir_rename
ERROR tests/utils/env/test_env_manager.py::test_create_venv_accepts_fallback_version_w_nonzero_patchlevel
ERROR tests/utils/env/test_env_manager.py::test_remove_also_deactivates - Att...
ERROR tests/utils/env/test_env_manager.py::test_remove_by_python_version - At...
ERROR tests/utils/env/test_env_manager.py::test_create_venv_fails_if_no_compatible_python_version_could_be_found
ERROR tests/utils/env/test_env_manager.py::test_create_venv_does_not_try_to_find_compatible_versions_with_executable
ERROR tests/utils/env/test_env_manager.py::test_create_venv_does_not_keep_inconsistent_envs_entry[False]
ERROR tests/utils/env/test_env_manager.py::test_remove_keeps_dir_if_not_deleteable
ERROR tests/utils/env/test_env_manager.py::test_create_venv_does_not_keep_inconsistent_envs_entry[True]
ERROR tests/utils/env/test_env_manager.py::test_create_venv_uses_patch_version_to_detect_compatibility
ERROR tests/utils/env/test_env_manager.py::test_get_venv_with_venv_folder_present[False]
ERROR tests/utils/env/test_env_manager.py::test_create_venv_uses_patch_version_to_detect_compatibility_with_executable
ERROR tests/utils/env/test_env.py::test_virtualenvs_with_spaces_in_their_path_work_as_expected
ERROR tests/utils/env/test_env_manager.py::test_create_venv_fails_if_current_python_version_is_not_supported
ERROR tests/utils/env/test_env.py::test_env_commands_with_spaces_in_their_arg_work_as_expected
ERROR tests/utils/env/test_env.py::test_env_get_supported_tags_matches_inside_virtualenv[True]
ERROR tests/utils/env/test_env.py::test_env_get_supported_tags_matches_inside_virtualenv[False]
FAILED tests/console/commands/test_init.py::test_init_non_interactive_existing_pyproject_add_dependency
FAILED tests/console/commands/test_build.py::test_build_relative_directory_src_layout
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[core_in_range-False]
FAILED tests/console/commands/test_init.py::test_interactive_with_dependencies
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[core_not_in_range-True]
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[has_build_script-True]
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[multiple_build_deps-True]
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[no_core-True]
FAILED tests/console/commands/test_init.py::test_interactive_with_dependencies_and_no_selection
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[core_from_git-True]
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[no_build_system-False]
FAILED tests/console/commands/test_build.py::test_requires_isolated_build[no_build_backend-False]
FAILED tests/console/commands/test_build.py::test_build_handler_build_isolated
FAILED tests/console/commands/test_init.py::test_interactive_with_git_dependencies
FAILED tests/console/commands/test_init.py::test_interactive_with_git_dependencies_with_reference
FAILED tests/console/commands/test_init.py::test_interactive_with_git_dependencies_and_other_name
FAILED tests/console/commands/test_init.py::test_interactive_with_directory_dependency
FAILED tests/console/commands/test_init.py::test_interactive_with_directory_dependency_and_other_name
FAILED tests/console/commands/test_init.py::test_interactive_with_file_dependency
FAILED tests/console/commands/test_init.py::test_interactive_with_wrong_dependency_inputs
FAILED tests/inspection/test_info.py::test_info_setup_complex_pep517_error - ...
FAILED tests/inspection/test_info.py::test_info_setup_complex_pep517_legacy
FAILED tests/inspection/test_info.py::test_info_setup_complex_calls_script - ...
FAILED tests/console/commands/test_init.py::test_predefined_dependency - Attr...
FAILED tests/console/commands/test_init.py::test_predefined_and_interactive_dependencies
FAILED tests/console/test_application.py::test_application_verify_source_cache_flag[False]
FAILED tests/console/commands/test_init.py::test_predefined_dev_dependency - ...
FAILED tests/console/test_application.py::test_application_verify_cache_flag_at_install[True]
FAILED tests/inspection/test_info.py::test_info_setup_missing_mandatory_should_trigger_pep517[version]
FAILED tests/console/test_application.py::test_application_verify_cache_flag_at_install[False]
FAILED tests/inspection/test_info.py::test_info_setup_missing_mandatory_should_trigger_pep517[name]
FAILED tests/console/commands/test_init.py::test_predefined_and_interactive_dev_dependencies
FAILED tests/console/commands/test_init.py::test_predefined_all_options - Att...
FAILED tests/inspection/test_info.py::test_info_from_sdist_no_pkg_info - Attr...
FAILED tests/console/test_application.py::test_application_verify_source_cache_flag[True]
FAILED tests/inspection/test_info.py::test_info_setup_simple - AttributeError...
FAILED tests/inspection/test_info.py::test_info_setup_complex - AttributeErro...
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_falls_back_on_setup_and_pip_for_packages_with_build_scripts
FAILED tests/publishing/test_publisher.py::test_publish_publishes_to_pypi_by_default
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_installs_proper_files_when_packages_configured
FAILED tests/puzzle/test_provider.py::test_search_for_directory_setup_with_base[non-canonical-name]
FAILED tests/publishing/test_publisher.py::test_publish_can_publish_to_given_repository[sample_project]
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_generates_proper_metadata_when_multiple_readme_files
FAILED tests/publishing/test_publisher.py::test_publish_can_publish_to_given_repository[with_source]
FAILED tests/publishing/test_publisher.py::test_publish_raises_error_for_undefined_repository
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_should_execute_build_scripts
FAILED tests/publishing/test_publisher.py::test_publish_uses_token_if_it_exists
FAILED tests/publishing/test_publisher.py::test_publish_uses_env_token_if_it_exists
FAILED tests/publishing/test_publisher.py::test_publish_uses_cert - Attribute...
FAILED tests/publishing/test_publisher.py::test_publish_uses_client_cert - At...
FAILED tests/publishing/test_publisher.py::test_publish_read_from_environment_variable
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_catches_bad_scripts_no_colon
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_catches_bad_scripts_too_many_colon
FAILED tests/puzzle/test_provider.py::test_search_for_directory_setup_read_setup_with_no_dependencies
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_installs_proper_files_for_standard_packages[simple_project]
FAILED tests/masonry/builders/test_editable_builder.py::test_builder_installs_proper_files_for_standard_packages[simple_project_legacy]
FAILED tests/puzzle/test_solver.py::test_solver_chooses_from_supplemental_if_explicit
FAILED tests/puzzle/test_solver.py::test_solver_can_resolve_directory_dependencies_nested_editable
FAILED tests/repositories/test_legacy_repository.py::test_get_package_information_fallback_read_setup
FAILED tests/puzzle/test_solver.py::test_solver_does_not_choose_from_supplemental_repository_by_default
FAILED tests/puzzle/test_solver.py::test_solver_ignores_explicit_repo_for_transitive_dependencies
FAILED tests/test_factory.py::test_create_pyproject_from_package[project_with_extras]
FAILED tests/puzzle/test_provider.py::test_search_for_directory_setup_egg_info[non-canonical-name]
FAILED tests/test_factory.py::test_create_poetry_with_packages_and_includes
FAILED tests/test_factory.py::test_poetry_with_pypi_explicit_only[with_explicit_pypi_no_other]
FAILED tests/test_factory.py::test_poetry_with_pypi_explicit_only[with_explicit_pypi_and_other_explicit]
FAILED tests/test_factory.py::test_create_poetry_with_multi_constraints_dependency
FAILED tests/test_factory.py::test_create_poetry - AttributeError: 'NoneType'...
FAILED tests/test_factory.py::test_create_poetry_with_local_config - Attribut...
FAILED tests/test_factory.py::test_create_poetry_version_not_ok - Failed: DID...
FAILED tests/test_factory.py::test_create_pyproject_from_package[simple_project_legacy]
FAILED tests/test_factory.py::test_create_poetry_with_plugins - AttributeErro...
FAILED tests/test_factory.py::test_create_poetry_non_package_mode - Attribute...
FAILED tests/test_factory.py::test_poetry_with_primary_source[with_primary_source_implicit]
FAILED tests/test_factory.py::test_poetry_with_primary_source[with_primary_source_explicit]
FAILED tests/test_factory.py::test_poetry_with_multiple_supplemental_sources
FAILED tests/test_factory.py::test_poetry_with_multiple_sources - AttributeEr...
FAILED tests/repositories/test_legacy_repository.py::test_package_partial_yank
FAILED tests/repositories/test_legacy_repository.py::test_get_package_retrieves_packages_with_no_hashes
FAILED tests/test_factory.py::test_poetry_with_multiple_sources_pypi - Attrib...
FAILED tests/test_factory.py::test_poetry_with_no_default_source - AttributeE...
FAILED tests/test_factory.py::test_create_poetry_fails_on_invalid_configuration
FAILED tests/test_factory.py::test_poetry_with_supplemental_source - Attribut...
FAILED tests/test_factory.py::test_create_poetry_fails_on_nameless_project - ...
FAILED tests/test_factory.py::test_poetry_with_explicit_source - AttributeErr...
FAILED tests/utils/env/test_env.py::test_build_environment_called_build_script_specified
FAILED tests/test_factory.py::test_poetry_with_explicit_pypi_and_other - Attr...
FAILED tests/utils/env/test_env_manager.py::test_create_venv_project_name_empty_sets_correct_prompt
FAILED tests/installation/test_installer.py::test_run_installs_with_local_setuptools_directory[False]
FAILED tests/utils/test_isolated_build.py::test_isolated_builder_outside_poetry_project_context
FAILED tests/utils/test_python_manager.py::test_python_find_compatible - Attr...
FAILED tests/installation/test_installer.py::test_run_installs_with_local_setuptools_directory[True]
92 failed, 1821 passed, 8 skipped, 799 errors in 27.46s
